\hypertarget{Almog__Engine_8h_source}{}\doxysection{Almog\+\_\+\+Engine.\+h}
\label{Almog__Engine_8h_source}\index{src/include/Almog\_Engine.h@{src/include/Almog\_Engine.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001 }
\DoxyCodeLine{00030 \textcolor{preprocessor}{\#ifndef ALMOG\_ENGINE\_H\_}}
\DoxyCodeLine{00031 \textcolor{preprocessor}{\#define ALMOG\_ENGINE\_H\_}}
\DoxyCodeLine{00032 }
\DoxyCodeLine{00033 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{Almog__Dynamic__Array_8h}{./Almog\_Dynamic\_Array.h}}"{}}}
\DoxyCodeLine{00034 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{Matrix2D_8h}{./Matrix2D.h}}"{}}}
\DoxyCodeLine{00035 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{Almog__Draw__Library_8h}{./Almog\_Draw\_Library.h}}"{}}}
\DoxyCodeLine{00036 }
\DoxyCodeLine{00037 \textcolor{preprocessor}{\#ifndef ALMOG\_STRING\_MANIPULATION\_IMPLEMENTATION}}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00038}\mbox{\hyperlink{Almog__Engine_8h_a7dcf618ed2a010f88afa86c4687cf444}{00038}} \textcolor{preprocessor}{\#define ALMOG\_STRING\_MANIPULATION\_IMPLEMENTATION}}
\DoxyCodeLine{00039 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00040 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{Almog__String__Manipulation_8h}{./Almog\_String\_Manipulation.h}}"{}}}
\DoxyCodeLine{00041 }
\DoxyCodeLine{00042 \textcolor{preprocessor}{\#ifndef AE\_ASSERT}}
\DoxyCodeLine{00043 \textcolor{preprocessor}{\#include <assert.h>}}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00044}\mbox{\hyperlink{Almog__Engine_8h_ae0ee5af7ebeb8607977697ad6710723f}{00044}} \textcolor{preprocessor}{\#define AE\_ASSERT assert}}
\DoxyCodeLine{00045 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00046 }
\DoxyCodeLine{00047 \textcolor{preprocessor}{\#include <math.h>}}
\DoxyCodeLine{00048 \textcolor{preprocessor}{\#include <stdbool.h>}}
\DoxyCodeLine{00049 \textcolor{preprocessor}{\#include <float.h>}}
\DoxyCodeLine{00050 \textcolor{preprocessor}{\#include <stdint.h>}}
\DoxyCodeLine{00051 \textcolor{preprocessor}{\#include <errno.h>}}
\DoxyCodeLine{00052 \textcolor{preprocessor}{\#include <string.h>}}
\DoxyCodeLine{00053 }
\DoxyCodeLine{00054 \textcolor{preprocessor}{\#ifndef PI}}
\DoxyCodeLine{00055 \textcolor{preprocessor}{\#define PI M\_PI}}
\DoxyCodeLine{00056 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00057 }
\DoxyCodeLine{00058 \textcolor{preprocessor}{\#ifndef STL\_HEADER\_SIZE}}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00059}\mbox{\hyperlink{Almog__Engine_8h_a370cf2e354323ac710025b5c1e2c58ee}{00059}} \textcolor{preprocessor}{\#define STL\_HEADER\_SIZE 80}}
\DoxyCodeLine{00060 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00061 }
\DoxyCodeLine{00062 \textcolor{preprocessor}{\#ifndef STL\_NUM\_SIZE}}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00063}\mbox{\hyperlink{Almog__Engine_8h_adc4d38536e2dbc11bd68cda744bde13e}{00063}} \textcolor{preprocessor}{\#define STL\_NUM\_SIZE 4}}
\DoxyCodeLine{00064 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00065 }
\DoxyCodeLine{00066 \textcolor{preprocessor}{\#ifndef STL\_SIZE\_FOREACH\_TRI}}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00067}\mbox{\hyperlink{Almog__Engine_8h_ad65703d595e8448cd1669cc21a2d8d16}{00067}} \textcolor{preprocessor}{\#define STL\_SIZE\_FOREACH\_TRI 50}}
\DoxyCodeLine{00068 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00069 }
\DoxyCodeLine{00070 \textcolor{preprocessor}{\#ifndef STL\_ATTRIBUTE\_BITS\_SIZE}}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00071}\mbox{\hyperlink{Almog__Engine_8h_a45967694710f3c5c2924b7afff0e9775}{00071}} \textcolor{preprocessor}{\#define STL\_ATTRIBUTE\_BITS\_SIZE 2}}
\DoxyCodeLine{00072 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00073 }
\DoxyCodeLine{00074 \textcolor{preprocessor}{\#ifndef HexARGB\_RGBA}}
\DoxyCodeLine{00075 \textcolor{preprocessor}{\#define HexARGB\_RGBA(x) ((x)>>(8*2)\&0xFF), ((x)>>(8*1)\&0xFF), ((x)>>(8*0)\&0xFF), ((x)>>(8*3)\&0xFF)}}
\DoxyCodeLine{00076 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00077 \textcolor{preprocessor}{\#ifndef HexARGB\_RGB\_VAR}}
\DoxyCodeLine{00078 \textcolor{preprocessor}{\#define HexARGB\_RGB\_VAR(x, r, g, b) r = ((x)>>(8*2)\&0xFF); g = ((x)>>(8*1)\&0xFF); b = ((x)>>(8*0)\&0xFF);}}
\DoxyCodeLine{00079 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00080 \textcolor{preprocessor}{\#ifndef HexARGB\_RGBA\_VAR}}
\DoxyCodeLine{00081 \textcolor{preprocessor}{\#define HexARGB\_RGBA\_VAR(x, r, g, b, a) r = ((x)>>(8*2)\&0xFF); g = ((x)>>(8*1)\&0xFF); b = ((x)>>(8*0)\&0xFF); a = ((x)>>(8*3)\&0xFF)}}
\DoxyCodeLine{00082 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00083}\mbox{\hyperlink{Almog__Engine_8h_a6f18a8c8789c03cb3eb675357954917f}{00083}} \textcolor{preprocessor}{\#define ARGB\_hexARGB(a, r, g, b) 0x01000000l*(uint8\_t)(a) + 0x00010000*(uint8\_t)(r) + 0x00000100*(uint8\_t)(g) + 0x00000001*(uint8\_t)(b)}}
\DoxyCodeLine{00084 \textcolor{preprocessor}{\#ifndef RGB\_hexRGB}}
\DoxyCodeLine{00085 \textcolor{preprocessor}{\#define RGB\_hexRGB(r, g, b) (int)(0x010000*(int)(r) + 0x000100*(int)(g) + 0x000001*(int)(b))}}
\DoxyCodeLine{00086 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00087 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00088}\mbox{\hyperlink{Almog__Engine_8h_a03c3b1820f0b451f70c3b3848cd80ddb}{00088}} \textcolor{preprocessor}{\#define AE\_MAX\_POINT\_VAL 1e5}}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00089}\mbox{\hyperlink{Almog__Engine_8h_a47b289604d96908f7b3ae5ea6235be9c}{00089}} \textcolor{preprocessor}{\#define ae\_assert\_point\_is\_valid(p) AE\_ASSERT(isfinite((p).x) \&\& isfinite((p).y) \&\& isfinite((p).z) \&\& isfinite((p).w));    \(\backslash\)}}
\DoxyCodeLine{00090 \textcolor{preprocessor}{        AE\_ASSERT((p).x > -\/AE\_MAX\_POINT\_VAL \&\& (p).x < AE\_MAX\_POINT\_VAL);                                                                  \(\backslash\)}}
\DoxyCodeLine{00091 \textcolor{preprocessor}{        AE\_ASSERT((p).y > -\/AE\_MAX\_POINT\_VAL \&\& (p).y < AE\_MAX\_POINT\_VAL);                                                                  \(\backslash\)}}
\DoxyCodeLine{00092 \textcolor{preprocessor}{        AE\_ASSERT((p).z > -\/AE\_MAX\_POINT\_VAL \&\& (p).z < AE\_MAX\_POINT\_VAL);                                                                  \(\backslash\)}}
\DoxyCodeLine{00093 \textcolor{preprocessor}{        AE\_ASSERT((p).w > -\/AE\_MAX\_POINT\_VAL \&\& (p).w < AE\_MAX\_POINT\_VAL);}}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00094}\mbox{\hyperlink{Almog__Engine_8h_ad51295cab44c98e63a76c2f2ecaeb16c}{00094}} \textcolor{preprocessor}{\#define ae\_assert\_tri\_is\_valid(tri) ae\_assert\_point\_is\_valid((tri).points[0]);  \(\backslash\)}}
\DoxyCodeLine{00095 \textcolor{preprocessor}{        ae\_assert\_point\_is\_valid((tri).points[1]);                              \(\backslash\)}}
\DoxyCodeLine{00096 \textcolor{preprocessor}{        ae\_assert\_point\_is\_valid((tri).points[2])}}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00097}\mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{00097}} \textcolor{preprocessor}{\#define ae\_assert\_quad\_is\_valid(quad) ae\_assert\_point\_is\_valid((quad).points[0]);   \(\backslash\)}}
\DoxyCodeLine{00098 \textcolor{preprocessor}{        ae\_assert\_point\_is\_valid((quad).points[1]);                                 \(\backslash\)}}
\DoxyCodeLine{00099 \textcolor{preprocessor}{        ae\_assert\_point\_is\_valid((quad).points[2]);                                 \(\backslash\)}}
\DoxyCodeLine{00100 \textcolor{preprocessor}{        ae\_assert\_point\_is\_valid((quad).points[3])}}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00101}\mbox{\hyperlink{Almog__Engine_8h_a88641a8940288e9e15bd21b7b96c6245}{00101}} \textcolor{preprocessor}{\#define ae\_point\_normalize\_xyz\_norma(p, norma) (p).x = (p).x / norma;  \(\backslash\)}}
\DoxyCodeLine{00102 \textcolor{preprocessor}{        (p).y = (p).y / norma;                        \(\backslash\)}}
\DoxyCodeLine{00103 \textcolor{preprocessor}{        (p).z = (p).z / norma }}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00104}\mbox{\hyperlink{Almog__Engine_8h_a99f5599df51ee61f6b79cb702dd90718}{00104}} \textcolor{preprocessor}{\#define ae\_point\_calc\_norma(p) sqrt(((p).x * (p).x) + ((p).y * (p).y) + ((p).z * (p).z))}}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00105}\mbox{\hyperlink{Almog__Engine_8h_a79d5f5baf43bc7a9c1c9d5ae1d3a18c3}{00105}} \textcolor{preprocessor}{\#define ae\_point\_add\_point(p, p1, p2) (p).x = (p1).x + (p2).x;  \(\backslash\)}}
\DoxyCodeLine{00106 \textcolor{preprocessor}{        (p).y = (p1).y + (p2).y;                                \(\backslash\)}}
\DoxyCodeLine{00107 \textcolor{preprocessor}{        (p).z = (p1).z + (p2).z;                                \(\backslash\)}}
\DoxyCodeLine{00108 \textcolor{preprocessor}{        (p).w = (p1).w + (p2).w}}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00109}\mbox{\hyperlink{Almog__Engine_8h_a9575038baa976bf6b7c39cefd2f2c80b}{00109}} \textcolor{preprocessor}{\#define ae\_point\_sub\_point(p, p1, p2) (p).x = (p1).x -\/ (p2).x;  \(\backslash\)}}
\DoxyCodeLine{00110 \textcolor{preprocessor}{        (p).y = (p1).y -\/ (p2).y;                                \(\backslash\)}}
\DoxyCodeLine{00111 \textcolor{preprocessor}{        (p).z = (p1).z -\/ (p2).z;                                \(\backslash\)}}
\DoxyCodeLine{00112 \textcolor{preprocessor}{        (p).w = (p1).w -\/ (p2).w}}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00113}\mbox{\hyperlink{Almog__Engine_8h_af776055b6fac2e29e16d4a4fbd32d91b}{00113}} \textcolor{preprocessor}{\#define ae\_point\_dot\_point(p1, p2) (((p1).x * (p2).x) + ((p1).y * (p2).y) + ((p1).z * (p2).z))}}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00114}\mbox{\hyperlink{Almog__Engine_8h_a7a7f28fc36bafd3717ab9c0fc5103e03}{00114}} \textcolor{preprocessor}{\#define ae\_point\_mult(p, const) (p).x *= const; \(\backslash\)}}
\DoxyCodeLine{00115 \textcolor{preprocessor}{        (p).y *= const;                         \(\backslash\)}}
\DoxyCodeLine{00116 \textcolor{preprocessor}{        (p).z *= const}}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00117}\mbox{\hyperlink{Almog__Engine_8h_a640ff0675ee6dc6d040bf5941be08258}{00117}} \textcolor{preprocessor}{\#define ae\_points\_equal(p1, p2) (p1).x == (p2).x \&\& (p1).y == (p2).y \&\& (p1).z == (p2).z}}
\DoxyCodeLine{00118 }
\DoxyCodeLine{00119 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00120}\mbox{\hyperlink{Almog__Engine_8h_a3b664376e82e1cd4013e17ea17ac6501}{00120}} \textcolor{keyword}{typedef} \textcolor{keyword}{enum} \{}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00121}\mbox{\hyperlink{Almog__Engine_8h_a3b664376e82e1cd4013e17ea17ac6501ad2872f5089e1989c79eaf9a2d83faceb}{00121}}     \mbox{\hyperlink{Almog__Engine_8h_a3b664376e82e1cd4013e17ea17ac6501ad2872f5089e1989c79eaf9a2d83faceb}{AE\_LIGHTING\_FLAT}},}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00122}\mbox{\hyperlink{Almog__Engine_8h_a3b664376e82e1cd4013e17ea17ac6501a960031a84842327b8c9061dc0f9752b6}{00122}}     \mbox{\hyperlink{Almog__Engine_8h_a3b664376e82e1cd4013e17ea17ac6501a960031a84842327b8c9061dc0f9752b6}{AE\_LIGHTING\_SMOOTH}},}
\DoxyCodeLine{00123     \mbox{\hyperlink{Almog__Engine_8h_a3b664376e82e1cd4013e17ea17ac6501ac75a3c6fda462283fc3d03e3167f7e73}{AE\_LIGHTING\_MODE\_LENGTH}}}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00124}\mbox{\hyperlink{Almog__Engine_8h_a3b664376e82e1cd4013e17ea17ac6501ac75a3c6fda462283fc3d03e3167f7e73}{00124}} \} \mbox{\hyperlink{Almog__Engine_8h_a3b664376e82e1cd4013e17ea17ac6501}{Lighting\_mode}};}
\DoxyCodeLine{00125 }
\DoxyCodeLine{00126 \textcolor{preprocessor}{\#ifndef TRI\_MESH\_ARRAY}}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00127}\mbox{\hyperlink{Almog__Engine_8h_a2296609e5a9e3c6015c56ccfebaaadc6}{00127}} \textcolor{preprocessor}{\#define TRI\_MESH\_ARRAY}}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00128}\mbox{\hyperlink{structTri__mesh__array}{00128}} \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00129}\mbox{\hyperlink{structTri__mesh__array_acb45e304ded2b6eddf5eb3dab3e66609}{00129}}     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{structTri__mesh__array_acb45e304ded2b6eddf5eb3dab3e66609}{length}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00130}\mbox{\hyperlink{structTri__mesh__array_a4227912a95f34d7640bac63b3e9da289}{00130}}     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{structTri__mesh__array_a4227912a95f34d7640bac63b3e9da289}{capacity}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00131}\mbox{\hyperlink{structTri__mesh__array_afe536b7ba3c01eee05be25677d1eb692}{00131}}     \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} *\mbox{\hyperlink{structTri__mesh__array_afe536b7ba3c01eee05be25677d1eb692}{elements}};}
\DoxyCodeLine{00132 \} \mbox{\hyperlink{structTri__mesh__array}{Tri\_mesh\_array}}; \textcolor{comment}{/* Tri\_mesh ada array */}}
\DoxyCodeLine{00133 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00134 }
\DoxyCodeLine{00135 \textcolor{preprocessor}{\#ifndef QUAD\_MESH\_ARRAY}}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00136}\mbox{\hyperlink{Almog__Engine_8h_a398bca11413e52815bbc275b2c797347}{00136}} \textcolor{preprocessor}{\#define QUAD\_MESH\_ARRAY}}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00137}\mbox{\hyperlink{structQuad__mesh__array}{00137}} \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00138}\mbox{\hyperlink{structQuad__mesh__array_a74a7a2dc126bb70072ea18412f28b36a}{00138}}     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{structQuad__mesh__array_a74a7a2dc126bb70072ea18412f28b36a}{length}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00139}\mbox{\hyperlink{structQuad__mesh__array_a904a88351be8b3c1ac1ab34b234c9dfc}{00139}}     \textcolor{keywordtype}{size\_t} \mbox{\hyperlink{structQuad__mesh__array_a904a88351be8b3c1ac1ab34b234c9dfc}{capacity}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00140}\mbox{\hyperlink{structQuad__mesh__array_a79fc4899d27a540aa2e034ff3713fbf9}{00140}}     \mbox{\hyperlink{structQuad__mesh}{Quad\_mesh}} *\mbox{\hyperlink{structQuad__mesh__array_a79fc4899d27a540aa2e034ff3713fbf9}{elements}};}
\DoxyCodeLine{00141 \} \mbox{\hyperlink{structQuad__mesh__array}{Quad\_mesh\_array}}; \textcolor{comment}{/* Quad\_mesh ada array */}}
\DoxyCodeLine{00142 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00143 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00144}\mbox{\hyperlink{structCamera}{00144}} \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00145}\mbox{\hyperlink{structCamera_a077bf8e57757a839d13cf995c4e05ab5}{00145}}     \mbox{\hyperlink{structMat2D}{Mat2D}} \mbox{\hyperlink{structCamera_a077bf8e57757a839d13cf995c4e05ab5}{init\_position}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00146}\mbox{\hyperlink{structCamera_adc5641764d588d64baeb2c9a5773d2e0}{00146}}     \mbox{\hyperlink{structMat2D}{Mat2D}} \mbox{\hyperlink{structCamera_adc5641764d588d64baeb2c9a5773d2e0}{current\_position}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00147}\mbox{\hyperlink{structCamera_aca1b0a8e748059f79a00ab1a0c775624}{00147}}     \mbox{\hyperlink{structMat2D}{Mat2D}} \mbox{\hyperlink{structCamera_aca1b0a8e748059f79a00ab1a0c775624}{offset\_position}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00148}\mbox{\hyperlink{structCamera_a1041adaac6e1d8aacd1d02319adeb3a1}{00148}}     \mbox{\hyperlink{structMat2D}{Mat2D}} \mbox{\hyperlink{structCamera_a1041adaac6e1d8aacd1d02319adeb3a1}{direction}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00149}\mbox{\hyperlink{structCamera_a14ebc5ce9490721428eaf1ca023322f9}{00149}}     \textcolor{keywordtype}{float} \mbox{\hyperlink{structCamera_a14ebc5ce9490721428eaf1ca023322f9}{z\_near}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00150}\mbox{\hyperlink{structCamera_a49a09d8504a193843ae9496397a5a883}{00150}}     \textcolor{keywordtype}{float} \mbox{\hyperlink{structCamera_a49a09d8504a193843ae9496397a5a883}{z\_far}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00151}\mbox{\hyperlink{structCamera_a3d5ecfc703004c3d4e1098c0e9575e35}{00151}}     \textcolor{keywordtype}{float} \mbox{\hyperlink{structCamera_a3d5ecfc703004c3d4e1098c0e9575e35}{fov\_deg}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00152}\mbox{\hyperlink{structCamera_a5742c2c47c7afc5a6d49b6e5759db3cd}{00152}}     \textcolor{keywordtype}{float} \mbox{\hyperlink{structCamera_a5742c2c47c7afc5a6d49b6e5759db3cd}{aspect\_ratio}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00153}\mbox{\hyperlink{structCamera_a5904daa05edae9d8ed86becf7b3e4059}{00153}}     \textcolor{keywordtype}{float} \mbox{\hyperlink{structCamera_a5904daa05edae9d8ed86becf7b3e4059}{roll\_offset\_deg}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00154}\mbox{\hyperlink{structCamera_ac744a4909bde4c4f58cc7b6918c8c7e3}{00154}}     \textcolor{keywordtype}{float} \mbox{\hyperlink{structCamera_ac744a4909bde4c4f58cc7b6918c8c7e3}{pitch\_offset\_deg}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00155}\mbox{\hyperlink{structCamera_aff86483478f1228e641b98a9ddd13774}{00155}}     \textcolor{keywordtype}{float} \mbox{\hyperlink{structCamera_aff86483478f1228e641b98a9ddd13774}{yaw\_offset\_deg}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00156}\mbox{\hyperlink{structCamera_abb8a2eb94f9ef97bc23fcc3c3f220969}{00156}}     \mbox{\hyperlink{structMat2D}{Mat2D}} \mbox{\hyperlink{structCamera_abb8a2eb94f9ef97bc23fcc3c3f220969}{camera\_x}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00157}\mbox{\hyperlink{structCamera_a16ce40de4ecd440a4ebe700e6cb97f59}{00157}}     \mbox{\hyperlink{structMat2D}{Mat2D}} \mbox{\hyperlink{structCamera_a16ce40de4ecd440a4ebe700e6cb97f59}{camera\_y}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00158}\mbox{\hyperlink{structCamera_a9c279b07c32c1a4122dcf88fa5075bdc}{00158}}     \mbox{\hyperlink{structMat2D}{Mat2D}} \mbox{\hyperlink{structCamera_a9c279b07c32c1a4122dcf88fa5075bdc}{camera\_z}};}
\DoxyCodeLine{00159 \} \mbox{\hyperlink{structCamera}{Camera}};}
\DoxyCodeLine{00160 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00161}\mbox{\hyperlink{structLight__source}{00161}} \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00162}\mbox{\hyperlink{structLight__source_ac24d933710b710d1ed6d45b4696e38c8}{00162}}     \mbox{\hyperlink{structPoint}{Point}} \mbox{\hyperlink{structLight__source_ac24d933710b710d1ed6d45b4696e38c8}{light\_direction\_or\_pos}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00163}\mbox{\hyperlink{structLight__source_a35f7bef9375ad1c6b3d2544c53b43493}{00163}}     \textcolor{keywordtype}{float} \mbox{\hyperlink{structLight__source_a35f7bef9375ad1c6b3d2544c53b43493}{light\_intensity}};}
\DoxyCodeLine{00164 \} \mbox{\hyperlink{structLight__source}{Light\_source}};}
\DoxyCodeLine{00165 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00166}\mbox{\hyperlink{structMaterial}{00166}} \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00167}\mbox{\hyperlink{structMaterial_a5e9c413095df430758f6b31c9bfb60e1}{00167}}     \textcolor{keywordtype}{float} \mbox{\hyperlink{structMaterial_a5e9c413095df430758f6b31c9bfb60e1}{specular\_power\_alpha}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00168}\mbox{\hyperlink{structMaterial_a198bf89cad562cca2c4c7015f9f81e86}{00168}}     \textcolor{keywordtype}{float} \mbox{\hyperlink{structMaterial_a198bf89cad562cca2c4c7015f9f81e86}{c\_ambi}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00169}\mbox{\hyperlink{structMaterial_a380c5e541b1fe955a6bb96d35293cff4}{00169}}     \textcolor{keywordtype}{float} \mbox{\hyperlink{structMaterial_a380c5e541b1fe955a6bb96d35293cff4}{c\_diff}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00170}\mbox{\hyperlink{structMaterial_a27cc8a0811ea2dc434d7cc4ab9785917}{00170}}     \textcolor{keywordtype}{float} \mbox{\hyperlink{structMaterial_a27cc8a0811ea2dc434d7cc4ab9785917}{c\_spec}};}
\DoxyCodeLine{00171 \} \mbox{\hyperlink{structMaterial}{Material}};}
\DoxyCodeLine{00172 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00173}\mbox{\hyperlink{structScene}{00173}} \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00174}\mbox{\hyperlink{structScene_a55369afcc314fe6bef1ecb6e0c322441}{00174}}     \mbox{\hyperlink{structTri__mesh__array}{Tri\_mesh\_array}} \mbox{\hyperlink{structScene_a55369afcc314fe6bef1ecb6e0c322441}{in\_world\_tri\_meshes}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00175}\mbox{\hyperlink{structScene_a231ca7798cdad79a7622874c02d19d7e}{00175}}     \mbox{\hyperlink{structTri__mesh__array}{Tri\_mesh\_array}} \mbox{\hyperlink{structScene_a231ca7798cdad79a7622874c02d19d7e}{projected\_tri\_meshes}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00176}\mbox{\hyperlink{structScene_a4e2a307f1316341bbc09a13a9c9eba0b}{00176}}     \mbox{\hyperlink{structTri__mesh__array}{Tri\_mesh\_array}} \mbox{\hyperlink{structScene_a4e2a307f1316341bbc09a13a9c9eba0b}{original\_tri\_meshes}};}
\DoxyCodeLine{00177 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00178}\mbox{\hyperlink{structScene_a85dae3b3888cc1e8e0737913217f65ce}{00178}}     \mbox{\hyperlink{structQuad__mesh__array}{Quad\_mesh\_array}} \mbox{\hyperlink{structScene_a85dae3b3888cc1e8e0737913217f65ce}{in\_world\_quad\_meshes}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00179}\mbox{\hyperlink{structScene_afe38ffb9bbb032ccf76214207d33566f}{00179}}     \mbox{\hyperlink{structQuad__mesh__array}{Quad\_mesh\_array}} \mbox{\hyperlink{structScene_afe38ffb9bbb032ccf76214207d33566f}{projected\_quad\_meshes}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00180}\mbox{\hyperlink{structScene_a6cdbd482fccb87c941d6967ec8a3e97c}{00180}}     \mbox{\hyperlink{structQuad__mesh__array}{Quad\_mesh\_array}} \mbox{\hyperlink{structScene_a6cdbd482fccb87c941d6967ec8a3e97c}{original\_quad\_meshes}};}
\DoxyCodeLine{00181 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00182}\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{00182}}     \mbox{\hyperlink{structCamera}{Camera}} \mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00183}\mbox{\hyperlink{structScene_a8fd91747dcef00dac514445c8ea8cb9a}{00183}}     \mbox{\hyperlink{structMat2D}{Mat2D}} \mbox{\hyperlink{structScene_a8fd91747dcef00dac514445c8ea8cb9a}{up\_direction}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00184}\mbox{\hyperlink{structScene_a1c025ef379d04de976fcb20e60edddcd}{00184}}     \mbox{\hyperlink{structMat2D}{Mat2D}} \mbox{\hyperlink{structScene_a1c025ef379d04de976fcb20e60edddcd}{proj\_mat}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00185}\mbox{\hyperlink{structScene_a13d59c30261bd4a5d0186f0c2574da91}{00185}}     \mbox{\hyperlink{structMat2D}{Mat2D}} \mbox{\hyperlink{structScene_a13d59c30261bd4a5d0186f0c2574da91}{view\_mat}};}
\DoxyCodeLine{00186 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00187}\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{00187}}     \mbox{\hyperlink{structLight__source}{Light\_source}} \mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}};}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00188}\mbox{\hyperlink{structScene_aeb8fe55dccd003fd1195ebd215a796fe}{00188}}     \mbox{\hyperlink{structMaterial}{Material}} \mbox{\hyperlink{structScene_aeb8fe55dccd003fd1195ebd215a796fe}{material0}};}
\DoxyCodeLine{00189 \} \mbox{\hyperlink{structScene}{Scene}};}
\DoxyCodeLine{00190 }
\DoxyCodeLine{00191 \mbox{\hyperlink{structTri}{Tri}}         \mbox{\hyperlink{Almog__Engine_8h_a79c90a129257a4d5daa335977a47b666}{ae\_tri\_create}}(\mbox{\hyperlink{structPoint}{Point}} p1, \mbox{\hyperlink{structPoint}{Point}} p2, \mbox{\hyperlink{structPoint}{Point}} p3);}
\DoxyCodeLine{00192 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_a4b435e38049391004f3116c7cfedce87}{ae\_tri\_mesh\_create\_copy}}(\mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} *des, \mbox{\hyperlink{structTri}{Tri}} *src\_elements, \textcolor{keywordtype}{size\_t} len);}
\DoxyCodeLine{00193 }
\DoxyCodeLine{00194 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_acd168aacba26b933321f17d3fcd5d700}{ae\_camera\_init}}(\mbox{\hyperlink{structScene}{Scene}} *scene, \textcolor{keywordtype}{int} window\_h, \textcolor{keywordtype}{int} window\_w);}
\DoxyCodeLine{00195 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_aee42720d506b69cc9c5b329e71140412}{ae\_camera\_free}}(\mbox{\hyperlink{structScene}{Scene}} *scene);}
\DoxyCodeLine{00196 \mbox{\hyperlink{structScene}{Scene}}       \mbox{\hyperlink{Almog__Engine_8h_a20905d8a847c8c005e4ea73678a6a8ec}{ae\_scene\_init}}(\textcolor{keywordtype}{int} window\_h, \textcolor{keywordtype}{int} window\_w);}
\DoxyCodeLine{00197 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_ad38d3a6db0cc5704ab3dc39deac988e8}{ae\_scene\_free}}(\mbox{\hyperlink{structScene}{Scene}} *scene);}
\DoxyCodeLine{00198 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_a83b3ed3c99a19cf592c1eebed7e09f9b}{ae\_camera\_reset\_pos}}(\mbox{\hyperlink{structScene}{Scene}} *scene);}
\DoxyCodeLine{00199 }
\DoxyCodeLine{00200 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(\mbox{\hyperlink{structPoint}{Point}} p, \mbox{\hyperlink{structMat2D}{Mat2D}} m);}
\DoxyCodeLine{00201 \mbox{\hyperlink{structPoint}{Point}}       \mbox{\hyperlink{Almog__Engine_8h_af02975c063e1ea909c3bbc94210ea85f}{ae\_mat2D\_to\_point}}(\mbox{\hyperlink{structMat2D}{Mat2D}} m);}
\DoxyCodeLine{00202 }
\DoxyCodeLine{00203 \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}}    \mbox{\hyperlink{Almog__Engine_8h_aef0dc6e58e24d1fad454eedddcbecda3}{ae\_tri\_mesh\_get\_from\_obj\_file}}(\textcolor{keywordtype}{char} *file\_path);}
\DoxyCodeLine{00204 \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}}    \mbox{\hyperlink{Almog__Engine_8h_aae60309114a77dde9494d50c049998e0}{ae\_tri\_mesh\_get\_from\_stl\_file}}(\textcolor{keywordtype}{char} *file\_path);}
\DoxyCodeLine{00205 \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}}    \mbox{\hyperlink{Almog__Engine_8h_af8271eb7d6d313acddd78b4bcf6a8555}{ae\_tri\_mesh\_get\_from\_file}}(\textcolor{keywordtype}{char} *file\_path);}
\DoxyCodeLine{00206 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_abf4e49af66c2e3d0c5d8fba65ce4f2bc}{ae\_tri\_mesh\_appand\_copy}}(\mbox{\hyperlink{structTri__mesh__array}{Tri\_mesh\_array}} *mesh\_array, \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} mesh);}
\DoxyCodeLine{00207 \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}}    \mbox{\hyperlink{Almog__Engine_8h_a4d2ce5dce0415cc4b1cf02c1f6c6bc77}{ae\_tri\_mesh\_get\_from\_quad\_mesh}}(\mbox{\hyperlink{structQuad__mesh}{Quad\_mesh}} q\_mesh);}
\DoxyCodeLine{00208 }
\DoxyCodeLine{00209 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_ad22d3f1e0cac0fc8d19398b0d43dbfc7}{ae\_print\_points}}(\mbox{\hyperlink{structCurve}{Curve}} p);}
\DoxyCodeLine{00210 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_a1e9358707d11584816ff73dd09aa9882}{ae\_print\_tri}}(\mbox{\hyperlink{structTri}{Tri}} tri, \textcolor{keywordtype}{char} *name, \textcolor{keywordtype}{size\_t} padding);}
\DoxyCodeLine{00211 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_a4243299cc15f3c47c38f445a8e74f48e}{ae\_print\_tri\_mesh}}(\mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} mesh, \textcolor{keywordtype}{char} *name, \textcolor{keywordtype}{size\_t} padding);}
\DoxyCodeLine{00212 }
\DoxyCodeLine{00213 \mbox{\hyperlink{structPoint}{Point}}       \mbox{\hyperlink{Almog__Engine_8h_a97027681fd682ebb13f18d00a188a9b1}{ae\_point\_normalize\_xyz}}(\mbox{\hyperlink{structPoint}{Point}} p);}
\DoxyCodeLine{00214 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_a11c1d61181fe9b0d824fb2be51662659}{ae\_tri\_set\_normals}}(\mbox{\hyperlink{structTri}{Tri}} *tri);}
\DoxyCodeLine{00215 \mbox{\hyperlink{structPoint}{Point}}       \mbox{\hyperlink{Almog__Engine_8h_ae88854393111f68a7fcc4977070d981b}{ae\_tri\_get\_average\_normal}}(\mbox{\hyperlink{structTri}{Tri}} tri);}
\DoxyCodeLine{00216 \mbox{\hyperlink{structPoint}{Point}}       \mbox{\hyperlink{Almog__Engine_8h_a3ee60e72e8969b1cf15d333a091f8ae7}{ae\_tri\_get\_average\_point}}(\mbox{\hyperlink{structTri}{Tri}} tri);}
\DoxyCodeLine{00217 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_add210cedd8afbad661cb2afb96c077df}{ae\_tri\_calc\_normal}}(\mbox{\hyperlink{structMat2D}{Mat2D}} normal, \mbox{\hyperlink{structTri}{Tri}} tri);}
\DoxyCodeLine{00218 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_a2b42f501a0c410d33c3c77188b2373d5}{ae\_tri\_mesh\_translate}}(\mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} mesh, \textcolor{keywordtype}{float} x, \textcolor{keywordtype}{float} y, \textcolor{keywordtype}{float} z);}
\DoxyCodeLine{00219 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_a7b0d79ba4b2f6afdbe3c40c5a1a175de}{ae\_tri\_mesh\_rotate\_Euler\_xyz}}(\mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} mesh, \textcolor{keywordtype}{float} phi\_deg, \textcolor{keywordtype}{float} theta\_deg, \textcolor{keywordtype}{float} psi\_deg);}
\DoxyCodeLine{00220 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_a63cfcc7dda05af0fe61b57f012f949d2}{ae\_tri\_mesh\_set\_bounding\_box}}(\mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} mesh, \textcolor{keywordtype}{float} *x\_min, \textcolor{keywordtype}{float} *x\_max, \textcolor{keywordtype}{float} *y\_min, \textcolor{keywordtype}{float} *y\_max, \textcolor{keywordtype}{float} *z\_min, \textcolor{keywordtype}{float} *z\_max);}
\DoxyCodeLine{00221 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_ae970b00a8720bd46cf0743327170b4c2}{ae\_tri\_mesh\_normalize}}(\mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} mesh);}
\DoxyCodeLine{00222 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_ab014e21d442505ee1ca7c910a6307f8a}{ae\_tri\_mesh\_flip\_normals}}(\mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} mesh);}
\DoxyCodeLine{00223 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_aa8b3ea525ba405673473938bf9065c63}{ae\_tri\_mesh\_set\_normals}}(\mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} mesh);}
\DoxyCodeLine{00224 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_ae7bccc35b4caefa9f167e3267813e921}{ae\_quad\_set\_normals}}(\mbox{\hyperlink{structQuad}{Quad}} *quad);}
\DoxyCodeLine{00225 \mbox{\hyperlink{structPoint}{Point}}       \mbox{\hyperlink{Almog__Engine_8h_a13940b94d775b4887b34e03ffff9661e}{ae\_quad\_get\_average\_normal}}(\mbox{\hyperlink{structQuad}{Quad}} quad);}
\DoxyCodeLine{00226 \mbox{\hyperlink{structPoint}{Point}}       \mbox{\hyperlink{Almog__Engine_8h_ad1f69bc7c34ba800623bdc3e693a2bcb}{ae\_quad\_get\_average\_point}}(\mbox{\hyperlink{structQuad}{Quad}} quad);}
\DoxyCodeLine{00227 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_af54cb5c301bedf21f37ed3fdaf7287b5}{ae\_quad\_calc\_normal}}(\mbox{\hyperlink{structMat2D}{Mat2D}} normal, \mbox{\hyperlink{structQuad}{Quad}} quad);}
\DoxyCodeLine{00228 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_aac75dd9d298e655d12249edc154e7591}{ae\_curve\_copy}}(\mbox{\hyperlink{structCurve}{Curve}} *des, \mbox{\hyperlink{structCurve}{Curve}} src);}
\DoxyCodeLine{00229 }
\DoxyCodeLine{00230 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_abbea9d10462f28e6e52352a6c36ffabd}{ae\_tri\_calc\_light\_intensity}}(\mbox{\hyperlink{structTri}{Tri}} *tri, \mbox{\hyperlink{structScene}{Scene}} *scene, \mbox{\hyperlink{Almog__Engine_8h_a3b664376e82e1cd4013e17ea17ac6501}{Lighting\_mode}} lighting\_mode);}
\DoxyCodeLine{00231 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_a36c108042b6ed289b4d0f85f8c5700ee}{ae\_quad\_calc\_light\_intensity}}(\mbox{\hyperlink{structQuad}{Quad}} *quad, \mbox{\hyperlink{structScene}{Scene}} *scene, \mbox{\hyperlink{Almog__Engine_8h_a3b664376e82e1cd4013e17ea17ac6501}{Lighting\_mode}} lighting\_mode);}
\DoxyCodeLine{00232 }
\DoxyCodeLine{00233 \mbox{\hyperlink{structPoint}{Point}}       \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(\mbox{\hyperlink{structMat2D}{Mat2D}} plane\_p, \mbox{\hyperlink{structMat2D}{Mat2D}} plane\_n, \mbox{\hyperlink{structMat2D}{Mat2D}} line\_start, \mbox{\hyperlink{structMat2D}{Mat2D}} line\_end, \textcolor{keywordtype}{float} *t);}
\DoxyCodeLine{00234 \textcolor{keywordtype}{int}         \mbox{\hyperlink{Almog__Engine_8h_a16d1ee56f32a7e62f49bdee310d580c0}{ae\_line\_clip\_with\_plane}}(\mbox{\hyperlink{structPoint}{Point}} start\_in, \mbox{\hyperlink{structPoint}{Point}} end\_in, \mbox{\hyperlink{structMat2D}{Mat2D}} plane\_p, \mbox{\hyperlink{structMat2D}{Mat2D}} plane\_n, \mbox{\hyperlink{structPoint}{Point}} *start\_out, \mbox{\hyperlink{structPoint}{Point}} *end\_out);}
\DoxyCodeLine{00235 \textcolor{keywordtype}{float}       \mbox{\hyperlink{Almog__Engine_8h_addb82974119ee833122b944f3c0c1b71}{ae\_signed\_dist\_point\_and\_plane}}(\mbox{\hyperlink{structPoint}{Point}} p, \mbox{\hyperlink{structMat2D}{Mat2D}} plane\_p, \mbox{\hyperlink{structMat2D}{Mat2D}} plane\_n);}
\DoxyCodeLine{00236 \textcolor{keywordtype}{int}         \mbox{\hyperlink{Almog__Engine_8h_a8c5f2139e3c08f222e1c1bf9ccb4c8b8}{ae\_tri\_clip\_with\_plane}}(\mbox{\hyperlink{structTri}{Tri}} tri\_in, \mbox{\hyperlink{structMat2D}{Mat2D}} plane\_p, \mbox{\hyperlink{structMat2D}{Mat2D}} plane\_n, \mbox{\hyperlink{structTri}{Tri}} *tri\_out1, \mbox{\hyperlink{structTri}{Tri}} *tri\_out2);}
\DoxyCodeLine{00237 \textcolor{keywordtype}{int}         \mbox{\hyperlink{Almog__Engine_8h_aff9453f6f1fde30f7752ac03fd49aebb}{ae\_quad\_clip\_with\_plane}}(\mbox{\hyperlink{structQuad}{Quad}} quad\_in, \mbox{\hyperlink{structMat2D}{Mat2D}} plane\_p, \mbox{\hyperlink{structMat2D}{Mat2D}} plane\_n, \mbox{\hyperlink{structQuad}{Quad}} *quad\_out1, \mbox{\hyperlink{structQuad}{Quad}} *quad\_out2);}
\DoxyCodeLine{00238 }
\DoxyCodeLine{00239 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_a1b7def01c3bfc991682cdd645b806672}{ae\_projection\_mat\_set}}(\mbox{\hyperlink{structMat2D}{Mat2D}} proj\_mat,\textcolor{keywordtype}{float} aspect\_ratio, \textcolor{keywordtype}{float} FOV\_deg, \textcolor{keywordtype}{float} z\_near, \textcolor{keywordtype}{float} z\_far);}
\DoxyCodeLine{00240 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_a973977dd2f135de3e1091cf8bbd0f7ff}{ae\_view\_mat\_set}}(\mbox{\hyperlink{structMat2D}{Mat2D}} view\_mat, \mbox{\hyperlink{structCamera}{Camera}} camera, \mbox{\hyperlink{structMat2D}{Mat2D}} up);}
\DoxyCodeLine{00241 \mbox{\hyperlink{structPoint}{Point}}       \mbox{\hyperlink{Almog__Engine_8h_a45d3a5d37afa1cc50d2920d8684a5efc}{ae\_point\_project\_world2screen}}(\mbox{\hyperlink{structMat2D}{Mat2D}} view\_mat, \mbox{\hyperlink{structMat2D}{Mat2D}} proj\_mat, \mbox{\hyperlink{structPoint}{Point}} src, \textcolor{keywordtype}{int} window\_w, \textcolor{keywordtype}{int} window\_h);}
\DoxyCodeLine{00242 \mbox{\hyperlink{structPoint}{Point}}       \mbox{\hyperlink{Almog__Engine_8h_ad43833aa381862dba7a1e91e81260103}{ae\_point\_project\_world2view}}(\mbox{\hyperlink{structMat2D}{Mat2D}} view\_mat, \mbox{\hyperlink{structPoint}{Point}} src);}
\DoxyCodeLine{00243 \mbox{\hyperlink{structPoint}{Point}}       \mbox{\hyperlink{Almog__Engine_8h_ae10d1bf00c014c797936ebea24b4e81a}{ae\_point\_project\_view2screen}}(\mbox{\hyperlink{structMat2D}{Mat2D}} proj\_mat, \mbox{\hyperlink{structPoint}{Point}} src, \textcolor{keywordtype}{int} window\_w, \textcolor{keywordtype}{int} window\_h);}
\DoxyCodeLine{00244 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_ae7ed56cd28c920fcd190a3d8ff3e0283}{ae\_line\_project\_world2screen}}(\mbox{\hyperlink{structMat2D}{Mat2D}} view\_mat, \mbox{\hyperlink{structMat2D}{Mat2D}} proj\_mat, \mbox{\hyperlink{structPoint}{Point}} start\_src, \mbox{\hyperlink{structPoint}{Point}} end\_src, \textcolor{keywordtype}{int} window\_w, \textcolor{keywordtype}{int} window\_h, \mbox{\hyperlink{structPoint}{Point}} *start\_des, \mbox{\hyperlink{structPoint}{Point}} *end\_des, \mbox{\hyperlink{structScene}{Scene}} *scene);}
\DoxyCodeLine{00245 \mbox{\hyperlink{structTri}{Tri}}         \mbox{\hyperlink{Almog__Engine_8h_a1c1797fd06019133cacb5329fa1fe24e}{ae\_tri\_transform\_to\_view}}(\mbox{\hyperlink{structMat2D}{Mat2D}} view\_mat, \mbox{\hyperlink{structTri}{Tri}} tri);}
\DoxyCodeLine{00246 \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}}    \mbox{\hyperlink{Almog__Engine_8h_a58de2ce54cb320d8cade6a8de95d89d3}{ae\_tri\_project\_world2screen}}(\mbox{\hyperlink{structMat2D}{Mat2D}} proj\_mat, \mbox{\hyperlink{structMat2D}{Mat2D}} view\_mat, \mbox{\hyperlink{structTri}{Tri}} tri, \textcolor{keywordtype}{int} window\_w, \textcolor{keywordtype}{int} window\_h, \mbox{\hyperlink{structScene}{Scene}} *scene, \mbox{\hyperlink{Almog__Engine_8h_a3b664376e82e1cd4013e17ea17ac6501}{Lighting\_mode}} lighting\_mode);}
\DoxyCodeLine{00247 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_ad67eee66e34c55818406703f2a13ccd5}{ae\_tri\_mesh\_project\_world2screen}}(\mbox{\hyperlink{structMat2D}{Mat2D}} proj\_mat, \mbox{\hyperlink{structMat2D}{Mat2D}} view\_mat, \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} *des, \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} src, \textcolor{keywordtype}{int} window\_w, \textcolor{keywordtype}{int} window\_h, \mbox{\hyperlink{structScene}{Scene}} *scene, \mbox{\hyperlink{Almog__Engine_8h_a3b664376e82e1cd4013e17ea17ac6501}{Lighting\_mode}} lighting\_mode);}
\DoxyCodeLine{00248 \mbox{\hyperlink{structQuad}{Quad}}        \mbox{\hyperlink{Almog__Engine_8h_a318de3677b5db4ffd03ae2b73a998e52}{ae\_quad\_transform\_to\_view}}(\mbox{\hyperlink{structMat2D}{Mat2D}} view\_mat, \mbox{\hyperlink{structQuad}{Quad}} quad);}
\DoxyCodeLine{00249 \mbox{\hyperlink{structQuad__mesh}{Quad\_mesh}}   \mbox{\hyperlink{Almog__Engine_8h_a328b8b2bb3e397b7d36e72669671868e}{ae\_quad\_project\_world2screen}}(\mbox{\hyperlink{structMat2D}{Mat2D}} proj\_mat, \mbox{\hyperlink{structMat2D}{Mat2D}} view\_mat, \mbox{\hyperlink{structQuad}{Quad}} quad, \textcolor{keywordtype}{int} window\_w, \textcolor{keywordtype}{int} window\_h, \mbox{\hyperlink{structScene}{Scene}} *scene, \mbox{\hyperlink{Almog__Engine_8h_a3b664376e82e1cd4013e17ea17ac6501}{Lighting\_mode}} lighting\_mode);}
\DoxyCodeLine{00250 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_ad7415d7fdf579c8f89a5279953c1cc0f}{ae\_quad\_mesh\_project\_world2screen}}(\mbox{\hyperlink{structMat2D}{Mat2D}} proj\_mat, \mbox{\hyperlink{structMat2D}{Mat2D}} view\_mat, \mbox{\hyperlink{structQuad__mesh}{Quad\_mesh}} *des, \mbox{\hyperlink{structQuad__mesh}{Quad\_mesh}} src, \textcolor{keywordtype}{int} window\_w, \textcolor{keywordtype}{int} window\_h, \mbox{\hyperlink{structScene}{Scene}} *scene, \mbox{\hyperlink{Almog__Engine_8h_a3b664376e82e1cd4013e17ea17ac6501}{Lighting\_mode}} lighting\_mode);}
\DoxyCodeLine{00251 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_aaa5131f30f9d6f1844a4422c548b4295}{ae\_curve\_project\_world2screen}}(\mbox{\hyperlink{structMat2D}{Mat2D}} proj\_mat, \mbox{\hyperlink{structMat2D}{Mat2D}} view\_mat, \mbox{\hyperlink{structCurve}{Curve}} *des, \mbox{\hyperlink{structCurve}{Curve}} src, \textcolor{keywordtype}{int} window\_w, \textcolor{keywordtype}{int} window\_h, \mbox{\hyperlink{structScene}{Scene}} *scene);}
\DoxyCodeLine{00252 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_af7b851c934b815c8b57bac30b0b1cdae}{ae\_curve\_ada\_project\_world2screen}}(\mbox{\hyperlink{structMat2D}{Mat2D}} proj\_mat, \mbox{\hyperlink{structMat2D}{Mat2D}} view\_mat, \mbox{\hyperlink{structCurve__ada}{Curve\_ada}} *des, \mbox{\hyperlink{structCurve__ada}{Curve\_ada}} src, \textcolor{keywordtype}{int} window\_w, \textcolor{keywordtype}{int} window\_h, \mbox{\hyperlink{structScene}{Scene}} *scene);}
\DoxyCodeLine{00253 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_a01d0c3758b20d64c1cbbb2a73a1cdd6c}{ae\_grid\_project\_world2screen}}(\mbox{\hyperlink{structMat2D}{Mat2D}} proj\_mat, \mbox{\hyperlink{structMat2D}{Mat2D}} view\_mat, \mbox{\hyperlink{structGrid}{Grid}} des, \mbox{\hyperlink{structGrid}{Grid}} src, \textcolor{keywordtype}{int} window\_w, \textcolor{keywordtype}{int} window\_h, \mbox{\hyperlink{structScene}{Scene}} *scene);}
\DoxyCodeLine{00254 }
\DoxyCodeLine{00255 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_a4140d91e2951f6867592ed4dd685b5b3}{ae\_tri\_swap}}(\mbox{\hyperlink{structTri}{Tri}} *v, \textcolor{keywordtype}{int} i, \textcolor{keywordtype}{int} j);}
\DoxyCodeLine{00256 \textcolor{keywordtype}{bool}        \mbox{\hyperlink{Almog__Engine_8h_ac07fff7a48f2dc40046df5f8794d61d2}{ae\_tri\_compare}}(\mbox{\hyperlink{structTri}{Tri}} t1, \mbox{\hyperlink{structTri}{Tri}} t2);}
\DoxyCodeLine{00257 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_a6163eec1246f36c8f1f16f40c436bb14}{ae\_tri\_qsort}}(\mbox{\hyperlink{structTri}{Tri}} *v, \textcolor{keywordtype}{int} left, \textcolor{keywordtype}{int} right);}
\DoxyCodeLine{00258 \textcolor{keywordtype}{double}      \mbox{\hyperlink{Almog__Engine_8h_adfbb375cedddf064ca503a0520c66829}{ae\_linear\_map}}(\textcolor{keywordtype}{double} s, \textcolor{keywordtype}{double} min\_in, \textcolor{keywordtype}{double} max\_in, \textcolor{keywordtype}{double} min\_out, \textcolor{keywordtype}{double} max\_out);}
\DoxyCodeLine{00259 \textcolor{keywordtype}{void}        \mbox{\hyperlink{Almog__Engine_8h_aa9ee39b8a678005ae0d531d9d1356a30}{ae\_z\_buffer\_copy\_to\_screen}}(\mbox{\hyperlink{structMat2D__uint32}{Mat2D\_uint32}} screen\_mat, \mbox{\hyperlink{structMat2D}{Mat2D}} inv\_z\_buffer);}
\DoxyCodeLine{00260 }
\DoxyCodeLine{00261 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* ALMOG\_ENGINE\_H\_ */}\textcolor{preprocessor}{}}
\DoxyCodeLine{00262 }
\DoxyCodeLine{00263 \textcolor{preprocessor}{\#ifdef ALMOG\_ENGINE\_IMPLEMENTATION}}
\DoxyCodeLine{00264 \textcolor{preprocessor}{\#undef ALMOG\_ENGINE\_IMPLEMENTATION}}
\DoxyCodeLine{00265 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00266}\mbox{\hyperlink{Almog__Engine_8h_a899e6cd6738dea0e52e5bbcb017a257e}{00266}} \textcolor{preprocessor}{\#define AE\_PRINT\_TRI(tri) ae\_print\_tri(tri, \#tri, 0)}}
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00267}\mbox{\hyperlink{Almog__Engine_8h_a7b30a109359f4a6a1e27161d8a2b8dd6}{00267}} \textcolor{preprocessor}{\#define AE\_PRINT\_MESH(mesh) ae\_print\_tri\_mesh(mesh, \#mesh, 0)}}
\DoxyCodeLine{00268 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00278}\mbox{\hyperlink{Almog__Engine_8h_a79c90a129257a4d5daa335977a47b666}{00278}} \mbox{\hyperlink{structTri}{Tri}} \mbox{\hyperlink{Almog__Engine_8h_a79c90a129257a4d5daa335977a47b666}{ae\_tri\_create}}(\mbox{\hyperlink{structPoint}{Point}} p1, \mbox{\hyperlink{structPoint}{Point}} p2, \mbox{\hyperlink{structPoint}{Point}} p3)}
\DoxyCodeLine{00279 \{}
\DoxyCodeLine{00280     \mbox{\hyperlink{structTri}{Tri}} tri;}
\DoxyCodeLine{00281 }
\DoxyCodeLine{00282     tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0] = p1;}
\DoxyCodeLine{00283     tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[1] = p2;}
\DoxyCodeLine{00284     tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[2] = p3;}
\DoxyCodeLine{00285 }
\DoxyCodeLine{00286     \textcolor{keywordflow}{return} tri;}
\DoxyCodeLine{00287 \}}
\DoxyCodeLine{00288 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00299}\mbox{\hyperlink{Almog__Engine_8h_a4b435e38049391004f3116c7cfedce87}{00299}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_a4b435e38049391004f3116c7cfedce87}{ae\_tri\_mesh\_create\_copy}}(\mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} *des, \mbox{\hyperlink{structTri}{Tri}} *src\_elements, \textcolor{keywordtype}{size\_t} len)}
\DoxyCodeLine{00300 \{}
\DoxyCodeLine{00301     \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} temp\_des = *des;}
\DoxyCodeLine{00302     temp\_des.\mbox{\hyperlink{structTri__mesh_a0fb2a2069a57bd77bac6a91a3b2e4ffb}{length}} = 0;}
\DoxyCodeLine{00303     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < len; i++) \{}
\DoxyCodeLine{00304         \mbox{\hyperlink{Almog__Dynamic__Array_8h_a61680400e419e2d55c2e3cb9fe96dad7}{ada\_appand}}(\mbox{\hyperlink{structTri}{Tri}}, temp\_des, src\_elements[i]);}
\DoxyCodeLine{00305     \}}
\DoxyCodeLine{00306     *des = temp\_des;}
\DoxyCodeLine{00307 \}}
\DoxyCodeLine{00308 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00320}\mbox{\hyperlink{Almog__Engine_8h_acd168aacba26b933321f17d3fcd5d700}{00320}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_acd168aacba26b933321f17d3fcd5d700}{ae\_camera\_init}}(\mbox{\hyperlink{structScene}{Scene}} *scene, \textcolor{keywordtype}{int} window\_h, \textcolor{keywordtype}{int} window\_w)}
\DoxyCodeLine{00321 \{}
\DoxyCodeLine{00322     scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a14ebc5ce9490721428eaf1ca023322f9}{z\_near}}       = 0.1;}
\DoxyCodeLine{00323     scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a49a09d8504a193843ae9496397a5a883}{z\_far}}        = 1000;}
\DoxyCodeLine{00324     scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a3d5ecfc703004c3d4e1098c0e9575e35}{fov\_deg}}      = 60;}
\DoxyCodeLine{00325     scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a5742c2c47c7afc5a6d49b6e5759db3cd}{aspect\_ratio}} = (float)window\_h / (\textcolor{keywordtype}{float})window\_w;}
\DoxyCodeLine{00326 }
\DoxyCodeLine{00327     scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a077bf8e57757a839d13cf995c4e05ab5}{init\_position}} = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{00328     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a077bf8e57757a839d13cf995c4e05ab5}{init\_position}}, 0);}
\DoxyCodeLine{00329     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a077bf8e57757a839d13cf995c4e05ab5}{init\_position}}, 2, 0) = -\/4;}
\DoxyCodeLine{00330 }
\DoxyCodeLine{00331     scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_adc5641764d588d64baeb2c9a5773d2e0}{current\_position}} = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{00332     \mbox{\hyperlink{Matrix2D_8h_a5349f2b49eb72fa91c4824b0d08f4a83}{mat2D\_copy}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_adc5641764d588d64baeb2c9a5773d2e0}{current\_position}}, scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a077bf8e57757a839d13cf995c4e05ab5}{init\_position}});}
\DoxyCodeLine{00333 }
\DoxyCodeLine{00334     scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_aca1b0a8e748059f79a00ab1a0c775624}{offset\_position}} = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{00335     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_aca1b0a8e748059f79a00ab1a0c775624}{offset\_position}}, 0);}
\DoxyCodeLine{00336 }
\DoxyCodeLine{00337     scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a5904daa05edae9d8ed86becf7b3e4059}{roll\_offset\_deg}} = 0;}
\DoxyCodeLine{00338     scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_ac744a4909bde4c4f58cc7b6918c8c7e3}{pitch\_offset\_deg}} = 0;}
\DoxyCodeLine{00339     scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_aff86483478f1228e641b98a9ddd13774}{yaw\_offset\_deg}} = 0;}
\DoxyCodeLine{00340 }
\DoxyCodeLine{00341     scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a1041adaac6e1d8aacd1d02319adeb3a1}{direction}} = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{00342     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a1041adaac6e1d8aacd1d02319adeb3a1}{direction}}, 0);}
\DoxyCodeLine{00343     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a1041adaac6e1d8aacd1d02319adeb3a1}{direction}}, 2, 0) = 1;}
\DoxyCodeLine{00344 }
\DoxyCodeLine{00345     scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_abb8a2eb94f9ef97bc23fcc3c3f220969}{camera\_x}} = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{00346     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_abb8a2eb94f9ef97bc23fcc3c3f220969}{camera\_x}}, 0);}
\DoxyCodeLine{00347     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_abb8a2eb94f9ef97bc23fcc3c3f220969}{camera\_x}}, 0, 0) = 1;}
\DoxyCodeLine{00348     }
\DoxyCodeLine{00349     scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a16ce40de4ecd440a4ebe700e6cb97f59}{camera\_y}} = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{00350     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a16ce40de4ecd440a4ebe700e6cb97f59}{camera\_y}}, 0);}
\DoxyCodeLine{00351     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a16ce40de4ecd440a4ebe700e6cb97f59}{camera\_y}}, 1, 0) = 1;}
\DoxyCodeLine{00352 }
\DoxyCodeLine{00353     scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a9c279b07c32c1a4122dcf88fa5075bdc}{camera\_z}} = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{00354     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a9c279b07c32c1a4122dcf88fa5075bdc}{camera\_z}}, 0);}
\DoxyCodeLine{00355     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a9c279b07c32c1a4122dcf88fa5075bdc}{camera\_z}}, 2, 0) = 1;}
\DoxyCodeLine{00356 \}}
\DoxyCodeLine{00357 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00366}\mbox{\hyperlink{Almog__Engine_8h_aee42720d506b69cc9c5b329e71140412}{00366}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_aee42720d506b69cc9c5b329e71140412}{ae\_camera\_free}}(\mbox{\hyperlink{structScene}{Scene}} *scene)}
\DoxyCodeLine{00367 \{}
\DoxyCodeLine{00368     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a077bf8e57757a839d13cf995c4e05ab5}{init\_position}});}
\DoxyCodeLine{00369     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_adc5641764d588d64baeb2c9a5773d2e0}{current\_position}});}
\DoxyCodeLine{00370     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_aca1b0a8e748059f79a00ab1a0c775624}{offset\_position}});}
\DoxyCodeLine{00371     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a1041adaac6e1d8aacd1d02319adeb3a1}{direction}});}
\DoxyCodeLine{00372     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_abb8a2eb94f9ef97bc23fcc3c3f220969}{camera\_x}});}
\DoxyCodeLine{00373     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a16ce40de4ecd440a4ebe700e6cb97f59}{camera\_y}});}
\DoxyCodeLine{00374     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a9c279b07c32c1a4122dcf88fa5075bdc}{camera\_z}});}
\DoxyCodeLine{00375 \}}
\DoxyCodeLine{00376 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00388}\mbox{\hyperlink{Almog__Engine_8h_a20905d8a847c8c005e4ea73678a6a8ec}{00388}} \mbox{\hyperlink{structScene}{Scene}} \mbox{\hyperlink{Almog__Engine_8h_a20905d8a847c8c005e4ea73678a6a8ec}{ae\_scene\_init}}(\textcolor{keywordtype}{int} window\_h, \textcolor{keywordtype}{int} window\_w)}
\DoxyCodeLine{00389 \{}
\DoxyCodeLine{00390     \mbox{\hyperlink{structScene}{Scene}} scene = \{0\};}
\DoxyCodeLine{00391     \mbox{\hyperlink{Almog__Engine_8h_acd168aacba26b933321f17d3fcd5d700}{ae\_camera\_init}}(\&(scene), window\_h, window\_w);}
\DoxyCodeLine{00392 }
\DoxyCodeLine{00393     scene.\mbox{\hyperlink{structScene_a8fd91747dcef00dac514445c8ea8cb9a}{up\_direction}} = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{00394     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(scene.\mbox{\hyperlink{structScene_a8fd91747dcef00dac514445c8ea8cb9a}{up\_direction}}, 0);}
\DoxyCodeLine{00395     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(scene.\mbox{\hyperlink{structScene_a8fd91747dcef00dac514445c8ea8cb9a}{up\_direction}}, 1, 0) = 1;}
\DoxyCodeLine{00396 }
\DoxyCodeLine{00397     scene.\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}}.\mbox{\hyperlink{structLight__source_ac24d933710b710d1ed6d45b4696e38c8}{light\_direction\_or\_pos}}.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = 0.5;}
\DoxyCodeLine{00398     scene.\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}}.\mbox{\hyperlink{structLight__source_ac24d933710b710d1ed6d45b4696e38c8}{light\_direction\_or\_pos}}.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = 1;}
\DoxyCodeLine{00399     scene.\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}}.\mbox{\hyperlink{structLight__source_ac24d933710b710d1ed6d45b4696e38c8}{light\_direction\_or\_pos}}.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} = 1;}
\DoxyCodeLine{00400     scene.\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}}.\mbox{\hyperlink{structLight__source_ac24d933710b710d1ed6d45b4696e38c8}{light\_direction\_or\_pos}}.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} = 0;}
\DoxyCodeLine{00401     scene.\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}}.\mbox{\hyperlink{structLight__source_ac24d933710b710d1ed6d45b4696e38c8}{light\_direction\_or\_pos}} = \mbox{\hyperlink{Almog__Engine_8h_a97027681fd682ebb13f18d00a188a9b1}{ae\_point\_normalize\_xyz}}(scene.\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}}.\mbox{\hyperlink{structLight__source_ac24d933710b710d1ed6d45b4696e38c8}{light\_direction\_or\_pos}});}
\DoxyCodeLine{00402     scene.\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}}.\mbox{\hyperlink{structLight__source_a35f7bef9375ad1c6b3d2544c53b43493}{light\_intensity}} = 1;}
\DoxyCodeLine{00403 }
\DoxyCodeLine{00404     scene.\mbox{\hyperlink{structScene_aeb8fe55dccd003fd1195ebd215a796fe}{material0}}.\mbox{\hyperlink{structMaterial_a5e9c413095df430758f6b31c9bfb60e1}{specular\_power\_alpha}} = 1;}
\DoxyCodeLine{00405     scene.\mbox{\hyperlink{structScene_aeb8fe55dccd003fd1195ebd215a796fe}{material0}}.\mbox{\hyperlink{structMaterial_a198bf89cad562cca2c4c7015f9f81e86}{c\_ambi}} = 0.2;}
\DoxyCodeLine{00406     scene.\mbox{\hyperlink{structScene_aeb8fe55dccd003fd1195ebd215a796fe}{material0}}.\mbox{\hyperlink{structMaterial_a380c5e541b1fe955a6bb96d35293cff4}{c\_diff}} = 0.6;}
\DoxyCodeLine{00407     scene.\mbox{\hyperlink{structScene_aeb8fe55dccd003fd1195ebd215a796fe}{material0}}.\mbox{\hyperlink{structMaterial_a27cc8a0811ea2dc434d7cc4ab9785917}{c\_spec}} = 0.2;}
\DoxyCodeLine{00408 }
\DoxyCodeLine{00409     scene.\mbox{\hyperlink{structScene_a1c025ef379d04de976fcb20e60edddcd}{proj\_mat}} = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(4, 4);}
\DoxyCodeLine{00410     \mbox{\hyperlink{Almog__Engine_8h_a1b7def01c3bfc991682cdd645b806672}{ae\_projection\_mat\_set}}(scene.\mbox{\hyperlink{structScene_a1c025ef379d04de976fcb20e60edddcd}{proj\_mat}}, scene.\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a5742c2c47c7afc5a6d49b6e5759db3cd}{aspect\_ratio}}, scene.\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a3d5ecfc703004c3d4e1098c0e9575e35}{fov\_deg}}, scene.\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a14ebc5ce9490721428eaf1ca023322f9}{z\_near}}, scene.\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a49a09d8504a193843ae9496397a5a883}{z\_far}});}
\DoxyCodeLine{00411 }
\DoxyCodeLine{00412     scene.\mbox{\hyperlink{structScene_a13d59c30261bd4a5d0186f0c2574da91}{view\_mat}} = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(4, 4);}
\DoxyCodeLine{00413     \mbox{\hyperlink{Almog__Engine_8h_a973977dd2f135de3e1091cf8bbd0f7ff}{ae\_view\_mat\_set}}(scene.\mbox{\hyperlink{structScene_a13d59c30261bd4a5d0186f0c2574da91}{view\_mat}}, scene.\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}, scene.\mbox{\hyperlink{structScene_a8fd91747dcef00dac514445c8ea8cb9a}{up\_direction}});}
\DoxyCodeLine{00414 }
\DoxyCodeLine{00415     \textcolor{keywordflow}{return} scene;}
\DoxyCodeLine{00416 \}}
\DoxyCodeLine{00417 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00429}\mbox{\hyperlink{Almog__Engine_8h_ad38d3a6db0cc5704ab3dc39deac988e8}{00429}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_ad38d3a6db0cc5704ab3dc39deac988e8}{ae\_scene\_free}}(\mbox{\hyperlink{structScene}{Scene}} *scene)}
\DoxyCodeLine{00430 \{}
\DoxyCodeLine{00431     \mbox{\hyperlink{Almog__Engine_8h_aee42720d506b69cc9c5b329e71140412}{ae\_camera\_free}}(scene);}
\DoxyCodeLine{00432     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(scene-\/>\mbox{\hyperlink{structScene_a8fd91747dcef00dac514445c8ea8cb9a}{up\_direction}});}
\DoxyCodeLine{00433     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(scene-\/>\mbox{\hyperlink{structScene_a1c025ef379d04de976fcb20e60edddcd}{proj\_mat}});}
\DoxyCodeLine{00434     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(scene-\/>\mbox{\hyperlink{structScene_a13d59c30261bd4a5d0186f0c2574da91}{view\_mat}});}
\DoxyCodeLine{00435 }
\DoxyCodeLine{00436     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < scene-\/>\mbox{\hyperlink{structScene_a55369afcc314fe6bef1ecb6e0c322441}{in\_world\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_acb45e304ded2b6eddf5eb3dab3e66609}{length}}; i++) \{}
\DoxyCodeLine{00437         free(scene-\/>\mbox{\hyperlink{structScene_a55369afcc314fe6bef1ecb6e0c322441}{in\_world\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_afe536b7ba3c01eee05be25677d1eb692}{elements}}[i].\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}});}
\DoxyCodeLine{00438     \}}
\DoxyCodeLine{00439     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < scene-\/>\mbox{\hyperlink{structScene_a231ca7798cdad79a7622874c02d19d7e}{projected\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_acb45e304ded2b6eddf5eb3dab3e66609}{length}}; i++) \{}
\DoxyCodeLine{00440         free(scene-\/>\mbox{\hyperlink{structScene_a231ca7798cdad79a7622874c02d19d7e}{projected\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_afe536b7ba3c01eee05be25677d1eb692}{elements}}[i].\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}});}
\DoxyCodeLine{00441     \}}
\DoxyCodeLine{00442     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < scene-\/>\mbox{\hyperlink{structScene_a4e2a307f1316341bbc09a13a9c9eba0b}{original\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_acb45e304ded2b6eddf5eb3dab3e66609}{length}}; i++) \{}
\DoxyCodeLine{00443         free(scene-\/>\mbox{\hyperlink{structScene_a4e2a307f1316341bbc09a13a9c9eba0b}{original\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_afe536b7ba3c01eee05be25677d1eb692}{elements}}[i].\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}});}
\DoxyCodeLine{00444     \}}
\DoxyCodeLine{00445     \textcolor{keywordflow}{if} (scene-\/>\mbox{\hyperlink{structScene_a55369afcc314fe6bef1ecb6e0c322441}{in\_world\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_afe536b7ba3c01eee05be25677d1eb692}{elements}}) free(scene-\/>\mbox{\hyperlink{structScene_a55369afcc314fe6bef1ecb6e0c322441}{in\_world\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_afe536b7ba3c01eee05be25677d1eb692}{elements}});}
\DoxyCodeLine{00446     \textcolor{keywordflow}{if} (scene-\/>\mbox{\hyperlink{structScene_a231ca7798cdad79a7622874c02d19d7e}{projected\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_afe536b7ba3c01eee05be25677d1eb692}{elements}}) free(scene-\/>\mbox{\hyperlink{structScene_a231ca7798cdad79a7622874c02d19d7e}{projected\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_afe536b7ba3c01eee05be25677d1eb692}{elements}});}
\DoxyCodeLine{00447     \textcolor{keywordflow}{if} (scene-\/>\mbox{\hyperlink{structScene_a4e2a307f1316341bbc09a13a9c9eba0b}{original\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_afe536b7ba3c01eee05be25677d1eb692}{elements}}) free(scene-\/>\mbox{\hyperlink{structScene_a4e2a307f1316341bbc09a13a9c9eba0b}{original\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_afe536b7ba3c01eee05be25677d1eb692}{elements}});}
\DoxyCodeLine{00448 }
\DoxyCodeLine{00449     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < scene-\/>\mbox{\hyperlink{structScene_a85dae3b3888cc1e8e0737913217f65ce}{in\_world\_quad\_meshes}}.\mbox{\hyperlink{structQuad__mesh__array_a74a7a2dc126bb70072ea18412f28b36a}{length}}; i++) \{}
\DoxyCodeLine{00450         free(scene-\/>\mbox{\hyperlink{structScene_a85dae3b3888cc1e8e0737913217f65ce}{in\_world\_quad\_meshes}}.\mbox{\hyperlink{structQuad__mesh__array_a79fc4899d27a540aa2e034ff3713fbf9}{elements}}[i].\mbox{\hyperlink{structQuad__mesh_a834716c539e7ceaa66821b4f3de7744d}{elements}});}
\DoxyCodeLine{00451     \}}
\DoxyCodeLine{00452     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < scene-\/>\mbox{\hyperlink{structScene_afe38ffb9bbb032ccf76214207d33566f}{projected\_quad\_meshes}}.\mbox{\hyperlink{structQuad__mesh__array_a74a7a2dc126bb70072ea18412f28b36a}{length}}; i++) \{}
\DoxyCodeLine{00453         free(scene-\/>\mbox{\hyperlink{structScene_afe38ffb9bbb032ccf76214207d33566f}{projected\_quad\_meshes}}.\mbox{\hyperlink{structQuad__mesh__array_a79fc4899d27a540aa2e034ff3713fbf9}{elements}}[i].\mbox{\hyperlink{structQuad__mesh_a834716c539e7ceaa66821b4f3de7744d}{elements}});}
\DoxyCodeLine{00454     \}}
\DoxyCodeLine{00455     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < scene-\/>\mbox{\hyperlink{structScene_a6cdbd482fccb87c941d6967ec8a3e97c}{original\_quad\_meshes}}.\mbox{\hyperlink{structQuad__mesh__array_a74a7a2dc126bb70072ea18412f28b36a}{length}}; i++) \{}
\DoxyCodeLine{00456         free(scene-\/>\mbox{\hyperlink{structScene_a6cdbd482fccb87c941d6967ec8a3e97c}{original\_quad\_meshes}}.\mbox{\hyperlink{structQuad__mesh__array_a79fc4899d27a540aa2e034ff3713fbf9}{elements}}[i].\mbox{\hyperlink{structQuad__mesh_a834716c539e7ceaa66821b4f3de7744d}{elements}});}
\DoxyCodeLine{00457     \}}
\DoxyCodeLine{00458     \textcolor{keywordflow}{if} (scene-\/>\mbox{\hyperlink{structScene_a85dae3b3888cc1e8e0737913217f65ce}{in\_world\_quad\_meshes}}.\mbox{\hyperlink{structQuad__mesh__array_a79fc4899d27a540aa2e034ff3713fbf9}{elements}}) free(scene-\/>\mbox{\hyperlink{structScene_a85dae3b3888cc1e8e0737913217f65ce}{in\_world\_quad\_meshes}}.\mbox{\hyperlink{structQuad__mesh__array_a79fc4899d27a540aa2e034ff3713fbf9}{elements}});}
\DoxyCodeLine{00459     \textcolor{keywordflow}{if} (scene-\/>\mbox{\hyperlink{structScene_afe38ffb9bbb032ccf76214207d33566f}{projected\_quad\_meshes}}.\mbox{\hyperlink{structQuad__mesh__array_a79fc4899d27a540aa2e034ff3713fbf9}{elements}}) free(scene-\/>\mbox{\hyperlink{structScene_afe38ffb9bbb032ccf76214207d33566f}{projected\_quad\_meshes}}.\mbox{\hyperlink{structQuad__mesh__array_a79fc4899d27a540aa2e034ff3713fbf9}{elements}});}
\DoxyCodeLine{00460     \textcolor{keywordflow}{if} (scene-\/>\mbox{\hyperlink{structScene_a6cdbd482fccb87c941d6967ec8a3e97c}{original\_quad\_meshes}}.\mbox{\hyperlink{structQuad__mesh__array_a79fc4899d27a540aa2e034ff3713fbf9}{elements}}) free(scene-\/>\mbox{\hyperlink{structScene_a6cdbd482fccb87c941d6967ec8a3e97c}{original\_quad\_meshes}}.\mbox{\hyperlink{structQuad__mesh__array_a79fc4899d27a540aa2e034ff3713fbf9}{elements}});}
\DoxyCodeLine{00461 \}}
\DoxyCodeLine{00462 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00472}\mbox{\hyperlink{Almog__Engine_8h_a83b3ed3c99a19cf592c1eebed7e09f9b}{00472}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_a83b3ed3c99a19cf592c1eebed7e09f9b}{ae\_camera\_reset\_pos}}(\mbox{\hyperlink{structScene}{Scene}} *scene)}
\DoxyCodeLine{00473 \{}
\DoxyCodeLine{00474     scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a5904daa05edae9d8ed86becf7b3e4059}{roll\_offset\_deg}} = 0;}
\DoxyCodeLine{00475     scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_ac744a4909bde4c4f58cc7b6918c8c7e3}{pitch\_offset\_deg}} = 0;}
\DoxyCodeLine{00476     scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_aff86483478f1228e641b98a9ddd13774}{yaw\_offset\_deg}} = 0;}
\DoxyCodeLine{00477 }
\DoxyCodeLine{00478     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_aca1b0a8e748059f79a00ab1a0c775624}{offset\_position}}, 0);}
\DoxyCodeLine{00479 }
\DoxyCodeLine{00480     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_abb8a2eb94f9ef97bc23fcc3c3f220969}{camera\_x}}, 0);}
\DoxyCodeLine{00481     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_abb8a2eb94f9ef97bc23fcc3c3f220969}{camera\_x}}, 0, 0) = 1;}
\DoxyCodeLine{00482     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a16ce40de4ecd440a4ebe700e6cb97f59}{camera\_y}}, 0);}
\DoxyCodeLine{00483     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a16ce40de4ecd440a4ebe700e6cb97f59}{camera\_y}}, 1, 0) = 1;}
\DoxyCodeLine{00484     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a9c279b07c32c1a4122dcf88fa5075bdc}{camera\_z}}, 0);}
\DoxyCodeLine{00485     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a9c279b07c32c1a4122dcf88fa5075bdc}{camera\_z}}, 2, 0) = 1;}
\DoxyCodeLine{00486 }
\DoxyCodeLine{00487     \mbox{\hyperlink{Matrix2D_8h_a5349f2b49eb72fa91c4824b0d08f4a83}{mat2D\_copy}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_adc5641764d588d64baeb2c9a5773d2e0}{current\_position}}, scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a077bf8e57757a839d13cf995c4e05ab5}{init\_position}});}
\DoxyCodeLine{00488 \}}
\DoxyCodeLine{00489 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00498}\mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{00498}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(\mbox{\hyperlink{structPoint}{Point}} p, \mbox{\hyperlink{structMat2D}{Mat2D}} m)}
\DoxyCodeLine{00499 \{}
\DoxyCodeLine{00500     \mbox{\hyperlink{Matrix2D_8h_a8d1087dbe390c9bf0f913390c3240639}{MATRIX2D\_ASSERT}}((3 == m.\mbox{\hyperlink{structMat2D_ae2c1f099d11352ac91db1ff1b0c8ed0a}{rows}} \&\& 1 == m.\mbox{\hyperlink{structMat2D_ae9c10e24bb9e8d68c3ba96eb1cca3c5c}{cols}}) || (1 == m.\mbox{\hyperlink{structMat2D_ae2c1f099d11352ac91db1ff1b0c8ed0a}{rows}} \&\& 3 == m.\mbox{\hyperlink{structMat2D_ae9c10e24bb9e8d68c3ba96eb1cca3c5c}{cols}}));}
\DoxyCodeLine{00501     }
\DoxyCodeLine{00502     \textcolor{keywordflow}{if} (3 == m.\mbox{\hyperlink{structMat2D_ae2c1f099d11352ac91db1ff1b0c8ed0a}{rows}}) \{}
\DoxyCodeLine{00503         \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(m, 0, 0) = p.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}};}
\DoxyCodeLine{00504         \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(m, 1, 0) = p.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}};}
\DoxyCodeLine{00505         \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(m, 2, 0) = p.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}};}
\DoxyCodeLine{00506     \}}
\DoxyCodeLine{00507     \textcolor{keywordflow}{if} (3 == m.\mbox{\hyperlink{structMat2D_ae9c10e24bb9e8d68c3ba96eb1cca3c5c}{cols}}) \{}
\DoxyCodeLine{00508         \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(m, 0, 0) = p.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}};}
\DoxyCodeLine{00509         \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(m, 0, 1) = p.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}};}
\DoxyCodeLine{00510         \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(m, 0, 2) = p.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}};}
\DoxyCodeLine{00511     \}}
\DoxyCodeLine{00512 \}}
\DoxyCodeLine{00513 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00522}\mbox{\hyperlink{Almog__Engine_8h_af02975c063e1ea909c3bbc94210ea85f}{00522}} \mbox{\hyperlink{structPoint}{Point}} \mbox{\hyperlink{Almog__Engine_8h_af02975c063e1ea909c3bbc94210ea85f}{ae\_mat2D\_to\_point}}(\mbox{\hyperlink{structMat2D}{Mat2D}} m)}
\DoxyCodeLine{00523 \{}
\DoxyCodeLine{00524     \mbox{\hyperlink{structPoint}{Point}} res = \{.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(m, 0, 0), .y = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(m, 1, 0), .z = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(m, 2, 0), .w = 1\};}
\DoxyCodeLine{00525     \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{00526 \}}
\DoxyCodeLine{00527 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00540}\mbox{\hyperlink{Almog__Engine_8h_aef0dc6e58e24d1fad454eedddcbecda3}{00540}} \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} \mbox{\hyperlink{Almog__Engine_8h_aef0dc6e58e24d1fad454eedddcbecda3}{ae\_tri\_mesh\_get\_from\_obj\_file}}(\textcolor{keywordtype}{char} *file\_path)}
\DoxyCodeLine{00541 \{}
\DoxyCodeLine{00542     \textcolor{keywordtype}{char} current\_line[\mbox{\hyperlink{Almog__String__Manipulation_8h_a076fd3c5ba5ac7c6bbedb64c188565f3}{MAX\_LEN\_LINE}}], current\_word[\mbox{\hyperlink{Almog__String__Manipulation_8h_a076fd3c5ba5ac7c6bbedb64c188565f3}{MAX\_LEN\_LINE}}], current\_num\_str[\mbox{\hyperlink{Almog__String__Manipulation_8h_a076fd3c5ba5ac7c6bbedb64c188565f3}{MAX\_LEN\_LINE}}];}
\DoxyCodeLine{00543     \textcolor{keywordtype}{char} file\_name[\mbox{\hyperlink{Almog__String__Manipulation_8h_a076fd3c5ba5ac7c6bbedb64c188565f3}{MAX\_LEN\_LINE}}], file\_extention[\mbox{\hyperlink{Almog__String__Manipulation_8h_a076fd3c5ba5ac7c6bbedb64c188565f3}{MAX\_LEN\_LINE}}], mesh\_name[\mbox{\hyperlink{Almog__String__Manipulation_8h_a076fd3c5ba5ac7c6bbedb64c188565f3}{MAX\_LEN\_LINE}}];}
\DoxyCodeLine{00544     \textcolor{keywordtype}{int} texture\_warning\_was\_printed = 0;}
\DoxyCodeLine{00545 }
\DoxyCodeLine{00546     strncpy(file\_name, file\_path, \mbox{\hyperlink{Almog__String__Manipulation_8h_a076fd3c5ba5ac7c6bbedb64c188565f3}{MAX\_LEN\_LINE}});}
\DoxyCodeLine{00547     strncpy(file\_extention, file\_name, \mbox{\hyperlink{Almog__String__Manipulation_8h_a076fd3c5ba5ac7c6bbedb64c188565f3}{MAX\_LEN\_LINE}});}
\DoxyCodeLine{00548 }
\DoxyCodeLine{00549     \textcolor{comment}{/* check if file is an obj file*/}}
\DoxyCodeLine{00550     \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(file\_name, file\_extention, \textcolor{charliteral}{'.'});}
\DoxyCodeLine{00551     \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(file\_name, file\_extention, \textcolor{charliteral}{'.'});}
\DoxyCodeLine{00552     \textcolor{keywordflow}{if} (strncmp(file\_extention, \textcolor{stringliteral}{"{}.obj"{}}, \mbox{\hyperlink{Almog__String__Manipulation_8h_a076fd3c5ba5ac7c6bbedb64c188565f3}{MAX\_LEN\_LINE}})) \{}
\DoxyCodeLine{00553         fprintf(stderr, \textcolor{stringliteral}{"{}\%s:\%d: [Error] unsupported file format: '\%s'\(\backslash\)n"{}}, \_\_FILE\_\_, \_\_LINE\_\_, file\_name);}
\DoxyCodeLine{00554         exit(1);}
\DoxyCodeLine{00555     \}}
\DoxyCodeLine{00556 }
\DoxyCodeLine{00557     strncpy(mesh\_name, file\_name, \mbox{\hyperlink{Almog__String__Manipulation_8h_a076fd3c5ba5ac7c6bbedb64c188565f3}{MAX\_LEN\_LINE}});}
\DoxyCodeLine{00558     \textcolor{keywordflow}{while}(\mbox{\hyperlink{Almog__String__Manipulation_8h_a8cd7d02540e05c2a9b7457500b3de50f}{asm\_length}}(mesh\_name)) \{}
\DoxyCodeLine{00559         \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(current\_word, mesh\_name, \textcolor{charliteral}{'/'});}
\DoxyCodeLine{00560     \}}
\DoxyCodeLine{00561 }
\DoxyCodeLine{00562     strncpy(mesh\_name, current\_word, \mbox{\hyperlink{Almog__String__Manipulation_8h_a076fd3c5ba5ac7c6bbedb64c188565f3}{MAX\_LEN\_LINE}});}
\DoxyCodeLine{00563 }
\DoxyCodeLine{00564     strncpy(current\_word, \textcolor{stringliteral}{"{}."{}}, \mbox{\hyperlink{Almog__String__Manipulation_8h_a076fd3c5ba5ac7c6bbedb64c188565f3}{MAX\_LEN\_LINE}});}
\DoxyCodeLine{00565     strncat(file\_name, \textcolor{stringliteral}{"{}.obj"{}}, \mbox{\hyperlink{Almog__String__Manipulation_8h_a076fd3c5ba5ac7c6bbedb64c188565f3}{MAX\_LEN\_LINE}}/2);}
\DoxyCodeLine{00566     strncat(current\_word, file\_name, \mbox{\hyperlink{Almog__String__Manipulation_8h_a076fd3c5ba5ac7c6bbedb64c188565f3}{MAX\_LEN\_LINE}}/2);}
\DoxyCodeLine{00567 }
\DoxyCodeLine{00568     FILE *fp\_input = fopen(current\_word, \textcolor{stringliteral}{"{}rt"{}});}
\DoxyCodeLine{00569     \textcolor{keywordflow}{if} (fp\_input == NULL) \{}
\DoxyCodeLine{00570         fprintf(stderr, \textcolor{stringliteral}{"{}\%s:\%d: [Error] failed to open input file: '\%s', \%s\(\backslash\)n"{}}, \_\_FILE\_\_, \_\_LINE\_\_, current\_word, strerror(errno));}
\DoxyCodeLine{00571         exit(1);}
\DoxyCodeLine{00572     \}}
\DoxyCodeLine{00573 }
\DoxyCodeLine{00574     \textcolor{comment}{// strncpy(output\_file\_name, "{}./build/"{}, MAX\_LEN\_LINE);}}
\DoxyCodeLine{00575     \textcolor{comment}{// strncat(output\_file\_name, mesh\_name, MAX\_LEN\_LINE/2);}}
\DoxyCodeLine{00576     \textcolor{comment}{// strncat(output\_file\_name, "{}.c"{}, MAX\_LEN\_LINE/2);}}
\DoxyCodeLine{00577     \textcolor{comment}{// FILE *fp\_output = fopen(output\_file\_name, "{}wt"{});}}
\DoxyCodeLine{00578     \textcolor{comment}{// if (fp\_input == NULL) \{}}
\DoxyCodeLine{00579     \textcolor{comment}{//     fprintf(stderr, "{}\%s:\%d: [Error] failed to open output file: '\%s'. \%s\(\backslash\)n"{}, \_\_FILE\_\_, \_\_LINE\_\_, output\_file\_name, strerror(errno));}}
\DoxyCodeLine{00580     \textcolor{comment}{//     exit(1);}}
\DoxyCodeLine{00581     \textcolor{comment}{// \}}}
\DoxyCodeLine{00582 }
\DoxyCodeLine{00583     \textcolor{comment}{/* parsing data from file */}}
\DoxyCodeLine{00584     \mbox{\hyperlink{structCurve}{Curve}} points = \{0\};}
\DoxyCodeLine{00585     \mbox{\hyperlink{Almog__Dynamic__Array_8h_aac157302e0837f301f0c915360cfb182}{ada\_init\_array}}(\mbox{\hyperlink{structPoint}{Point}}, points);}
\DoxyCodeLine{00586     \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} mesh;}
\DoxyCodeLine{00587     \mbox{\hyperlink{Almog__Dynamic__Array_8h_aac157302e0837f301f0c915360cfb182}{ada\_init\_array}}(\mbox{\hyperlink{structTri}{Tri}}, mesh);}
\DoxyCodeLine{00588 }
\DoxyCodeLine{00589     \textcolor{keywordtype}{int} line\_len;}
\DoxyCodeLine{00590 }
\DoxyCodeLine{00591     \textcolor{keywordflow}{while} ((line\_len = \mbox{\hyperlink{Almog__String__Manipulation_8h_a8f808979502627a0266c0e374f6e1641}{asm\_get\_line}}(fp\_input, current\_line)) != -\/1) \{}
\DoxyCodeLine{00592         \mbox{\hyperlink{Almog__String__Manipulation_8h_a63ffe09b30c257a91c9b48a55837dbe0}{asm\_get\_next\_word\_from\_line}}(current\_word, current\_line, \textcolor{charliteral}{' '});}
\DoxyCodeLine{00593         \textcolor{keywordflow}{if} (!strncmp(current\_word, \textcolor{stringliteral}{"{}v"{}}, 1)) \{}
\DoxyCodeLine{00594             \mbox{\hyperlink{structPoint}{Point}} p;}
\DoxyCodeLine{00595             \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(current\_word, current\_line, \textcolor{charliteral}{' '});}
\DoxyCodeLine{00596             \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(current\_word, current\_line, \textcolor{charliteral}{' '});}
\DoxyCodeLine{00597             p.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = atof(current\_word);}
\DoxyCodeLine{00598             \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(current\_word, current\_line, \textcolor{charliteral}{' '});}
\DoxyCodeLine{00599             p.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = atof(current\_word);}
\DoxyCodeLine{00600             \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(current\_word, current\_line, \textcolor{charliteral}{' '});}
\DoxyCodeLine{00601             p.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} = atof(current\_word);}
\DoxyCodeLine{00602             \textcolor{comment}{// printf("{}current word: \%s\(\backslash\)n"{}, current\_word);}}
\DoxyCodeLine{00603             \mbox{\hyperlink{Almog__Dynamic__Array_8h_a61680400e419e2d55c2e3cb9fe96dad7}{ada\_appand}}(\mbox{\hyperlink{structPoint}{Point}}, points, p);}
\DoxyCodeLine{00604             \textcolor{comment}{// break;}}
\DoxyCodeLine{00605         \}}
\DoxyCodeLine{00606         \textcolor{keywordflow}{if} (!strncmp(current\_word, \textcolor{stringliteral}{"{}f"{}}, 1)) \{}
\DoxyCodeLine{00607             \mbox{\hyperlink{structTri}{Tri}} tri1 = \{0\}, tri2 = \{0\};}
\DoxyCodeLine{00608 }
\DoxyCodeLine{00609             \textcolor{comment}{// printf("{}line: \%s\(\backslash\)nword: \%s, \%d\(\backslash\)n"{}, current\_line, current\_word, atoi(current\_word));}}
\DoxyCodeLine{00610             \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(current\_word, current\_line, \textcolor{charliteral}{' '});}
\DoxyCodeLine{00611             \textcolor{comment}{// printf("{}line: \%s\(\backslash\)nword: \%s, \%d\(\backslash\)n"{}, current\_line, current\_word, atoi(current\_word));}}
\DoxyCodeLine{00612 }
\DoxyCodeLine{00613             \textcolor{keywordtype}{int} number\_of\_spaces = \mbox{\hyperlink{Almog__String__Manipulation_8h_a929b5505a3cdb1796f2865b25b3bc92a}{asm\_str\_in\_str}}(current\_line, \textcolor{stringliteral}{"{} "{}});}
\DoxyCodeLine{00614             \textcolor{comment}{// printf("{}\%d\(\backslash\)n"{}, number\_of\_spaces);}}
\DoxyCodeLine{00615             \textcolor{comment}{// exit(1);}}
\DoxyCodeLine{00616             \textcolor{keywordflow}{if} (!(number\_of\_spaces == 3 || number\_of\_spaces == 4 || number\_of\_spaces == 5)) \{}
\DoxyCodeLine{00617                 fprintf(stderr, \textcolor{stringliteral}{"{}\%s:\%d: [Error] there is unsupported number of vertices for a face: \%d\(\backslash\)n"{}}, \_\_FILE\_\_, \_\_LINE\_\_, number\_of\_spaces);}
\DoxyCodeLine{00618                 exit(1);}
\DoxyCodeLine{00619             \}}
\DoxyCodeLine{00620             \textcolor{keywordflow}{if} (number\_of\_spaces == 3) \{}
\DoxyCodeLine{00621                 \textcolor{comment}{/* there are 3 vertices for the face. */}}
\DoxyCodeLine{00622                 \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(current\_word, current\_line, \textcolor{charliteral}{' '});}
\DoxyCodeLine{00623                 \textcolor{comment}{// printf("{}line: \%s\(\backslash\)nword: \%s, \%d\(\backslash\)n"{}, current\_line, current\_word, atoi(current\_word));}}
\DoxyCodeLine{00624                 \textcolor{keywordtype}{int} number\_of\_backslash = \mbox{\hyperlink{Almog__String__Manipulation_8h_a929b5505a3cdb1796f2865b25b3bc92a}{asm\_str\_in\_str}}(current\_word, \textcolor{stringliteral}{"{}/"{}});}
\DoxyCodeLine{00625                 \textcolor{keywordflow}{if} (number\_of\_backslash == 0) \{}
\DoxyCodeLine{00626                     tri1.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0] = points.\mbox{\hyperlink{structCurve_a9ec44e5490914bd92c039a365980fe56}{elements}}[atoi(current\_word)-\/1];}
\DoxyCodeLine{00627                     \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(current\_word, current\_line, \textcolor{charliteral}{' '});}
\DoxyCodeLine{00628                     tri1.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[1] = points.\mbox{\hyperlink{structCurve_a9ec44e5490914bd92c039a365980fe56}{elements}}[atoi(current\_word)-\/1];}
\DoxyCodeLine{00629                     \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(current\_word, current\_line, \textcolor{charliteral}{' '});}
\DoxyCodeLine{00630                     tri1.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[2] = points.\mbox{\hyperlink{structCurve_a9ec44e5490914bd92c039a365980fe56}{elements}}[atoi(current\_word)-\/1];}
\DoxyCodeLine{00631                 \}}
\DoxyCodeLine{00632                 \textcolor{keywordflow}{if} (number\_of\_backslash == 2) \{}
\DoxyCodeLine{00633                     \textcolor{keywordflow}{if} (!texture\_warning\_was\_printed) \{}
\DoxyCodeLine{00634                         fprintf(stderr, \textcolor{stringliteral}{"{}\%s:\%d [Warning] texture and normals data ignored of file at -\/ '\%s'\(\backslash\)n"{}}, \_\_FILE\_\_, \_\_LINE\_\_, file\_path);}
\DoxyCodeLine{00635                         texture\_warning\_was\_printed = 1;}
\DoxyCodeLine{00636                     \}}
\DoxyCodeLine{00637 }
\DoxyCodeLine{00638                     \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(current\_num\_str, current\_word, \textcolor{charliteral}{'/'});}
\DoxyCodeLine{00639                     \textcolor{comment}{// printf("{}line: \%s\(\backslash\)nword: \%s\(\backslash\)nnum str: \%s, \%d\(\backslash\)n"{}, current\_line, current\_word, current\_num\_str, atoi(current\_num\_str));}}
\DoxyCodeLine{00640                     tri1.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0] = points.\mbox{\hyperlink{structCurve_a9ec44e5490914bd92c039a365980fe56}{elements}}[atoi(current\_num\_str)-\/1];}
\DoxyCodeLine{00641 }
\DoxyCodeLine{00642                     \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(current\_word, current\_line, \textcolor{charliteral}{' '});}
\DoxyCodeLine{00643                     \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(current\_num\_str, current\_word, \textcolor{charliteral}{'/'});}
\DoxyCodeLine{00644                     \textcolor{comment}{// printf("{}line: \%s\(\backslash\)nword: \%s\(\backslash\)nnum str: \%s, \%d\(\backslash\)n"{}, current\_line, current\_word, current\_num\_str, atoi(current\_num\_str));}}
\DoxyCodeLine{00645                     tri1.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[1] = points.\mbox{\hyperlink{structCurve_a9ec44e5490914bd92c039a365980fe56}{elements}}[atoi(current\_num\_str)-\/1];}
\DoxyCodeLine{00646 }
\DoxyCodeLine{00647                     \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(current\_word, current\_line, \textcolor{charliteral}{' '});}
\DoxyCodeLine{00648                     \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(current\_num\_str, current\_word, \textcolor{charliteral}{'/'});}
\DoxyCodeLine{00649                     \textcolor{comment}{// printf("{}line: \%s\(\backslash\)nword: \%s\(\backslash\)nnum str: \%s, \%d\(\backslash\)n"{}, current\_line, current\_word, current\_num\_str, atoi(current\_num\_str));}}
\DoxyCodeLine{00650                     tri1.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[2] = points.\mbox{\hyperlink{structCurve_a9ec44e5490914bd92c039a365980fe56}{elements}}[atoi(current\_num\_str)-\/1];}
\DoxyCodeLine{00651                 \}}
\DoxyCodeLine{00652 }
\DoxyCodeLine{00653                 tri1.\mbox{\hyperlink{structTri_a5b4e4396e4ee399ff6d07ffcedaeceaa}{to\_draw}} = \textcolor{keyword}{true};}
\DoxyCodeLine{00654                 tri1.\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[0] = 1;}
\DoxyCodeLine{00655                 tri1.\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[1] = 1;}
\DoxyCodeLine{00656                 tri1.\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[2] = 1;}
\DoxyCodeLine{00657                 tri1.\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[0] = 0xFFFFFFFF;}
\DoxyCodeLine{00658                 tri1.\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[1] = 0xFFFFFFFF;}
\DoxyCodeLine{00659                 tri1.\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[2] = 0xFFFFFFFF;}
\DoxyCodeLine{00660 }
\DoxyCodeLine{00661                 \mbox{\hyperlink{Almog__Dynamic__Array_8h_a61680400e419e2d55c2e3cb9fe96dad7}{ada\_appand}}(\mbox{\hyperlink{structTri}{Tri}}, mesh, tri1);}
\DoxyCodeLine{00662                 \textcolor{comment}{// AE\_PRINT\_TRI(tri1);}}
\DoxyCodeLine{00663             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (number\_of\_spaces == 5 || number\_of\_spaces == 4) \{}
\DoxyCodeLine{00664                 \textcolor{comment}{/* there are 4 vertices for the face. */}}
\DoxyCodeLine{00665                 \textcolor{comment}{/* sometimes there is a space in the end */}}
\DoxyCodeLine{00666                 \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(current\_word, current\_line, \textcolor{charliteral}{' '});}
\DoxyCodeLine{00667                 \textcolor{comment}{// printf("{}line: \%s\(\backslash\)nword: \%s, \%d\(\backslash\)n"{}, current\_line, current\_word, atoi(current\_word));}}
\DoxyCodeLine{00668                 \textcolor{keywordtype}{int} number\_of\_backslash = \mbox{\hyperlink{Almog__String__Manipulation_8h_a929b5505a3cdb1796f2865b25b3bc92a}{asm\_str\_in\_str}}(current\_word, \textcolor{stringliteral}{"{}/"{}});}
\DoxyCodeLine{00669                 \textcolor{keywordflow}{if} (number\_of\_backslash == 0) \{}
\DoxyCodeLine{00670                     tri1.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0] = points.\mbox{\hyperlink{structCurve_a9ec44e5490914bd92c039a365980fe56}{elements}}[atoi(current\_word)-\/1];}
\DoxyCodeLine{00671                     \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(current\_word, current\_line, \textcolor{charliteral}{' '});}
\DoxyCodeLine{00672                     tri1.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[1] = points.\mbox{\hyperlink{structCurve_a9ec44e5490914bd92c039a365980fe56}{elements}}[atoi(current\_word)-\/1];}
\DoxyCodeLine{00673                     \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(current\_word, current\_line, \textcolor{charliteral}{' '});}
\DoxyCodeLine{00674                     tri1.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[2] = points.\mbox{\hyperlink{structCurve_a9ec44e5490914bd92c039a365980fe56}{elements}}[atoi(current\_word)-\/1];}
\DoxyCodeLine{00675                 \}}
\DoxyCodeLine{00676                 \textcolor{keywordflow}{if} (number\_of\_backslash == 2 || number\_of\_backslash == 1) \{}
\DoxyCodeLine{00677                     \textcolor{keywordflow}{if} (!texture\_warning\_was\_printed) \{}
\DoxyCodeLine{00678                         fprintf(stderr, \textcolor{stringliteral}{"{}\%s:\%d [Warning] texture and normals data ignored of file at -\/ '\%s'\(\backslash\)n"{}}, \_\_FILE\_\_, \_\_LINE\_\_, file\_path);}
\DoxyCodeLine{00679                         texture\_warning\_was\_printed = 1;}
\DoxyCodeLine{00680                     \}}
\DoxyCodeLine{00681 }
\DoxyCodeLine{00682                     \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(current\_num\_str, current\_word, \textcolor{charliteral}{'/'});}
\DoxyCodeLine{00683                     \textcolor{comment}{// printf("{}line: \%s\(\backslash\)nword: \%s\(\backslash\)nnum str: \%s, \%d\(\backslash\)n"{}, current\_line, current\_word, current\_num\_str, atoi(current\_num\_str));}}
\DoxyCodeLine{00684                     tri1.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0] = points.\mbox{\hyperlink{structCurve_a9ec44e5490914bd92c039a365980fe56}{elements}}[atoi(current\_num\_str)-\/1];}
\DoxyCodeLine{00685                     tri2.points[2] = points.\mbox{\hyperlink{structCurve_a9ec44e5490914bd92c039a365980fe56}{elements}}[atoi(current\_num\_str)-\/1];}
\DoxyCodeLine{00686 }
\DoxyCodeLine{00687                     \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(current\_word, current\_line, \textcolor{charliteral}{' '});}
\DoxyCodeLine{00688                     \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(current\_num\_str, current\_word, \textcolor{charliteral}{'/'});}
\DoxyCodeLine{00689                     \textcolor{comment}{// printf("{}line: \%s\(\backslash\)nword: \%s\(\backslash\)nnum str: \%s, \%d\(\backslash\)n"{}, current\_line, current\_word, current\_num\_str, atoi(current\_num\_str));}}
\DoxyCodeLine{00690                     tri1.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[1] = points.\mbox{\hyperlink{structCurve_a9ec44e5490914bd92c039a365980fe56}{elements}}[atoi(current\_num\_str)-\/1];}
\DoxyCodeLine{00691 }
\DoxyCodeLine{00692                     \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(current\_word, current\_line, \textcolor{charliteral}{' '});}
\DoxyCodeLine{00693                     \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(current\_num\_str, current\_word, \textcolor{charliteral}{'/'});}
\DoxyCodeLine{00694                     \textcolor{comment}{// printf("{}line: \%s\(\backslash\)nword: \%s\(\backslash\)nnum str: \%s, \%d\(\backslash\)n"{}, current\_line, current\_word, current\_num\_str, atoi(current\_num\_str));}}
\DoxyCodeLine{00695                     tri1.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[2] = points.\mbox{\hyperlink{structCurve_a9ec44e5490914bd92c039a365980fe56}{elements}}[atoi(current\_num\_str)-\/1];}
\DoxyCodeLine{00696                     tri2.points[0] = points.\mbox{\hyperlink{structCurve_a9ec44e5490914bd92c039a365980fe56}{elements}}[atoi(current\_num\_str)-\/1];}
\DoxyCodeLine{00697 }
\DoxyCodeLine{00698                     \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(current\_word, current\_line, \textcolor{charliteral}{' '});}
\DoxyCodeLine{00699                     \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(current\_num\_str, current\_word, \textcolor{charliteral}{'/'});}
\DoxyCodeLine{00700                     \textcolor{comment}{// printf("{}line: \%s\(\backslash\)nword: \%s\(\backslash\)nnum str: \%s, \%d\(\backslash\)n"{}, current\_line, current\_word, current\_num\_str, atoi(current\_num\_str));}}
\DoxyCodeLine{00701                     tri2.points[1] = points.\mbox{\hyperlink{structCurve_a9ec44e5490914bd92c039a365980fe56}{elements}}[atoi(current\_num\_str)-\/1];}
\DoxyCodeLine{00702                 \}}
\DoxyCodeLine{00703 }
\DoxyCodeLine{00704                 tri1.\mbox{\hyperlink{structTri_a5b4e4396e4ee399ff6d07ffcedaeceaa}{to\_draw}} = \textcolor{keyword}{true};}
\DoxyCodeLine{00705                 tri1.\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[0] = 1;}
\DoxyCodeLine{00706                 tri1.\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[1] = 1;}
\DoxyCodeLine{00707                 tri1.\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[2] = 1;}
\DoxyCodeLine{00708                 tri1.\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[0] = 0xFFFFFFFF;}
\DoxyCodeLine{00709                 tri1.\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[1] = 0xFFFFFFFF;}
\DoxyCodeLine{00710                 tri1.\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[2] = 0xFFFFFFFF;}
\DoxyCodeLine{00711 }
\DoxyCodeLine{00712                 tri2.to\_draw = \textcolor{keyword}{true};}
\DoxyCodeLine{00713                 tri2.light\_intensity[0] = 1;}
\DoxyCodeLine{00714                 tri2.light\_intensity[1] = 1;}
\DoxyCodeLine{00715                 tri2.light\_intensity[2] = 1;}
\DoxyCodeLine{00716                 tri2.colors[0] = 0xFFFFFFFF;}
\DoxyCodeLine{00717                 tri2.colors[1] = 0xFFFFFFFF;}
\DoxyCodeLine{00718                 tri2.colors[2] = 0xFFFFFFFF;}
\DoxyCodeLine{00719 }
\DoxyCodeLine{00720                 \mbox{\hyperlink{Almog__Dynamic__Array_8h_a61680400e419e2d55c2e3cb9fe96dad7}{ada\_appand}}(\mbox{\hyperlink{structTri}{Tri}}, mesh, tri1);}
\DoxyCodeLine{00721                 \mbox{\hyperlink{Almog__Dynamic__Array_8h_a61680400e419e2d55c2e3cb9fe96dad7}{ada\_appand}}(\mbox{\hyperlink{structTri}{Tri}}, mesh, tri2);}
\DoxyCodeLine{00722                 \textcolor{comment}{// AE\_PRINT\_TRI(tri1);}}
\DoxyCodeLine{00723                 \textcolor{comment}{// AE\_PRINT\_TRI(tri2);}}
\DoxyCodeLine{00724             \}}
\DoxyCodeLine{00725             \textcolor{comment}{// exit(2);}}
\DoxyCodeLine{00726         \}}
\DoxyCodeLine{00727     \}}
\DoxyCodeLine{00728     }
\DoxyCodeLine{00729     \textcolor{keywordflow}{return} mesh;}
\DoxyCodeLine{00730 \}}
\DoxyCodeLine{00731 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00743}\mbox{\hyperlink{Almog__Engine_8h_aae60309114a77dde9494d50c049998e0}{00743}} \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} \mbox{\hyperlink{Almog__Engine_8h_aae60309114a77dde9494d50c049998e0}{ae\_tri\_mesh\_get\_from\_stl\_file}}(\textcolor{keywordtype}{char} *file\_path)}
\DoxyCodeLine{00744 \{}
\DoxyCodeLine{00745     FILE *file;}
\DoxyCodeLine{00746     file = fopen(file\_path, \textcolor{stringliteral}{"{}rb"{}});}
\DoxyCodeLine{00747     \textcolor{keywordflow}{if} (file == NULL) \{}
\DoxyCodeLine{00748         fprintf(stderr, \textcolor{stringliteral}{"{}\%s:\%d: [Error] failed to open input file: '\%s', \%s\(\backslash\)n"{}}, \_\_FILE\_\_, \_\_LINE\_\_, file\_path, strerror(errno));}
\DoxyCodeLine{00749         exit(1);}
\DoxyCodeLine{00750     \}}
\DoxyCodeLine{00751 }
\DoxyCodeLine{00752     \textcolor{keywordtype}{char} header[\mbox{\hyperlink{Almog__Engine_8h_a370cf2e354323ac710025b5c1e2c58ee}{STL\_HEADER\_SIZE}}];}
\DoxyCodeLine{00753     fread(header, \mbox{\hyperlink{Almog__Engine_8h_a370cf2e354323ac710025b5c1e2c58ee}{STL\_HEADER\_SIZE}}, 1, file);}
\DoxyCodeLine{00754     \textcolor{comment}{// dprintSTRING(header);}}
\DoxyCodeLine{00755 }
\DoxyCodeLine{00756     uint32\_t num\_of\_tri;}
\DoxyCodeLine{00757     fread(\&num\_of\_tri, \mbox{\hyperlink{Almog__Engine_8h_adc4d38536e2dbc11bd68cda744bde13e}{STL\_NUM\_SIZE}}, 1, file);}
\DoxyCodeLine{00758     \textcolor{comment}{// dprintINT(num\_of\_tri);}}
\DoxyCodeLine{00759 }
\DoxyCodeLine{00760     \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} mesh;}
\DoxyCodeLine{00761     \mbox{\hyperlink{Almog__Dynamic__Array_8h_aac157302e0837f301f0c915360cfb182}{ada\_init\_array}}(\mbox{\hyperlink{structTri}{Tri}}, mesh);}
\DoxyCodeLine{00762     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < num\_of\_tri; i++) \{}
\DoxyCodeLine{00763         \mbox{\hyperlink{structTri}{Tri}} temp\_tri = \{0\};}
\DoxyCodeLine{00764 }
\DoxyCodeLine{00765         fread(\&(temp\_tri.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[0].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}}), \mbox{\hyperlink{Almog__Engine_8h_adc4d38536e2dbc11bd68cda744bde13e}{STL\_NUM\_SIZE}}, 1, file);}
\DoxyCodeLine{00766         fread(\&(temp\_tri.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[0].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}}), \mbox{\hyperlink{Almog__Engine_8h_adc4d38536e2dbc11bd68cda744bde13e}{STL\_NUM\_SIZE}}, 1, file);}
\DoxyCodeLine{00767         fread(\&(temp\_tri.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[0].\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}}), \mbox{\hyperlink{Almog__Engine_8h_adc4d38536e2dbc11bd68cda744bde13e}{STL\_NUM\_SIZE}}, 1, file);}
\DoxyCodeLine{00768 }
\DoxyCodeLine{00769         temp\_tri.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[0].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = -\/ temp\_tri.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[0].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}};}
\DoxyCodeLine{00770         temp\_tri.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[0].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = -\/ temp\_tri.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[0].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}};}
\DoxyCodeLine{00771         temp\_tri.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[0].\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} = -\/ temp\_tri.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[0].\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}};}
\DoxyCodeLine{00772 }
\DoxyCodeLine{00773         temp\_tri.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[1] = temp\_tri.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[0];}
\DoxyCodeLine{00774         temp\_tri.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[2] = temp\_tri.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[0];}
\DoxyCodeLine{00775 }
\DoxyCodeLine{00776         fread(\&(temp\_tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}}), \mbox{\hyperlink{Almog__Engine_8h_adc4d38536e2dbc11bd68cda744bde13e}{STL\_NUM\_SIZE}}, 1, file);}
\DoxyCodeLine{00777         fread(\&(temp\_tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}}), \mbox{\hyperlink{Almog__Engine_8h_adc4d38536e2dbc11bd68cda744bde13e}{STL\_NUM\_SIZE}}, 1, file);}
\DoxyCodeLine{00778         fread(\&(temp\_tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0].\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}}), \mbox{\hyperlink{Almog__Engine_8h_adc4d38536e2dbc11bd68cda744bde13e}{STL\_NUM\_SIZE}}, 1, file);}
\DoxyCodeLine{00779 }
\DoxyCodeLine{00780         fread(\&(temp\_tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[1].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}}), \mbox{\hyperlink{Almog__Engine_8h_adc4d38536e2dbc11bd68cda744bde13e}{STL\_NUM\_SIZE}}, 1, file);}
\DoxyCodeLine{00781         fread(\&(temp\_tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[1].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}}), \mbox{\hyperlink{Almog__Engine_8h_adc4d38536e2dbc11bd68cda744bde13e}{STL\_NUM\_SIZE}}, 1, file);}
\DoxyCodeLine{00782         fread(\&(temp\_tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[1].\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}}), \mbox{\hyperlink{Almog__Engine_8h_adc4d38536e2dbc11bd68cda744bde13e}{STL\_NUM\_SIZE}}, 1, file);}
\DoxyCodeLine{00783         }
\DoxyCodeLine{00784         fread(\&(temp\_tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[2].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}}), \mbox{\hyperlink{Almog__Engine_8h_adc4d38536e2dbc11bd68cda744bde13e}{STL\_NUM\_SIZE}}, 1, file);}
\DoxyCodeLine{00785         fread(\&(temp\_tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[2].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}}), \mbox{\hyperlink{Almog__Engine_8h_adc4d38536e2dbc11bd68cda744bde13e}{STL\_NUM\_SIZE}}, 1, file);}
\DoxyCodeLine{00786         fread(\&(temp\_tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[2].\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}}), \mbox{\hyperlink{Almog__Engine_8h_adc4d38536e2dbc11bd68cda744bde13e}{STL\_NUM\_SIZE}}, 1, file);}
\DoxyCodeLine{00787 }
\DoxyCodeLine{00788         fseek(file, \mbox{\hyperlink{Almog__Engine_8h_a45967694710f3c5c2924b7afff0e9775}{STL\_ATTRIBUTE\_BITS\_SIZE}}, SEEK\_CUR);}
\DoxyCodeLine{00789 }
\DoxyCodeLine{00790         temp\_tri.\mbox{\hyperlink{structTri_a5b4e4396e4ee399ff6d07ffcedaeceaa}{to\_draw}} = \textcolor{keyword}{true};}
\DoxyCodeLine{00791         temp\_tri.\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[0] = 1;}
\DoxyCodeLine{00792         temp\_tri.\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[1] = 1;}
\DoxyCodeLine{00793         temp\_tri.\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[2] = 1;}
\DoxyCodeLine{00794         temp\_tri.\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[0] = 0xFFFFFFFF;}
\DoxyCodeLine{00795         temp\_tri.\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[1] = 0xFFFFFFFF;}
\DoxyCodeLine{00796         temp\_tri.\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[2] = 0xFFFFFFFF;}
\DoxyCodeLine{00797 }
\DoxyCodeLine{00798         \textcolor{comment}{// ae\_tri\_set\_normals(\&temp\_tri);}}
\DoxyCodeLine{00799 }
\DoxyCodeLine{00800         \mbox{\hyperlink{Almog__Dynamic__Array_8h_a61680400e419e2d55c2e3cb9fe96dad7}{ada\_appand}}(\mbox{\hyperlink{structTri}{Tri}}, mesh, temp\_tri);}
\DoxyCodeLine{00801     \}}
\DoxyCodeLine{00802 }
\DoxyCodeLine{00803     \textcolor{keywordflow}{return} mesh;}
\DoxyCodeLine{00804 \}}
\DoxyCodeLine{00805 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00816}\mbox{\hyperlink{Almog__Engine_8h_af8271eb7d6d313acddd78b4bcf6a8555}{00816}} \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} \mbox{\hyperlink{Almog__Engine_8h_af8271eb7d6d313acddd78b4bcf6a8555}{ae\_tri\_mesh\_get\_from\_file}}(\textcolor{keywordtype}{char} *file\_path)}
\DoxyCodeLine{00817 \{}
\DoxyCodeLine{00818     \textcolor{keywordtype}{char} file\_extention[\mbox{\hyperlink{Almog__String__Manipulation_8h_a076fd3c5ba5ac7c6bbedb64c188565f3}{MAX\_LEN\_LINE}}], temp\_word[\mbox{\hyperlink{Almog__String__Manipulation_8h_a076fd3c5ba5ac7c6bbedb64c188565f3}{MAX\_LEN\_LINE}}];}
\DoxyCodeLine{00819 }
\DoxyCodeLine{00820     strncpy(file\_extention, file\_path, \mbox{\hyperlink{Almog__String__Manipulation_8h_a076fd3c5ba5ac7c6bbedb64c188565f3}{MAX\_LEN\_LINE}});}
\DoxyCodeLine{00821 }
\DoxyCodeLine{00822     \textcolor{keywordtype}{int} num\_of\_dots;}
\DoxyCodeLine{00823     \textcolor{keywordflow}{while} ((num\_of\_dots = \mbox{\hyperlink{Almog__String__Manipulation_8h_a929b5505a3cdb1796f2865b25b3bc92a}{asm\_str\_in\_str}}(file\_extention, \textcolor{stringliteral}{"{}."{}})) >= 1) \{}
\DoxyCodeLine{00824         \mbox{\hyperlink{Almog__String__Manipulation_8h_a1eed5e458a06330f12a09ed0c8b9d77d}{asm\_get\_word\_and\_cut}}(temp\_word, file\_extention, \textcolor{charliteral}{'.'});}
\DoxyCodeLine{00825     \}}
\DoxyCodeLine{00826 }
\DoxyCodeLine{00827     \textcolor{keywordflow}{if} (!(!strncmp(file\_extention, \textcolor{stringliteral}{"{}obj"{}}, 3) || !strncmp(file\_extention, \textcolor{stringliteral}{"{}STL"{}}, 3) || !strncmp(file\_extention, \textcolor{stringliteral}{"{}stl"{}}, 3))) \{}
\DoxyCodeLine{00828         fprintf(stderr, \textcolor{stringliteral}{"{}\%s:\%d: [Error] unsupported file format: '\%s'\(\backslash\)n"{}}, \_\_FILE\_\_, \_\_LINE\_\_, file\_path);}
\DoxyCodeLine{00829         exit(1);}
\DoxyCodeLine{00830     \}}
\DoxyCodeLine{00831 }
\DoxyCodeLine{00832     \textcolor{keywordflow}{if} (!strncmp(file\_extention, \textcolor{stringliteral}{"{}STL"{}}, 3) || !strncmp(file\_extention, \textcolor{stringliteral}{"{}stl"{}}, 3)) \{}
\DoxyCodeLine{00833         \textcolor{keywordflow}{return} \mbox{\hyperlink{Almog__Engine_8h_aae60309114a77dde9494d50c049998e0}{ae\_tri\_mesh\_get\_from\_stl\_file}}(file\_path);}
\DoxyCodeLine{00834     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (!strncmp(file\_extention, \textcolor{stringliteral}{"{}obj"{}}, 3)) \{}
\DoxyCodeLine{00835         \textcolor{keywordflow}{return} \mbox{\hyperlink{Almog__Engine_8h_aef0dc6e58e24d1fad454eedddcbecda3}{ae\_tri\_mesh\_get\_from\_obj\_file}}(file\_path);}
\DoxyCodeLine{00836     \}}
\DoxyCodeLine{00837     }
\DoxyCodeLine{00838     \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} null\_mesh = \{0\};}
\DoxyCodeLine{00839     \textcolor{keywordflow}{return} null\_mesh;}
\DoxyCodeLine{00840 \}}
\DoxyCodeLine{00841 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00851}\mbox{\hyperlink{Almog__Engine_8h_abf4e49af66c2e3d0c5d8fba65ce4f2bc}{00851}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_abf4e49af66c2e3d0c5d8fba65ce4f2bc}{ae\_tri\_mesh\_appand\_copy}}(\mbox{\hyperlink{structTri__mesh__array}{Tri\_mesh\_array}} *mesh\_array, \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} mesh)}
\DoxyCodeLine{00852 \{}
\DoxyCodeLine{00853     \mbox{\hyperlink{structTri__mesh__array}{Tri\_mesh\_array}} temp\_mesh\_array = *mesh\_array;}
\DoxyCodeLine{00854     \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} temp\_mesh;}
\DoxyCodeLine{00855     \mbox{\hyperlink{Almog__Dynamic__Array_8h_aac157302e0837f301f0c915360cfb182}{ada\_init\_array}}(\mbox{\hyperlink{structTri}{Tri}}, temp\_mesh);}
\DoxyCodeLine{00856     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < mesh.\mbox{\hyperlink{structTri__mesh_a0fb2a2069a57bd77bac6a91a3b2e4ffb}{length}}; i++) \{}
\DoxyCodeLine{00857         \mbox{\hyperlink{Almog__Dynamic__Array_8h_a61680400e419e2d55c2e3cb9fe96dad7}{ada\_appand}}(\mbox{\hyperlink{structTri}{Tri}}, temp\_mesh, mesh.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[i]);}
\DoxyCodeLine{00858     \}}
\DoxyCodeLine{00859     \mbox{\hyperlink{Almog__Dynamic__Array_8h_a61680400e419e2d55c2e3cb9fe96dad7}{ada\_appand}}(\mbox{\hyperlink{structTri__mesh}{Tri\_mesh}}, temp\_mesh\_array, temp\_mesh);}
\DoxyCodeLine{00860 }
\DoxyCodeLine{00861 }
\DoxyCodeLine{00862     *mesh\_array = temp\_mesh\_array;}
\DoxyCodeLine{00863 \}}
\DoxyCodeLine{00864 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00875}\mbox{\hyperlink{Almog__Engine_8h_a4d2ce5dce0415cc4b1cf02c1f6c6bc77}{00875}} \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} \mbox{\hyperlink{Almog__Engine_8h_a4d2ce5dce0415cc4b1cf02c1f6c6bc77}{ae\_tri\_mesh\_get\_from\_quad\_mesh}}(\mbox{\hyperlink{structQuad__mesh}{Quad\_mesh}} q\_mesh)}
\DoxyCodeLine{00876 \{}
\DoxyCodeLine{00877     \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} t\_mesh;}
\DoxyCodeLine{00878     \mbox{\hyperlink{Almog__Dynamic__Array_8h_aac157302e0837f301f0c915360cfb182}{ada\_init\_array}}(\mbox{\hyperlink{structTri}{Tri}}, t\_mesh);}
\DoxyCodeLine{00879 }
\DoxyCodeLine{00880     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} q\_index = 0; q\_index < q\_mesh.\mbox{\hyperlink{structQuad__mesh_acf6fda7d9ed2f0c39e8ff17fb0ef521b}{length}}; q\_index++) \{}
\DoxyCodeLine{00881         \mbox{\hyperlink{structQuad}{Quad}} current\_q = q\_mesh.\mbox{\hyperlink{structQuad__mesh_a834716c539e7ceaa66821b4f3de7744d}{elements}}[q\_index];}
\DoxyCodeLine{00882         \mbox{\hyperlink{structTri}{Tri}} temp\_t = \{.\mbox{\hyperlink{structTri_a5b4e4396e4ee399ff6d07ffcedaeceaa}{to\_draw}} = current\_q.\mbox{\hyperlink{structQuad_a583cf34675c34b1242e48cec56562f35}{to\_draw}}\};}
\DoxyCodeLine{00883 }
\DoxyCodeLine{00884         temp\_t.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0] = current\_q.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0];}
\DoxyCodeLine{00885         temp\_t.\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[0] = current\_q.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[0];}
\DoxyCodeLine{00886         temp\_t.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[0] = current\_q.\mbox{\hyperlink{structQuad_a00c91a94eee9820ce31b8ee8927368f0}{normals}}[0];}
\DoxyCodeLine{00887         temp\_t.\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[0] = current\_q.\mbox{\hyperlink{structQuad_aba6d53f3dc917e11da1715cc669589d7}{light\_intensity}}[0];}
\DoxyCodeLine{00888         temp\_t.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[1] = current\_q.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1];}
\DoxyCodeLine{00889         temp\_t.\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[1] = current\_q.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[1];}
\DoxyCodeLine{00890         temp\_t.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[1] = current\_q.\mbox{\hyperlink{structQuad_a00c91a94eee9820ce31b8ee8927368f0}{normals}}[1];}
\DoxyCodeLine{00891         temp\_t.\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[1] = current\_q.\mbox{\hyperlink{structQuad_aba6d53f3dc917e11da1715cc669589d7}{light\_intensity}}[1];}
\DoxyCodeLine{00892         temp\_t.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[2] = current\_q.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2];}
\DoxyCodeLine{00893         temp\_t.\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[2] = current\_q.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[2];}
\DoxyCodeLine{00894         temp\_t.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[2] = current\_q.\mbox{\hyperlink{structQuad_a00c91a94eee9820ce31b8ee8927368f0}{normals}}[2];}
\DoxyCodeLine{00895         temp\_t.\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[2] = current\_q.\mbox{\hyperlink{structQuad_aba6d53f3dc917e11da1715cc669589d7}{light\_intensity}}[2];}
\DoxyCodeLine{00896 }
\DoxyCodeLine{00897         \mbox{\hyperlink{Almog__Dynamic__Array_8h_a61680400e419e2d55c2e3cb9fe96dad7}{ada\_appand}}(\mbox{\hyperlink{structTri}{Tri}}, t\_mesh, temp\_t);}
\DoxyCodeLine{00898 }
\DoxyCodeLine{00899         temp\_t.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0] = current\_q.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2];}
\DoxyCodeLine{00900         temp\_t.\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[0] = current\_q.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[2];}
\DoxyCodeLine{00901         temp\_t.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[0] = current\_q.\mbox{\hyperlink{structQuad_a00c91a94eee9820ce31b8ee8927368f0}{normals}}[2];}
\DoxyCodeLine{00902         temp\_t.\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[0] = current\_q.\mbox{\hyperlink{structQuad_aba6d53f3dc917e11da1715cc669589d7}{light\_intensity}}[2];}
\DoxyCodeLine{00903         temp\_t.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[1] = current\_q.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3];}
\DoxyCodeLine{00904         temp\_t.\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[1] = current\_q.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[3];}
\DoxyCodeLine{00905         temp\_t.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[1] = current\_q.\mbox{\hyperlink{structQuad_a00c91a94eee9820ce31b8ee8927368f0}{normals}}[3];}
\DoxyCodeLine{00906         temp\_t.\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[1] = current\_q.\mbox{\hyperlink{structQuad_aba6d53f3dc917e11da1715cc669589d7}{light\_intensity}}[3];}
\DoxyCodeLine{00907         temp\_t.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[2] = current\_q.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0];}
\DoxyCodeLine{00908         temp\_t.\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[2] = current\_q.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[0];}
\DoxyCodeLine{00909         temp\_t.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[2] = current\_q.\mbox{\hyperlink{structQuad_a00c91a94eee9820ce31b8ee8927368f0}{normals}}[0];}
\DoxyCodeLine{00910         temp\_t.\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[2] = current\_q.\mbox{\hyperlink{structQuad_aba6d53f3dc917e11da1715cc669589d7}{light\_intensity}}[0];}
\DoxyCodeLine{00911 }
\DoxyCodeLine{00912         \mbox{\hyperlink{Almog__Dynamic__Array_8h_a61680400e419e2d55c2e3cb9fe96dad7}{ada\_appand}}(\mbox{\hyperlink{structTri}{Tri}}, t\_mesh, temp\_t);}
\DoxyCodeLine{00913     \}}
\DoxyCodeLine{00914 }
\DoxyCodeLine{00915     \textcolor{keywordflow}{return} t\_mesh;}
\DoxyCodeLine{00916 \}}
\DoxyCodeLine{00917 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00925}\mbox{\hyperlink{Almog__Engine_8h_ad22d3f1e0cac0fc8d19398b0d43dbfc7}{00925}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_ad22d3f1e0cac0fc8d19398b0d43dbfc7}{ae\_print\_points}}(\mbox{\hyperlink{structCurve}{Curve}} p)}
\DoxyCodeLine{00926 \{}
\DoxyCodeLine{00927     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < p.\mbox{\hyperlink{structCurve_a883f62ca803547dbfe6159200e775b76}{length}}; i++) \{}
\DoxyCodeLine{00928         printf(\textcolor{stringliteral}{"{}point \%3zu: (\%5f, \%5f, \%5f)\(\backslash\)n"{}}, i, p.\mbox{\hyperlink{structCurve_a9ec44e5490914bd92c039a365980fe56}{elements}}[i].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}}, p.\mbox{\hyperlink{structCurve_a9ec44e5490914bd92c039a365980fe56}{elements}}[i].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}}, p.\mbox{\hyperlink{structCurve_a9ec44e5490914bd92c039a365980fe56}{elements}}[i].\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}});}
\DoxyCodeLine{00929     \}}
\DoxyCodeLine{00930 \}}
\DoxyCodeLine{00931 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00942}\mbox{\hyperlink{Almog__Engine_8h_a1e9358707d11584816ff73dd09aa9882}{00942}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_a1e9358707d11584816ff73dd09aa9882}{ae\_print\_tri}}(\mbox{\hyperlink{structTri}{Tri}} tri, \textcolor{keywordtype}{char} *name, \textcolor{keywordtype}{size\_t} padding)}
\DoxyCodeLine{00943 \{}
\DoxyCodeLine{00944     printf(\textcolor{stringliteral}{"{}\%*s\%s:\(\backslash\)n"{}}, (\textcolor{keywordtype}{int}) padding, \textcolor{stringliteral}{"{}"{}}, name);}
\DoxyCodeLine{00945     printf(\textcolor{stringliteral}{"{}\%*s    (\%f, \%f, \%f)\(\backslash\)n\%*s    (\%f, \%f, \%f)\(\backslash\)n\%*s    (\%f, \%f, \%f)\(\backslash\)n"{}}, (\textcolor{keywordtype}{int}) padding, \textcolor{stringliteral}{"{}"{}}, tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}}, tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}}, tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0].\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}}, (\textcolor{keywordtype}{int}) padding, \textcolor{stringliteral}{"{}"{}}, tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[1].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}}, tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[1].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}}, tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[1].\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}}, (\textcolor{keywordtype}{int}) padding, \textcolor{stringliteral}{"{}"{}}, tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[2].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}}, tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[2].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}}, tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[2].\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}});}
\DoxyCodeLine{00946     printf(\textcolor{stringliteral}{"{}\%*s    draw? \%d\(\backslash\)n"{}}, (\textcolor{keywordtype}{int})padding, \textcolor{stringliteral}{"{}"{}}, tri.\mbox{\hyperlink{structTri_a5b4e4396e4ee399ff6d07ffcedaeceaa}{to\_draw}});}
\DoxyCodeLine{00947 \}}
\DoxyCodeLine{00948 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00958}\mbox{\hyperlink{Almog__Engine_8h_a4243299cc15f3c47c38f445a8e74f48e}{00958}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_a4243299cc15f3c47c38f445a8e74f48e}{ae\_print\_tri\_mesh}}(\mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} mesh, \textcolor{keywordtype}{char} *name, \textcolor{keywordtype}{size\_t} padding)}
\DoxyCodeLine{00959 \{}
\DoxyCodeLine{00960     \textcolor{keywordtype}{char} tri\_name[256];}
\DoxyCodeLine{00961     printf(\textcolor{stringliteral}{"{}\%*s\%s:\(\backslash\)n"{}}, (\textcolor{keywordtype}{int}) padding, \textcolor{stringliteral}{"{}"{}}, name);}
\DoxyCodeLine{00962     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < mesh.\mbox{\hyperlink{structTri__mesh_a0fb2a2069a57bd77bac6a91a3b2e4ffb}{length}}; i++) \{}
\DoxyCodeLine{00963         snprintf(tri\_name, 256, \textcolor{stringliteral}{"{}tri \%zu"{}}, i);}
\DoxyCodeLine{00964         \mbox{\hyperlink{Almog__Engine_8h_a1e9358707d11584816ff73dd09aa9882}{ae\_print\_tri}}(mesh.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[i], tri\_name, 4);}
\DoxyCodeLine{00965     \}}
\DoxyCodeLine{00966 \}}
\DoxyCodeLine{00967 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00976}\mbox{\hyperlink{Almog__Engine_8h_a97027681fd682ebb13f18d00a188a9b1}{00976}} \mbox{\hyperlink{structPoint}{Point}} \mbox{\hyperlink{Almog__Engine_8h_a97027681fd682ebb13f18d00a188a9b1}{ae\_point\_normalize\_xyz}}(\mbox{\hyperlink{structPoint}{Point}} p)}
\DoxyCodeLine{00977 \{}
\DoxyCodeLine{00978     \mbox{\hyperlink{structPoint}{Point}} res = \{0\};}
\DoxyCodeLine{00979 }
\DoxyCodeLine{00980     \textcolor{keywordtype}{float} norma = \mbox{\hyperlink{Almog__Engine_8h_a99f5599df51ee61f6b79cb702dd90718}{ae\_point\_calc\_norma}}(p);}
\DoxyCodeLine{00981 }
\DoxyCodeLine{00982     res.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = p.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} / norma;}
\DoxyCodeLine{00983     res.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = p.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} / norma;}
\DoxyCodeLine{00984     res.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} = p.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} / norma;}
\DoxyCodeLine{00985     res.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} = p.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}};}
\DoxyCodeLine{00986 }
\DoxyCodeLine{00987     \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{00988 \}}
\DoxyCodeLine{00989 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l00998}\mbox{\hyperlink{Almog__Engine_8h_a11c1d61181fe9b0d824fb2be51662659}{00998}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_a11c1d61181fe9b0d824fb2be51662659}{ae\_tri\_set\_normals}}(\mbox{\hyperlink{structTri}{Tri}} *tri)}
\DoxyCodeLine{00999 \{}
\DoxyCodeLine{01000     \mbox{\hyperlink{Almog__Engine_8h_ad51295cab44c98e63a76c2f2ecaeb16c}{ae\_assert\_tri\_is\_valid}}(*tri);}
\DoxyCodeLine{01001 }
\DoxyCodeLine{01002     \mbox{\hyperlink{structMat2D}{Mat2D}} point  = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{01003     \mbox{\hyperlink{structMat2D}{Mat2D}} to\_p   = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{01004     \mbox{\hyperlink{structMat2D}{Mat2D}} from\_p = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{01005     \mbox{\hyperlink{structMat2D}{Mat2D}} normal = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{01006 }
\DoxyCodeLine{01007     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 3; i++) \{}
\DoxyCodeLine{01008         \textcolor{keywordtype}{int} current\_index  = i;}
\DoxyCodeLine{01009         \textcolor{keywordtype}{int} next\_index     = (i + 1) \% 3;}
\DoxyCodeLine{01010         \textcolor{keywordtype}{int} previous\_index = (i -\/ 1 + 3) \% 3;}
\DoxyCodeLine{01011         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(tri-\/>\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[current\_index], point);}
\DoxyCodeLine{01012         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(tri-\/>\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[next\_index], from\_p);}
\DoxyCodeLine{01013         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(tri-\/>\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[previous\_index], to\_p);}
\DoxyCodeLine{01014 }
\DoxyCodeLine{01015         \mbox{\hyperlink{Matrix2D_8h_a96b3b954a60d4f9dd6ac9954945bc749}{mat2D\_sub}}(from\_p, point);}
\DoxyCodeLine{01016         \mbox{\hyperlink{Matrix2D_8h_a96b3b954a60d4f9dd6ac9954945bc749}{mat2D\_sub}}(point, to\_p);}
\DoxyCodeLine{01017 }
\DoxyCodeLine{01018         \mbox{\hyperlink{Matrix2D_8h_a5349f2b49eb72fa91c4824b0d08f4a83}{mat2D\_copy}}(to\_p, point);}
\DoxyCodeLine{01019 }
\DoxyCodeLine{01020         \mbox{\hyperlink{Matrix2D_8h_a195a44f3fe41a5c25f431b9a0c43ea48}{mat2D\_cross}}(normal, to\_p, from\_p);}
\DoxyCodeLine{01021         \textcolor{comment}{// mat2D\_cross(normal, from\_p, to\_p);}}
\DoxyCodeLine{01022         \mbox{\hyperlink{Matrix2D_8h_af74e919ae2726605b4b8edfbcd639a64}{mat2D\_normalize}}(normal);}
\DoxyCodeLine{01023 }
\DoxyCodeLine{01024         tri-\/>\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[current\_index] = \mbox{\hyperlink{Almog__Engine_8h_af02975c063e1ea909c3bbc94210ea85f}{ae\_mat2D\_to\_point}}(normal);}
\DoxyCodeLine{01025     \}}
\DoxyCodeLine{01026 }
\DoxyCodeLine{01027     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(point);}
\DoxyCodeLine{01028     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(to\_p);}
\DoxyCodeLine{01029     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(from\_p);}
\DoxyCodeLine{01030     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(normal);}
\DoxyCodeLine{01031 \}}
\DoxyCodeLine{01032 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l01041}\mbox{\hyperlink{Almog__Engine_8h_ae88854393111f68a7fcc4977070d981b}{01041}} \mbox{\hyperlink{structPoint}{Point}} \mbox{\hyperlink{Almog__Engine_8h_ae88854393111f68a7fcc4977070d981b}{ae\_tri\_get\_average\_normal}}(\mbox{\hyperlink{structTri}{Tri}} tri)}
\DoxyCodeLine{01042 \{}
\DoxyCodeLine{01043     \mbox{\hyperlink{structPoint}{Point}} normal0 = tri.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[0];}
\DoxyCodeLine{01044     \mbox{\hyperlink{structPoint}{Point}} normal1 = tri.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[1];}
\DoxyCodeLine{01045     \mbox{\hyperlink{structPoint}{Point}} normal2 = tri.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[2];}
\DoxyCodeLine{01046 }
\DoxyCodeLine{01047     \mbox{\hyperlink{structPoint}{Point}} res;}
\DoxyCodeLine{01048     res.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = (normal0.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} + normal1.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} + normal2.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}}) / 3;}
\DoxyCodeLine{01049     res.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = (normal0.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} + normal1.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} + normal2.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}}) / 3;}
\DoxyCodeLine{01050     res.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} = (normal0.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} + normal1.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} + normal2.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}}) / 3;}
\DoxyCodeLine{01051     res.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} = (normal0.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} + normal1.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} + normal2.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) / 3;}
\DoxyCodeLine{01052 }
\DoxyCodeLine{01053     \textcolor{keywordflow}{return} \mbox{\hyperlink{Almog__Engine_8h_a97027681fd682ebb13f18d00a188a9b1}{ae\_point\_normalize\_xyz}}(res);}
\DoxyCodeLine{01054 \}}
\DoxyCodeLine{01055 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l01062}\mbox{\hyperlink{Almog__Engine_8h_a3ee60e72e8969b1cf15d333a091f8ae7}{01062}} \mbox{\hyperlink{structPoint}{Point}} \mbox{\hyperlink{Almog__Engine_8h_a3ee60e72e8969b1cf15d333a091f8ae7}{ae\_tri\_get\_average\_point}}(\mbox{\hyperlink{structTri}{Tri}} tri)}
\DoxyCodeLine{01063 \{}
\DoxyCodeLine{01064     \mbox{\hyperlink{structPoint}{Point}} point0 = tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0];}
\DoxyCodeLine{01065     \mbox{\hyperlink{structPoint}{Point}} point1 = tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[1];}
\DoxyCodeLine{01066     \mbox{\hyperlink{structPoint}{Point}} point2 = tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[2];}
\DoxyCodeLine{01067 }
\DoxyCodeLine{01068     \mbox{\hyperlink{structPoint}{Point}} res;}
\DoxyCodeLine{01069     res.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = (point0.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} + point1.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} + point2.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}}) / 3;}
\DoxyCodeLine{01070     res.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = (point0.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} + point1.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} + point2.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}}) / 3;}
\DoxyCodeLine{01071     res.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} = (point0.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} + point1.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} + point2.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}}) / 3;}
\DoxyCodeLine{01072     res.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} = (point0.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} + point1.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} + point2.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) / 3;}
\DoxyCodeLine{01073 }
\DoxyCodeLine{01074     \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{01075 \}}
\DoxyCodeLine{01076 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l01086}\mbox{\hyperlink{Almog__Engine_8h_add210cedd8afbad661cb2afb96c077df}{01086}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_add210cedd8afbad661cb2afb96c077df}{ae\_tri\_calc\_normal}}(\mbox{\hyperlink{structMat2D}{Mat2D}} normal, \mbox{\hyperlink{structTri}{Tri}} tri)}
\DoxyCodeLine{01087 \{}
\DoxyCodeLine{01088     \mbox{\hyperlink{Almog__Engine_8h_ae0ee5af7ebeb8607977697ad6710723f}{AE\_ASSERT}}(3 == normal.\mbox{\hyperlink{structMat2D_ae2c1f099d11352ac91db1ff1b0c8ed0a}{rows}} \&\& 1 == normal.\mbox{\hyperlink{structMat2D_ae9c10e24bb9e8d68c3ba96eb1cca3c5c}{cols}});}
\DoxyCodeLine{01089     \mbox{\hyperlink{Almog__Engine_8h_ad51295cab44c98e63a76c2f2ecaeb16c}{ae\_assert\_tri\_is\_valid}}(tri);}
\DoxyCodeLine{01090 }
\DoxyCodeLine{01091     \mbox{\hyperlink{structMat2D}{Mat2D}} a = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{01092     \mbox{\hyperlink{structMat2D}{Mat2D}} b = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{01093     \mbox{\hyperlink{structMat2D}{Mat2D}} c = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{01094 }
\DoxyCodeLine{01095     \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0], a);}
\DoxyCodeLine{01096     \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[1], b);}
\DoxyCodeLine{01097     \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[2], c);}
\DoxyCodeLine{01098 }
\DoxyCodeLine{01099     \mbox{\hyperlink{Matrix2D_8h_a96b3b954a60d4f9dd6ac9954945bc749}{mat2D\_sub}}(b, a);}
\DoxyCodeLine{01100     \mbox{\hyperlink{Matrix2D_8h_a96b3b954a60d4f9dd6ac9954945bc749}{mat2D\_sub}}(c, a);}
\DoxyCodeLine{01101 }
\DoxyCodeLine{01102     \mbox{\hyperlink{Matrix2D_8h_a195a44f3fe41a5c25f431b9a0c43ea48}{mat2D\_cross}}(normal, b, c);}
\DoxyCodeLine{01103 }
\DoxyCodeLine{01104     \mbox{\hyperlink{Matrix2D_8h_ab053dbc6d1eba395817707c410b227e0}{mat2D\_mult}}(normal, 1/\mbox{\hyperlink{Matrix2D_8h_abda90a369811f8c2693911008994f6ec}{mat2D\_calc\_norma}}(normal));}
\DoxyCodeLine{01105 }
\DoxyCodeLine{01106     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(a);}
\DoxyCodeLine{01107     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(b);}
\DoxyCodeLine{01108     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(c);}
\DoxyCodeLine{01109 \}}
\DoxyCodeLine{01110 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l01121}\mbox{\hyperlink{Almog__Engine_8h_a2b42f501a0c410d33c3c77188b2373d5}{01121}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_a2b42f501a0c410d33c3c77188b2373d5}{ae\_tri\_mesh\_translate}}(\mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} mesh, \textcolor{keywordtype}{float} x, \textcolor{keywordtype}{float} y, \textcolor{keywordtype}{float} z)}
\DoxyCodeLine{01122 \{}
\DoxyCodeLine{01123     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < mesh.\mbox{\hyperlink{structTri__mesh_a0fb2a2069a57bd77bac6a91a3b2e4ffb}{length}}; i++) \{}
\DoxyCodeLine{01124         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 3; j++) \{}
\DoxyCodeLine{01125             mesh.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[i].\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[j].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} += x;}
\DoxyCodeLine{01126             mesh.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[i].\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[j].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} += y;}
\DoxyCodeLine{01127             mesh.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[i].\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[j].\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} += z;}
\DoxyCodeLine{01128         \}}
\DoxyCodeLine{01129     \}}
\DoxyCodeLine{01130 \}}
\DoxyCodeLine{01131 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l01143}\mbox{\hyperlink{Almog__Engine_8h_a7b0d79ba4b2f6afdbe3c40c5a1a175de}{01143}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_a7b0d79ba4b2f6afdbe3c40c5a1a175de}{ae\_tri\_mesh\_rotate\_Euler\_xyz}}(\mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} mesh, \textcolor{keywordtype}{float} phi\_deg, \textcolor{keywordtype}{float} theta\_deg, \textcolor{keywordtype}{float} psi\_deg)}
\DoxyCodeLine{01144 \{}
\DoxyCodeLine{01145     \mbox{\hyperlink{structMat2D}{Mat2D}} RotZ = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3,3);}
\DoxyCodeLine{01146     \mbox{\hyperlink{Matrix2D_8h_a7cf78b0a4151b30bbc97f86bb8617cb3}{mat2D\_set\_rot\_mat\_z}}(RotZ, psi\_deg);}
\DoxyCodeLine{01147     \mbox{\hyperlink{structMat2D}{Mat2D}} RotY = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3,3);}
\DoxyCodeLine{01148     \mbox{\hyperlink{Matrix2D_8h_ab4db0c7ac08c4e94284e4748f5c63fda}{mat2D\_set\_rot\_mat\_y}}(RotY, theta\_deg);}
\DoxyCodeLine{01149     \mbox{\hyperlink{structMat2D}{Mat2D}} RotX = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3,3);}
\DoxyCodeLine{01150     \mbox{\hyperlink{Matrix2D_8h_aa65d8e2a4d3609149bb9a73f2839e174}{mat2D\_set\_rot\_mat\_x}}(RotX, phi\_deg);}
\DoxyCodeLine{01151     \mbox{\hyperlink{structMat2D}{Mat2D}} DCM = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3,3);}
\DoxyCodeLine{01152     \textcolor{comment}{// mat2D\_fill(DCM,0);}}
\DoxyCodeLine{01153     \mbox{\hyperlink{structMat2D}{Mat2D}} temp = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3,3);}
\DoxyCodeLine{01154     \textcolor{comment}{// mat2D\_fill(temp,0);}}
\DoxyCodeLine{01155     \mbox{\hyperlink{Matrix2D_8h_a54befe38bb85e4e8d07030cf3c4f9e16}{mat2D\_dot}}(temp, RotY, RotZ);}
\DoxyCodeLine{01156     \mbox{\hyperlink{Matrix2D_8h_a54befe38bb85e4e8d07030cf3c4f9e16}{mat2D\_dot}}(DCM, RotX, temp); \textcolor{comment}{/* I have a DCM */}}
\DoxyCodeLine{01157 }
\DoxyCodeLine{01158     \mbox{\hyperlink{structMat2D}{Mat2D}} src\_point\_mat = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3,1);}
\DoxyCodeLine{01159     \mbox{\hyperlink{structMat2D}{Mat2D}} des\_point\_mat = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3,1);}
\DoxyCodeLine{01160 }
\DoxyCodeLine{01161     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < mesh.\mbox{\hyperlink{structTri__mesh_a0fb2a2069a57bd77bac6a91a3b2e4ffb}{length}}; i++) \{}
\DoxyCodeLine{01162         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < 3; j++) \{}
\DoxyCodeLine{01163             \textcolor{comment}{// mat2D\_fill(src\_point\_mat, 0);}}
\DoxyCodeLine{01164             \textcolor{comment}{// mat2D\_fill(des\_point\_mat, 0);}}
\DoxyCodeLine{01165             \mbox{\hyperlink{structPoint}{Point}} des;}
\DoxyCodeLine{01166             \mbox{\hyperlink{structPoint}{Point}} src = mesh.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[i].\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[j];}
\DoxyCodeLine{01167 }
\DoxyCodeLine{01168             \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(src\_point\_mat, 0, 0) = src.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}};}
\DoxyCodeLine{01169             \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(src\_point\_mat, 1, 0) = src.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}};}
\DoxyCodeLine{01170             \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(src\_point\_mat, 2, 0) = src.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}};}
\DoxyCodeLine{01171 }
\DoxyCodeLine{01172             \mbox{\hyperlink{Matrix2D_8h_a54befe38bb85e4e8d07030cf3c4f9e16}{mat2D\_dot}}(des\_point\_mat, DCM, src\_point\_mat);}
\DoxyCodeLine{01173 }
\DoxyCodeLine{01174             des.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(des\_point\_mat, 0, 0);}
\DoxyCodeLine{01175             des.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(des\_point\_mat, 1, 0);}
\DoxyCodeLine{01176             des.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(des\_point\_mat, 2, 0);}
\DoxyCodeLine{01177 }
\DoxyCodeLine{01178             mesh.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[i].\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[j] = des;}
\DoxyCodeLine{01179         \}}
\DoxyCodeLine{01180     \}}
\DoxyCodeLine{01181 }
\DoxyCodeLine{01182     \mbox{\hyperlink{Almog__Engine_8h_aa8b3ea525ba405673473938bf9065c63}{ae\_tri\_mesh\_set\_normals}}(mesh);}
\DoxyCodeLine{01183 }
\DoxyCodeLine{01184     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(RotZ);}
\DoxyCodeLine{01185     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(RotY);}
\DoxyCodeLine{01186     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(RotX);}
\DoxyCodeLine{01187     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(DCM);}
\DoxyCodeLine{01188     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(temp);}
\DoxyCodeLine{01189     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(src\_point\_mat);}
\DoxyCodeLine{01190     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(des\_point\_mat);}
\DoxyCodeLine{01191 \}}
\DoxyCodeLine{01192 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l01206}\mbox{\hyperlink{Almog__Engine_8h_a63cfcc7dda05af0fe61b57f012f949d2}{01206}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_a63cfcc7dda05af0fe61b57f012f949d2}{ae\_tri\_mesh\_set\_bounding\_box}}(\mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} mesh, \textcolor{keywordtype}{float} *x\_min, \textcolor{keywordtype}{float} *x\_max, \textcolor{keywordtype}{float} *y\_min, \textcolor{keywordtype}{float} *y\_max, \textcolor{keywordtype}{float} *z\_min, \textcolor{keywordtype}{float} *z\_max)}
\DoxyCodeLine{01207 \{}
\DoxyCodeLine{01208     \textcolor{keywordtype}{float} xmin = FLT\_MAX, xmax = FLT\_MIN;}
\DoxyCodeLine{01209     \textcolor{keywordtype}{float} ymin = FLT\_MAX, ymax = FLT\_MIN;}
\DoxyCodeLine{01210     \textcolor{keywordtype}{float} zmin = FLT\_MAX, zmax = FLT\_MIN;}
\DoxyCodeLine{01211 }
\DoxyCodeLine{01212     \textcolor{keywordtype}{float} x, y, z;}
\DoxyCodeLine{01213 }
\DoxyCodeLine{01214     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} t = 0; t < mesh.\mbox{\hyperlink{structTri__mesh_a0fb2a2069a57bd77bac6a91a3b2e4ffb}{length}}; t++) \{}
\DoxyCodeLine{01215         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} p = 0; p < 3; p++) \{}
\DoxyCodeLine{01216             x = mesh.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[t].\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[p].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}};}
\DoxyCodeLine{01217             y = mesh.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[t].\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[p].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}};}
\DoxyCodeLine{01218             z = mesh.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[t].\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[p].\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}};}
\DoxyCodeLine{01219             \textcolor{keywordflow}{if} (x > xmax) xmax = x;}
\DoxyCodeLine{01220             \textcolor{keywordflow}{if} (x < xmin) xmin = x;}
\DoxyCodeLine{01221             \textcolor{keywordflow}{if} (y > ymax) ymax = y;}
\DoxyCodeLine{01222             \textcolor{keywordflow}{if} (y < ymin) ymin = y;}
\DoxyCodeLine{01223             \textcolor{keywordflow}{if} (z > zmax) zmax = z;}
\DoxyCodeLine{01224             \textcolor{keywordflow}{if} (z < zmin) zmin = z;}
\DoxyCodeLine{01225         \}}
\DoxyCodeLine{01226     \}}
\DoxyCodeLine{01227     *x\_min = xmin;}
\DoxyCodeLine{01228     *x\_max = xmax; }
\DoxyCodeLine{01229     *y\_min = ymin;}
\DoxyCodeLine{01230     *y\_max = ymax;}
\DoxyCodeLine{01231     *z\_min = zmin;}
\DoxyCodeLine{01232     *z\_max = zmax;}
\DoxyCodeLine{01233 \}}
\DoxyCodeLine{01234 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l01244}\mbox{\hyperlink{Almog__Engine_8h_ae970b00a8720bd46cf0743327170b4c2}{01244}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_ae970b00a8720bd46cf0743327170b4c2}{ae\_tri\_mesh\_normalize}}(\mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} mesh)}
\DoxyCodeLine{01245 \{}
\DoxyCodeLine{01246     \textcolor{keywordtype}{float} xmax, xmin, ymax, ymin, zmax, zmin;}
\DoxyCodeLine{01247     \mbox{\hyperlink{Almog__Engine_8h_a63cfcc7dda05af0fe61b57f012f949d2}{ae\_tri\_mesh\_set\_bounding\_box}}(mesh, \&xmin, \&xmax, \&ymin, \&ymax, \&zmin, \&zmax);}
\DoxyCodeLine{01248 }
\DoxyCodeLine{01249     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} t = 0; t < mesh.\mbox{\hyperlink{structTri__mesh_a0fb2a2069a57bd77bac6a91a3b2e4ffb}{length}}; t++) \{}
\DoxyCodeLine{01250         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} p = 0; p < 3; p++) \{}
\DoxyCodeLine{01251             \textcolor{keywordtype}{float} x, y, z;}
\DoxyCodeLine{01252             x = mesh.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[t].\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[p].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}};}
\DoxyCodeLine{01253             y = mesh.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[t].\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[p].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}};}
\DoxyCodeLine{01254             z = mesh.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[t].\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[p].\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}};}
\DoxyCodeLine{01255 }
\DoxyCodeLine{01256             \textcolor{keywordtype}{float} xdiff = xmax-\/xmin;}
\DoxyCodeLine{01257             \textcolor{keywordtype}{float} ydiff = ymax-\/ymin;}
\DoxyCodeLine{01258             \textcolor{keywordtype}{float} zdiff = zmax-\/zmin;}
\DoxyCodeLine{01259             \textcolor{keywordtype}{float} max\_diff = fmax(xdiff, fmax(ydiff, zdiff));}
\DoxyCodeLine{01260             \textcolor{keywordtype}{float} xfactor = xdiff/max\_diff;}
\DoxyCodeLine{01261             \textcolor{keywordtype}{float} yfactor = ydiff/max\_diff;}
\DoxyCodeLine{01262             \textcolor{keywordtype}{float} zfactor = zdiff/max\_diff;}
\DoxyCodeLine{01263 }
\DoxyCodeLine{01264             x = (((x -\/ xmin) / (xdiff)) * 2 -\/ 1) * xfactor;}
\DoxyCodeLine{01265             y = (((y -\/ ymin) / (ydiff)) * 2 -\/ 1) * yfactor;}
\DoxyCodeLine{01266             z = (((z -\/ zmin) / (zdiff)) * 2 -\/ 1) * zfactor;}
\DoxyCodeLine{01267 }
\DoxyCodeLine{01268             mesh.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[t].\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[p].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = x;}
\DoxyCodeLine{01269             mesh.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[t].\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[p].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = y;}
\DoxyCodeLine{01270             mesh.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[t].\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[p].\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} = z;}
\DoxyCodeLine{01271         \}}
\DoxyCodeLine{01272     \}}
\DoxyCodeLine{01273 \}}
\DoxyCodeLine{01274 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l01283}\mbox{\hyperlink{Almog__Engine_8h_ab014e21d442505ee1ca7c910a6307f8a}{01283}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_ab014e21d442505ee1ca7c910a6307f8a}{ae\_tri\_mesh\_flip\_normals}}(\mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} mesh)}
\DoxyCodeLine{01284 \{}
\DoxyCodeLine{01285     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < mesh.\mbox{\hyperlink{structTri__mesh_a0fb2a2069a57bd77bac6a91a3b2e4ffb}{length}}; i++) \{}
\DoxyCodeLine{01286         \mbox{\hyperlink{structTri}{Tri}} res\_tri, tri = mesh.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[i];}
\DoxyCodeLine{01287 }
\DoxyCodeLine{01288         res\_tri.\mbox{\hyperlink{structTri_a5b4e4396e4ee399ff6d07ffcedaeceaa}{to\_draw}} = tri.\mbox{\hyperlink{structTri_a5b4e4396e4ee399ff6d07ffcedaeceaa}{to\_draw}};}
\DoxyCodeLine{01289 }
\DoxyCodeLine{01290         res\_tri.\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[0]          = tri.\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[2];}
\DoxyCodeLine{01291         res\_tri.\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[0] = tri.\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[2];}
\DoxyCodeLine{01292         res\_tri.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[0]         = tri.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[2];}
\DoxyCodeLine{01293         res\_tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0]          = tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[2];}
\DoxyCodeLine{01294         res\_tri.\mbox{\hyperlink{structTri_a0cbc3520ec1e9920434c9984a8f3c345}{tex\_points}}[0]      = tri.\mbox{\hyperlink{structTri_a0cbc3520ec1e9920434c9984a8f3c345}{tex\_points}}[2];}
\DoxyCodeLine{01295 }
\DoxyCodeLine{01296         res\_tri.\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[1]          = tri.\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[1];}
\DoxyCodeLine{01297         res\_tri.\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[1] = tri.\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[1];}
\DoxyCodeLine{01298         res\_tri.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[1]         = tri.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[1];}
\DoxyCodeLine{01299         res\_tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[1]          = tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[1];}
\DoxyCodeLine{01300         res\_tri.\mbox{\hyperlink{structTri_a0cbc3520ec1e9920434c9984a8f3c345}{tex\_points}}[1]      = tri.\mbox{\hyperlink{structTri_a0cbc3520ec1e9920434c9984a8f3c345}{tex\_points}}[1];}
\DoxyCodeLine{01301 }
\DoxyCodeLine{01302         res\_tri.\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[2]          = tri.\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[0];}
\DoxyCodeLine{01303         res\_tri.\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[2] = tri.\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[0];}
\DoxyCodeLine{01304         res\_tri.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[2]         = tri.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[0];}
\DoxyCodeLine{01305         res\_tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[2]          = tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0];}
\DoxyCodeLine{01306         res\_tri.\mbox{\hyperlink{structTri_a0cbc3520ec1e9920434c9984a8f3c345}{tex\_points}}[2]      = tri.\mbox{\hyperlink{structTri_a0cbc3520ec1e9920434c9984a8f3c345}{tex\_points}}[0];}
\DoxyCodeLine{01307 }
\DoxyCodeLine{01308         \mbox{\hyperlink{Almog__Engine_8h_a11c1d61181fe9b0d824fb2be51662659}{ae\_tri\_set\_normals}}(\&res\_tri);}
\DoxyCodeLine{01309 }
\DoxyCodeLine{01310         mesh.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[i] = res\_tri;}
\DoxyCodeLine{01311     \}}
\DoxyCodeLine{01312 \}}
\DoxyCodeLine{01313 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l01321}\mbox{\hyperlink{Almog__Engine_8h_aa8b3ea525ba405673473938bf9065c63}{01321}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_aa8b3ea525ba405673473938bf9065c63}{ae\_tri\_mesh\_set\_normals}}(\mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} mesh)}
\DoxyCodeLine{01322 \{}
\DoxyCodeLine{01323     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < mesh.\mbox{\hyperlink{structTri__mesh_a0fb2a2069a57bd77bac6a91a3b2e4ffb}{length}}; i++) \{}
\DoxyCodeLine{01324         \mbox{\hyperlink{Almog__Engine_8h_a11c1d61181fe9b0d824fb2be51662659}{ae\_tri\_set\_normals}}(\&(mesh.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[i]));}
\DoxyCodeLine{01325     \}}
\DoxyCodeLine{01326 \}}
\DoxyCodeLine{01327 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l01336}\mbox{\hyperlink{Almog__Engine_8h_ae7bccc35b4caefa9f167e3267813e921}{01336}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_ae7bccc35b4caefa9f167e3267813e921}{ae\_quad\_set\_normals}}(\mbox{\hyperlink{structQuad}{Quad}} *quad)}
\DoxyCodeLine{01337 \{}
\DoxyCodeLine{01338     \mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{ae\_assert\_quad\_is\_valid}}(*quad);}
\DoxyCodeLine{01339 }
\DoxyCodeLine{01340     \mbox{\hyperlink{structMat2D}{Mat2D}} point  = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{01341     \mbox{\hyperlink{structMat2D}{Mat2D}} to\_p   = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{01342     \mbox{\hyperlink{structMat2D}{Mat2D}} from\_p = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{01343     \mbox{\hyperlink{structMat2D}{Mat2D}} normal = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{01344 }
\DoxyCodeLine{01345     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 4; i++) \{}
\DoxyCodeLine{01346         \textcolor{keywordtype}{int} current\_index  = i;}
\DoxyCodeLine{01347         \textcolor{keywordtype}{int} next\_index     = (i + 1) \% 4;}
\DoxyCodeLine{01348         \textcolor{keywordtype}{int} previous\_index = (i -\/ 1 + 4) \% 4;}
\DoxyCodeLine{01349         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad-\/>\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[current\_index], point);}
\DoxyCodeLine{01350         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad-\/>\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[next\_index], from\_p);}
\DoxyCodeLine{01351         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad-\/>\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[previous\_index], to\_p);}
\DoxyCodeLine{01352 }
\DoxyCodeLine{01353         \mbox{\hyperlink{Matrix2D_8h_a96b3b954a60d4f9dd6ac9954945bc749}{mat2D\_sub}}(from\_p, point);}
\DoxyCodeLine{01354         \mbox{\hyperlink{Matrix2D_8h_a96b3b954a60d4f9dd6ac9954945bc749}{mat2D\_sub}}(point, to\_p);}
\DoxyCodeLine{01355 }
\DoxyCodeLine{01356         \mbox{\hyperlink{Matrix2D_8h_a5349f2b49eb72fa91c4824b0d08f4a83}{mat2D\_copy}}(to\_p, point);}
\DoxyCodeLine{01357 }
\DoxyCodeLine{01358         \mbox{\hyperlink{Matrix2D_8h_a195a44f3fe41a5c25f431b9a0c43ea48}{mat2D\_cross}}(normal, to\_p, from\_p);}
\DoxyCodeLine{01359         \mbox{\hyperlink{Matrix2D_8h_af74e919ae2726605b4b8edfbcd639a64}{mat2D\_normalize}}(normal);}
\DoxyCodeLine{01360 }
\DoxyCodeLine{01361         quad-\/>\mbox{\hyperlink{structQuad_a00c91a94eee9820ce31b8ee8927368f0}{normals}}[current\_index] = \mbox{\hyperlink{Almog__Engine_8h_af02975c063e1ea909c3bbc94210ea85f}{ae\_mat2D\_to\_point}}(normal);}
\DoxyCodeLine{01362     \}}
\DoxyCodeLine{01363 }
\DoxyCodeLine{01364     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(point);}
\DoxyCodeLine{01365     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(to\_p);}
\DoxyCodeLine{01366     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(from\_p);}
\DoxyCodeLine{01367     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(normal);}
\DoxyCodeLine{01368 }
\DoxyCodeLine{01369 \}}
\DoxyCodeLine{01370 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l01379}\mbox{\hyperlink{Almog__Engine_8h_a13940b94d775b4887b34e03ffff9661e}{01379}} \mbox{\hyperlink{structPoint}{Point}} \mbox{\hyperlink{Almog__Engine_8h_a13940b94d775b4887b34e03ffff9661e}{ae\_quad\_get\_average\_normal}}(\mbox{\hyperlink{structQuad}{Quad}} quad)}
\DoxyCodeLine{01380 \{}
\DoxyCodeLine{01381     \mbox{\hyperlink{structPoint}{Point}} normal0 = quad.\mbox{\hyperlink{structQuad_a00c91a94eee9820ce31b8ee8927368f0}{normals}}[0];}
\DoxyCodeLine{01382     \mbox{\hyperlink{structPoint}{Point}} normal1 = quad.\mbox{\hyperlink{structQuad_a00c91a94eee9820ce31b8ee8927368f0}{normals}}[1];}
\DoxyCodeLine{01383     \mbox{\hyperlink{structPoint}{Point}} normal2 = quad.\mbox{\hyperlink{structQuad_a00c91a94eee9820ce31b8ee8927368f0}{normals}}[2];}
\DoxyCodeLine{01384     \mbox{\hyperlink{structPoint}{Point}} normal3 = quad.\mbox{\hyperlink{structQuad_a00c91a94eee9820ce31b8ee8927368f0}{normals}}[3];}
\DoxyCodeLine{01385 }
\DoxyCodeLine{01386     \mbox{\hyperlink{structPoint}{Point}} res;}
\DoxyCodeLine{01387     res.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = (normal0.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} + normal1.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} + normal2.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} + normal3.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}}) / 4;}
\DoxyCodeLine{01388     res.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = (normal0.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} + normal1.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} + normal2.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} + normal3.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}}) / 4;}
\DoxyCodeLine{01389     res.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} = (normal0.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} + normal1.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} + normal2.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} + normal3.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}}) / 4;}
\DoxyCodeLine{01390     res.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} = (normal0.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} + normal1.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} + normal2.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} + normal3.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) / 4;}
\DoxyCodeLine{01391 }
\DoxyCodeLine{01392     res = \mbox{\hyperlink{Almog__Engine_8h_a97027681fd682ebb13f18d00a188a9b1}{ae\_point\_normalize\_xyz}}(res);}
\DoxyCodeLine{01393 }
\DoxyCodeLine{01394     \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{01395 \}}
\DoxyCodeLine{01396 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l01403}\mbox{\hyperlink{Almog__Engine_8h_ad1f69bc7c34ba800623bdc3e693a2bcb}{01403}} \mbox{\hyperlink{structPoint}{Point}} \mbox{\hyperlink{Almog__Engine_8h_ad1f69bc7c34ba800623bdc3e693a2bcb}{ae\_quad\_get\_average\_point}}(\mbox{\hyperlink{structQuad}{Quad}} quad)}
\DoxyCodeLine{01404 \{}
\DoxyCodeLine{01405     \mbox{\hyperlink{structPoint}{Point}} point0 = quad.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0];}
\DoxyCodeLine{01406     \mbox{\hyperlink{structPoint}{Point}} point1 = quad.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1];}
\DoxyCodeLine{01407     \mbox{\hyperlink{structPoint}{Point}} point2 = quad.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2];}
\DoxyCodeLine{01408     \mbox{\hyperlink{structPoint}{Point}} point3 = quad.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3];}
\DoxyCodeLine{01409 }
\DoxyCodeLine{01410     \mbox{\hyperlink{structPoint}{Point}} res;}
\DoxyCodeLine{01411     res.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = (point0.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} + point1.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} + point2.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} + point3.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}}) / 4;}
\DoxyCodeLine{01412     res.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = (point0.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} + point1.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} + point2.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} + point3.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}}) / 4;}
\DoxyCodeLine{01413     res.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} = (point0.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} + point1.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} + point2.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} + point3.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}}) / 4;}
\DoxyCodeLine{01414     res.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} = (point0.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} + point1.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} + point2.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} + point3.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) / 4;}
\DoxyCodeLine{01415 }
\DoxyCodeLine{01416     \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{01417 \}}
\DoxyCodeLine{01418 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l01428}\mbox{\hyperlink{Almog__Engine_8h_af54cb5c301bedf21f37ed3fdaf7287b5}{01428}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_af54cb5c301bedf21f37ed3fdaf7287b5}{ae\_quad\_calc\_normal}}(\mbox{\hyperlink{structMat2D}{Mat2D}} normal, \mbox{\hyperlink{structQuad}{Quad}} quad)}
\DoxyCodeLine{01429 \{}
\DoxyCodeLine{01430     \mbox{\hyperlink{Almog__Engine_8h_ae0ee5af7ebeb8607977697ad6710723f}{AE\_ASSERT}}(3 == normal.\mbox{\hyperlink{structMat2D_ae2c1f099d11352ac91db1ff1b0c8ed0a}{rows}} \&\& 1 == normal.\mbox{\hyperlink{structMat2D_ae9c10e24bb9e8d68c3ba96eb1cca3c5c}{cols}});}
\DoxyCodeLine{01431     \mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{ae\_assert\_quad\_is\_valid}}(quad);}
\DoxyCodeLine{01432 }
\DoxyCodeLine{01433     \mbox{\hyperlink{structMat2D}{Mat2D}} a = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{01434     \mbox{\hyperlink{structMat2D}{Mat2D}} b = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{01435     \mbox{\hyperlink{structMat2D}{Mat2D}} c = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{01436 }
\DoxyCodeLine{01437     \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0], a);}
\DoxyCodeLine{01438     \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1], b);}
\DoxyCodeLine{01439     \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2], c);}
\DoxyCodeLine{01440 }
\DoxyCodeLine{01441     \mbox{\hyperlink{Matrix2D_8h_a96b3b954a60d4f9dd6ac9954945bc749}{mat2D\_sub}}(b, a);}
\DoxyCodeLine{01442     \mbox{\hyperlink{Matrix2D_8h_a96b3b954a60d4f9dd6ac9954945bc749}{mat2D\_sub}}(c, a);}
\DoxyCodeLine{01443 }
\DoxyCodeLine{01444     \mbox{\hyperlink{Matrix2D_8h_a195a44f3fe41a5c25f431b9a0c43ea48}{mat2D\_cross}}(normal, b, c);}
\DoxyCodeLine{01445 }
\DoxyCodeLine{01446     \mbox{\hyperlink{Matrix2D_8h_ab053dbc6d1eba395817707c410b227e0}{mat2D\_mult}}(normal, 1/\mbox{\hyperlink{Matrix2D_8h_abda90a369811f8c2693911008994f6ec}{mat2D\_calc\_norma}}(normal));}
\DoxyCodeLine{01447 }
\DoxyCodeLine{01448     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(a);}
\DoxyCodeLine{01449     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(b);}
\DoxyCodeLine{01450     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(c);}
\DoxyCodeLine{01451 \}}
\DoxyCodeLine{01452 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l01461}\mbox{\hyperlink{Almog__Engine_8h_aac75dd9d298e655d12249edc154e7591}{01461}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_aac75dd9d298e655d12249edc154e7591}{ae\_curve\_copy}}(\mbox{\hyperlink{structCurve}{Curve}} *des, \mbox{\hyperlink{structCurve}{Curve}} src)}
\DoxyCodeLine{01462 \{}
\DoxyCodeLine{01463     \mbox{\hyperlink{structCurve}{Curve}} temp\_des = *des;}
\DoxyCodeLine{01464     temp\_des.\mbox{\hyperlink{structCurve_a883f62ca803547dbfe6159200e775b76}{length}} = 0;}
\DoxyCodeLine{01465 }
\DoxyCodeLine{01466     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < src.\mbox{\hyperlink{structCurve_a883f62ca803547dbfe6159200e775b76}{length}}; i++) \{}
\DoxyCodeLine{01467         \mbox{\hyperlink{Almog__Dynamic__Array_8h_a61680400e419e2d55c2e3cb9fe96dad7}{ada\_appand}}(\mbox{\hyperlink{structPoint}{Point}}, temp\_des, src.\mbox{\hyperlink{structCurve_a9ec44e5490914bd92c039a365980fe56}{elements}}[i]);}
\DoxyCodeLine{01468     \}}
\DoxyCodeLine{01469 }
\DoxyCodeLine{01470     *des = temp\_des;}
\DoxyCodeLine{01471 \}}
\DoxyCodeLine{01472 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l01487}\mbox{\hyperlink{Almog__Engine_8h_abbea9d10462f28e6e52352a6c36ffabd}{01487}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_abbea9d10462f28e6e52352a6c36ffabd}{ae\_tri\_calc\_light\_intensity}}(\mbox{\hyperlink{structTri}{Tri}} *tri, \mbox{\hyperlink{structScene}{Scene}} *scene, \mbox{\hyperlink{Almog__Engine_8h_a3b664376e82e1cd4013e17ea17ac6501}{Lighting\_mode}} lighting\_mode)}
\DoxyCodeLine{01488 \{}
\DoxyCodeLine{01489     \textcolor{comment}{/* based on the lighting model described in: 'Alexandru C. Telea-\/Data Visualization\_ Principles and Practice-\/A K Peters\_CRC Press (2014)' Pg.29 */}}
\DoxyCodeLine{01490     \mbox{\hyperlink{structPoint}{Point}} L = \{0\};}
\DoxyCodeLine{01491     \mbox{\hyperlink{structPoint}{Point}} r = \{0\};}
\DoxyCodeLine{01492     \mbox{\hyperlink{structPoint}{Point}} v = \{0\};}
\DoxyCodeLine{01493     \mbox{\hyperlink{structPoint}{Point}} mL = \{0\};}
\DoxyCodeLine{01494     \mbox{\hyperlink{structPoint}{Point}} pml = \{0\};}
\DoxyCodeLine{01495     \mbox{\hyperlink{structPoint}{Point}} mLn2n = \{0\};}
\DoxyCodeLine{01496     \mbox{\hyperlink{structPoint}{Point}} ave\_norm = \mbox{\hyperlink{Almog__Engine_8h_ae88854393111f68a7fcc4977070d981b}{ae\_tri\_get\_average\_normal}}(*tri);}
\DoxyCodeLine{01497     \mbox{\hyperlink{structPoint}{Point}} camera\_pos = \mbox{\hyperlink{Almog__Engine_8h_af02975c063e1ea909c3bbc94210ea85f}{ae\_mat2D\_to\_point}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_adc5641764d588d64baeb2c9a5773d2e0}{current\_position}});}
\DoxyCodeLine{01498 }
\DoxyCodeLine{01499     \textcolor{keywordtype}{float} c\_ambi = scene-\/>\mbox{\hyperlink{structScene_aeb8fe55dccd003fd1195ebd215a796fe}{material0}}.\mbox{\hyperlink{structMaterial_a198bf89cad562cca2c4c7015f9f81e86}{c\_ambi}};}
\DoxyCodeLine{01500     \textcolor{keywordtype}{float} c\_diff = scene-\/>\mbox{\hyperlink{structScene_aeb8fe55dccd003fd1195ebd215a796fe}{material0}}.\mbox{\hyperlink{structMaterial_a380c5e541b1fe955a6bb96d35293cff4}{c\_diff}};}
\DoxyCodeLine{01501     \textcolor{keywordtype}{float} c\_spec = scene-\/>\mbox{\hyperlink{structScene_aeb8fe55dccd003fd1195ebd215a796fe}{material0}}.\mbox{\hyperlink{structMaterial_a27cc8a0811ea2dc434d7cc4ab9785917}{c\_spec}};}
\DoxyCodeLine{01502     \textcolor{keywordtype}{float} alpha  = scene-\/>\mbox{\hyperlink{structScene_aeb8fe55dccd003fd1195ebd215a796fe}{material0}}.\mbox{\hyperlink{structMaterial_a5e9c413095df430758f6b31c9bfb60e1}{specular\_power\_alpha}};}
\DoxyCodeLine{01503 }
\DoxyCodeLine{01504     \textcolor{keywordflow}{switch} (lighting\_mode) \{}
\DoxyCodeLine{01505     \textcolor{keywordflow}{case} \mbox{\hyperlink{Almog__Engine_8h_a3b664376e82e1cd4013e17ea17ac6501ad2872f5089e1989c79eaf9a2d83faceb}{AE\_LIGHTING\_FLAT}}:}
\DoxyCodeLine{01506         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 3; i++) \{}
\DoxyCodeLine{01507             \textcolor{keywordflow}{if} (scene-\/>\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}}.\mbox{\hyperlink{structLight__source_ac24d933710b710d1ed6d45b4696e38c8}{light\_direction\_or\_pos}}.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} == 0) \{}
\DoxyCodeLine{01508                 L = scene-\/>\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}}.\mbox{\hyperlink{structLight__source_ac24d933710b710d1ed6d45b4696e38c8}{light\_direction\_or\_pos}};}
\DoxyCodeLine{01509                 L = \mbox{\hyperlink{Almog__Engine_8h_a97027681fd682ebb13f18d00a188a9b1}{ae\_point\_normalize\_xyz}}(L);}
\DoxyCodeLine{01510                 mL = L;}
\DoxyCodeLine{01511                 \mbox{\hyperlink{Almog__Engine_8h_a7a7f28fc36bafd3717ab9c0fc5103e03}{ae\_point\_mult}}(mL, -\/1);}
\DoxyCodeLine{01512             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01513                 \mbox{\hyperlink{structPoint}{Point}} l = scene-\/>\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}}.\mbox{\hyperlink{structLight__source_ac24d933710b710d1ed6d45b4696e38c8}{light\_direction\_or\_pos}};}
\DoxyCodeLine{01514                 \mbox{\hyperlink{structPoint}{Point}} p = tri-\/>\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[i];}
\DoxyCodeLine{01515                 \mbox{\hyperlink{Almog__Engine_8h_a9575038baa976bf6b7c39cefd2f2c80b}{ae\_point\_sub\_point}}(pml, p, l);}
\DoxyCodeLine{01516                 pml = \mbox{\hyperlink{Almog__Engine_8h_a97027681fd682ebb13f18d00a188a9b1}{ae\_point\_normalize\_xyz}}(pml);}
\DoxyCodeLine{01517                 L = pml;}
\DoxyCodeLine{01518                 L.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} = 0;}
\DoxyCodeLine{01519                 mL = L;}
\DoxyCodeLine{01520                 \mbox{\hyperlink{Almog__Engine_8h_a7a7f28fc36bafd3717ab9c0fc5103e03}{ae\_point\_mult}}(mL, -\/1);}
\DoxyCodeLine{01521             \}}
\DoxyCodeLine{01522             }
\DoxyCodeLine{01523             \mbox{\hyperlink{Almog__Engine_8h_a9575038baa976bf6b7c39cefd2f2c80b}{ae\_point\_sub\_point}}(v, camera\_pos, \mbox{\hyperlink{Almog__Engine_8h_a3ee60e72e8969b1cf15d333a091f8ae7}{ae\_tri\_get\_average\_point}}(*tri));}
\DoxyCodeLine{01524             \textcolor{keywordtype}{float} mL\_dot\_norm = \mbox{\hyperlink{Almog__Engine_8h_af776055b6fac2e29e16d4a4fbd32d91b}{ae\_point\_dot\_point}}(mL, ave\_norm);}
\DoxyCodeLine{01525             mLn2n = ave\_norm;}
\DoxyCodeLine{01526             \mbox{\hyperlink{Almog__Engine_8h_a7a7f28fc36bafd3717ab9c0fc5103e03}{ae\_point\_mult}}(mLn2n, 2 * mL\_dot\_norm);}
\DoxyCodeLine{01527             \mbox{\hyperlink{Almog__Engine_8h_a79d5f5baf43bc7a9c1c9d5ae1d3a18c3}{ae\_point\_add\_point}}(r, L, mLn2n);}
\DoxyCodeLine{01528             }
\DoxyCodeLine{01529             tri-\/>\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[i] = c\_ambi + scene-\/>\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}}.\mbox{\hyperlink{structLight__source_a35f7bef9375ad1c6b3d2544c53b43493}{light\_intensity}} * (c\_diff * fmaxf(mL\_dot\_norm, 0) + c\_spec * powf(fmaxf(\mbox{\hyperlink{Almog__Engine_8h_af776055b6fac2e29e16d4a4fbd32d91b}{ae\_point\_dot\_point}}(r, v), 0), alpha));}
\DoxyCodeLine{01530         \}}
\DoxyCodeLine{01531         \textcolor{keywordflow}{break};}
\DoxyCodeLine{01532     \textcolor{keywordflow}{case} \mbox{\hyperlink{Almog__Engine_8h_a3b664376e82e1cd4013e17ea17ac6501a960031a84842327b8c9061dc0f9752b6}{AE\_LIGHTING\_SMOOTH}}:}
\DoxyCodeLine{01533         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 3; i++) \{}
\DoxyCodeLine{01534             \textcolor{keywordflow}{if} (scene-\/>\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}}.\mbox{\hyperlink{structLight__source_ac24d933710b710d1ed6d45b4696e38c8}{light\_direction\_or\_pos}}.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} == 0) \{}
\DoxyCodeLine{01535                 L = scene-\/>\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}}.\mbox{\hyperlink{structLight__source_ac24d933710b710d1ed6d45b4696e38c8}{light\_direction\_or\_pos}};}
\DoxyCodeLine{01536                 L = \mbox{\hyperlink{Almog__Engine_8h_a97027681fd682ebb13f18d00a188a9b1}{ae\_point\_normalize\_xyz}}(L);}
\DoxyCodeLine{01537                 mL = L;}
\DoxyCodeLine{01538                 \mbox{\hyperlink{Almog__Engine_8h_a7a7f28fc36bafd3717ab9c0fc5103e03}{ae\_point\_mult}}(mL, -\/1);}
\DoxyCodeLine{01539             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01540                 \mbox{\hyperlink{structPoint}{Point}} l = scene-\/>\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}}.\mbox{\hyperlink{structLight__source_ac24d933710b710d1ed6d45b4696e38c8}{light\_direction\_or\_pos}};}
\DoxyCodeLine{01541                 \mbox{\hyperlink{structPoint}{Point}} p = tri-\/>\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[i];}
\DoxyCodeLine{01542                 \mbox{\hyperlink{Almog__Engine_8h_a9575038baa976bf6b7c39cefd2f2c80b}{ae\_point\_sub\_point}}(pml, p, l);}
\DoxyCodeLine{01543                 pml = \mbox{\hyperlink{Almog__Engine_8h_a97027681fd682ebb13f18d00a188a9b1}{ae\_point\_normalize\_xyz}}(pml);}
\DoxyCodeLine{01544                 L = pml;}
\DoxyCodeLine{01545                 L.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} = 0;}
\DoxyCodeLine{01546                 mL = L;}
\DoxyCodeLine{01547                 \mbox{\hyperlink{Almog__Engine_8h_a7a7f28fc36bafd3717ab9c0fc5103e03}{ae\_point\_mult}}(mL, -\/1);}
\DoxyCodeLine{01548             \}}
\DoxyCodeLine{01549             \mbox{\hyperlink{Almog__Engine_8h_a9575038baa976bf6b7c39cefd2f2c80b}{ae\_point\_sub\_point}}(v, camera\_pos, tri-\/>\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[i]);}
\DoxyCodeLine{01550             \textcolor{keywordtype}{float} mL\_dot\_norm = \mbox{\hyperlink{Almog__Engine_8h_af776055b6fac2e29e16d4a4fbd32d91b}{ae\_point\_dot\_point}}(mL, tri-\/>\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[i]);}
\DoxyCodeLine{01551             mLn2n = tri-\/>\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[i];}
\DoxyCodeLine{01552             \mbox{\hyperlink{Almog__Engine_8h_a7a7f28fc36bafd3717ab9c0fc5103e03}{ae\_point\_mult}}(mLn2n, 2 * mL\_dot\_norm);}
\DoxyCodeLine{01553             \mbox{\hyperlink{Almog__Engine_8h_a79d5f5baf43bc7a9c1c9d5ae1d3a18c3}{ae\_point\_add\_point}}(r, L, mLn2n);}
\DoxyCodeLine{01554             }
\DoxyCodeLine{01555             tri-\/>\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[i] = c\_ambi + scene-\/>\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}}.\mbox{\hyperlink{structLight__source_a35f7bef9375ad1c6b3d2544c53b43493}{light\_intensity}} * (c\_diff * fmaxf(mL\_dot\_norm, 0) + c\_spec * powf(fmaxf(\mbox{\hyperlink{Almog__Engine_8h_af776055b6fac2e29e16d4a4fbd32d91b}{ae\_point\_dot\_point}}(r, v), 0), alpha));}
\DoxyCodeLine{01556         \}}
\DoxyCodeLine{01557         \textcolor{keywordflow}{break};}
\DoxyCodeLine{01558     \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01559         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 3; i++) \{}
\DoxyCodeLine{01560             tri-\/>\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[i] = 1;}
\DoxyCodeLine{01561         \}}
\DoxyCodeLine{01562         \textcolor{keywordflow}{break};}
\DoxyCodeLine{01563     \}}
\DoxyCodeLine{01564 }
\DoxyCodeLine{01565     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 3; i++) \{}
\DoxyCodeLine{01566         tri-\/>\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[i] = fminf(1, fmaxf(0, tri-\/>\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[i]));}
\DoxyCodeLine{01567     \}}
\DoxyCodeLine{01568 \}}
\DoxyCodeLine{01569 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l01580}\mbox{\hyperlink{Almog__Engine_8h_a36c108042b6ed289b4d0f85f8c5700ee}{01580}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_a36c108042b6ed289b4d0f85f8c5700ee}{ae\_quad\_calc\_light\_intensity}}(\mbox{\hyperlink{structQuad}{Quad}} *quad, \mbox{\hyperlink{structScene}{Scene}} *scene, \mbox{\hyperlink{Almog__Engine_8h_a3b664376e82e1cd4013e17ea17ac6501}{Lighting\_mode}} lighting\_mode)}
\DoxyCodeLine{01581 \{}
\DoxyCodeLine{01582     \textcolor{comment}{/* based on the lighting model described in: 'Alexandru C. Telea-\/Data Visualization\_ Principles and Practice-\/A K Peters\_CRC Press (2014)' Pg.29 */}}
\DoxyCodeLine{01583     \mbox{\hyperlink{structPoint}{Point}} L = \{0\};}
\DoxyCodeLine{01584     \mbox{\hyperlink{structPoint}{Point}} r = \{0\};}
\DoxyCodeLine{01585     \mbox{\hyperlink{structPoint}{Point}} v = \{0\};}
\DoxyCodeLine{01586     \mbox{\hyperlink{structPoint}{Point}} mL = \{0\};}
\DoxyCodeLine{01587     \mbox{\hyperlink{structPoint}{Point}} pml = \{0\};}
\DoxyCodeLine{01588     \mbox{\hyperlink{structPoint}{Point}} mLn2n = \{0\};}
\DoxyCodeLine{01589     \mbox{\hyperlink{structPoint}{Point}} ave\_norm = \mbox{\hyperlink{Almog__Engine_8h_a13940b94d775b4887b34e03ffff9661e}{ae\_quad\_get\_average\_normal}}(*quad);}
\DoxyCodeLine{01590     \mbox{\hyperlink{structPoint}{Point}} camera\_pos = \mbox{\hyperlink{Almog__Engine_8h_af02975c063e1ea909c3bbc94210ea85f}{ae\_mat2D\_to\_point}}(scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_adc5641764d588d64baeb2c9a5773d2e0}{current\_position}});}
\DoxyCodeLine{01591 }
\DoxyCodeLine{01592     \textcolor{keywordtype}{float} c\_ambi = scene-\/>\mbox{\hyperlink{structScene_aeb8fe55dccd003fd1195ebd215a796fe}{material0}}.\mbox{\hyperlink{structMaterial_a198bf89cad562cca2c4c7015f9f81e86}{c\_ambi}};}
\DoxyCodeLine{01593     \textcolor{keywordtype}{float} c\_diff = scene-\/>\mbox{\hyperlink{structScene_aeb8fe55dccd003fd1195ebd215a796fe}{material0}}.\mbox{\hyperlink{structMaterial_a380c5e541b1fe955a6bb96d35293cff4}{c\_diff}};}
\DoxyCodeLine{01594     \textcolor{keywordtype}{float} c\_spec = scene-\/>\mbox{\hyperlink{structScene_aeb8fe55dccd003fd1195ebd215a796fe}{material0}}.\mbox{\hyperlink{structMaterial_a27cc8a0811ea2dc434d7cc4ab9785917}{c\_spec}};}
\DoxyCodeLine{01595     \textcolor{keywordtype}{float} alpha  = scene-\/>\mbox{\hyperlink{structScene_aeb8fe55dccd003fd1195ebd215a796fe}{material0}}.\mbox{\hyperlink{structMaterial_a5e9c413095df430758f6b31c9bfb60e1}{specular\_power\_alpha}};}
\DoxyCodeLine{01596 }
\DoxyCodeLine{01597     \textcolor{keywordflow}{switch} (lighting\_mode) \{}
\DoxyCodeLine{01598     \textcolor{keywordflow}{case} \mbox{\hyperlink{Almog__Engine_8h_a3b664376e82e1cd4013e17ea17ac6501ad2872f5089e1989c79eaf9a2d83faceb}{AE\_LIGHTING\_FLAT}}:}
\DoxyCodeLine{01599         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 4; i++) \{}
\DoxyCodeLine{01600             \textcolor{keywordflow}{if} (scene-\/>\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}}.\mbox{\hyperlink{structLight__source_ac24d933710b710d1ed6d45b4696e38c8}{light\_direction\_or\_pos}}.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} == 0) \{}
\DoxyCodeLine{01601                 L = scene-\/>\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}}.\mbox{\hyperlink{structLight__source_ac24d933710b710d1ed6d45b4696e38c8}{light\_direction\_or\_pos}};}
\DoxyCodeLine{01602                 L = \mbox{\hyperlink{Almog__Engine_8h_a97027681fd682ebb13f18d00a188a9b1}{ae\_point\_normalize\_xyz}}(L);}
\DoxyCodeLine{01603                 mL = L;}
\DoxyCodeLine{01604                 \mbox{\hyperlink{Almog__Engine_8h_a7a7f28fc36bafd3717ab9c0fc5103e03}{ae\_point\_mult}}(mL, -\/1);}
\DoxyCodeLine{01605             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01606                 \mbox{\hyperlink{structPoint}{Point}} l = scene-\/>\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}}.\mbox{\hyperlink{structLight__source_ac24d933710b710d1ed6d45b4696e38c8}{light\_direction\_or\_pos}};}
\DoxyCodeLine{01607                 \mbox{\hyperlink{structPoint}{Point}} p = quad-\/>\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[i];}
\DoxyCodeLine{01608                 \mbox{\hyperlink{Almog__Engine_8h_a9575038baa976bf6b7c39cefd2f2c80b}{ae\_point\_sub\_point}}(pml, p, l);}
\DoxyCodeLine{01609                 pml = \mbox{\hyperlink{Almog__Engine_8h_a97027681fd682ebb13f18d00a188a9b1}{ae\_point\_normalize\_xyz}}(pml);}
\DoxyCodeLine{01610                 L = pml;}
\DoxyCodeLine{01611                 L.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} = 0;}
\DoxyCodeLine{01612                 mL = L;}
\DoxyCodeLine{01613                 \mbox{\hyperlink{Almog__Engine_8h_a7a7f28fc36bafd3717ab9c0fc5103e03}{ae\_point\_mult}}(mL, -\/1);}
\DoxyCodeLine{01614             \}}
\DoxyCodeLine{01615             }
\DoxyCodeLine{01616             \mbox{\hyperlink{Almog__Engine_8h_a9575038baa976bf6b7c39cefd2f2c80b}{ae\_point\_sub\_point}}(v, camera\_pos, \mbox{\hyperlink{Almog__Engine_8h_ad1f69bc7c34ba800623bdc3e693a2bcb}{ae\_quad\_get\_average\_point}}(*quad));}
\DoxyCodeLine{01617             \textcolor{keywordtype}{float} mL\_dot\_norm = \mbox{\hyperlink{Almog__Engine_8h_af776055b6fac2e29e16d4a4fbd32d91b}{ae\_point\_dot\_point}}(mL, ave\_norm);}
\DoxyCodeLine{01618             mLn2n = ave\_norm;}
\DoxyCodeLine{01619             \mbox{\hyperlink{Almog__Engine_8h_a7a7f28fc36bafd3717ab9c0fc5103e03}{ae\_point\_mult}}(mLn2n, 2 * mL\_dot\_norm);}
\DoxyCodeLine{01620             \mbox{\hyperlink{Almog__Engine_8h_a79d5f5baf43bc7a9c1c9d5ae1d3a18c3}{ae\_point\_add\_point}}(r, L, mLn2n);}
\DoxyCodeLine{01621             }
\DoxyCodeLine{01622             quad-\/>\mbox{\hyperlink{structQuad_aba6d53f3dc917e11da1715cc669589d7}{light\_intensity}}[i] = c\_ambi + scene-\/>\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}}.\mbox{\hyperlink{structLight__source_a35f7bef9375ad1c6b3d2544c53b43493}{light\_intensity}} * (c\_diff * fmaxf(mL\_dot\_norm, 0) + c\_spec * powf(fmaxf(\mbox{\hyperlink{Almog__Engine_8h_af776055b6fac2e29e16d4a4fbd32d91b}{ae\_point\_dot\_point}}(r, v), 0), alpha));}
\DoxyCodeLine{01623         \}}
\DoxyCodeLine{01624         \textcolor{keywordflow}{break};}
\DoxyCodeLine{01625     \textcolor{keywordflow}{case} \mbox{\hyperlink{Almog__Engine_8h_a3b664376e82e1cd4013e17ea17ac6501a960031a84842327b8c9061dc0f9752b6}{AE\_LIGHTING\_SMOOTH}}:}
\DoxyCodeLine{01626         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 4; i++) \{}
\DoxyCodeLine{01627             \textcolor{keywordflow}{if} (scene-\/>\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}}.\mbox{\hyperlink{structLight__source_ac24d933710b710d1ed6d45b4696e38c8}{light\_direction\_or\_pos}}.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} == 0) \{}
\DoxyCodeLine{01628                 L = scene-\/>\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}}.\mbox{\hyperlink{structLight__source_ac24d933710b710d1ed6d45b4696e38c8}{light\_direction\_or\_pos}};}
\DoxyCodeLine{01629                 L = \mbox{\hyperlink{Almog__Engine_8h_a97027681fd682ebb13f18d00a188a9b1}{ae\_point\_normalize\_xyz}}(L);}
\DoxyCodeLine{01630                 mL = L;}
\DoxyCodeLine{01631                 \mbox{\hyperlink{Almog__Engine_8h_a7a7f28fc36bafd3717ab9c0fc5103e03}{ae\_point\_mult}}(mL, -\/1);}
\DoxyCodeLine{01632             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01633                 \mbox{\hyperlink{structPoint}{Point}} l = scene-\/>\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}}.\mbox{\hyperlink{structLight__source_ac24d933710b710d1ed6d45b4696e38c8}{light\_direction\_or\_pos}};}
\DoxyCodeLine{01634                 \mbox{\hyperlink{structPoint}{Point}} p = quad-\/>\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[i];}
\DoxyCodeLine{01635                 \mbox{\hyperlink{Almog__Engine_8h_a9575038baa976bf6b7c39cefd2f2c80b}{ae\_point\_sub\_point}}(pml, p, l);}
\DoxyCodeLine{01636                 pml = \mbox{\hyperlink{Almog__Engine_8h_a97027681fd682ebb13f18d00a188a9b1}{ae\_point\_normalize\_xyz}}(pml);}
\DoxyCodeLine{01637                 L = pml;}
\DoxyCodeLine{01638                 L.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} = 0;}
\DoxyCodeLine{01639                 mL = L;}
\DoxyCodeLine{01640                 \mbox{\hyperlink{Almog__Engine_8h_a7a7f28fc36bafd3717ab9c0fc5103e03}{ae\_point\_mult}}(mL, -\/1);}
\DoxyCodeLine{01641             \}}
\DoxyCodeLine{01642             \mbox{\hyperlink{Almog__Engine_8h_a9575038baa976bf6b7c39cefd2f2c80b}{ae\_point\_sub\_point}}(v, camera\_pos, quad-\/>\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[i]);}
\DoxyCodeLine{01643             \textcolor{keywordtype}{float} mL\_dot\_norm = \mbox{\hyperlink{Almog__Engine_8h_af776055b6fac2e29e16d4a4fbd32d91b}{ae\_point\_dot\_point}}(mL, quad-\/>\mbox{\hyperlink{structQuad_a00c91a94eee9820ce31b8ee8927368f0}{normals}}[i]);}
\DoxyCodeLine{01644             mLn2n = quad-\/>\mbox{\hyperlink{structQuad_a00c91a94eee9820ce31b8ee8927368f0}{normals}}[i];}
\DoxyCodeLine{01645             \mbox{\hyperlink{Almog__Engine_8h_a7a7f28fc36bafd3717ab9c0fc5103e03}{ae\_point\_mult}}(mLn2n, 2 * mL\_dot\_norm);}
\DoxyCodeLine{01646             \mbox{\hyperlink{Almog__Engine_8h_a79d5f5baf43bc7a9c1c9d5ae1d3a18c3}{ae\_point\_add\_point}}(r, L, mLn2n);}
\DoxyCodeLine{01647             }
\DoxyCodeLine{01648             quad-\/>\mbox{\hyperlink{structQuad_aba6d53f3dc917e11da1715cc669589d7}{light\_intensity}}[i] = c\_ambi + scene-\/>\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}}.\mbox{\hyperlink{structLight__source_a35f7bef9375ad1c6b3d2544c53b43493}{light\_intensity}} * (c\_diff * fmaxf(mL\_dot\_norm, 0) + c\_spec * powf(fmaxf(\mbox{\hyperlink{Almog__Engine_8h_af776055b6fac2e29e16d4a4fbd32d91b}{ae\_point\_dot\_point}}(r, v), 0), alpha));}
\DoxyCodeLine{01649         \}}
\DoxyCodeLine{01650         \textcolor{keywordflow}{break};}
\DoxyCodeLine{01651     \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01652         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 4; i++) \{}
\DoxyCodeLine{01653             quad-\/>\mbox{\hyperlink{structQuad_aba6d53f3dc917e11da1715cc669589d7}{light\_intensity}}[i] = 1;}
\DoxyCodeLine{01654         \}}
\DoxyCodeLine{01655         \textcolor{keywordflow}{break};}
\DoxyCodeLine{01656     \}}
\DoxyCodeLine{01657 }
\DoxyCodeLine{01658     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 4; i++) \{}
\DoxyCodeLine{01659         quad-\/>\mbox{\hyperlink{structQuad_aba6d53f3dc917e11da1715cc669589d7}{light\_intensity}}[i] = fminf(1, fmaxf(0, quad-\/>\mbox{\hyperlink{structQuad_aba6d53f3dc917e11da1715cc669589d7}{light\_intensity}}[i]));}
\DoxyCodeLine{01660     \}}
\DoxyCodeLine{01661 \}}
\DoxyCodeLine{01662 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l01680}\mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{01680}} \mbox{\hyperlink{structPoint}{Point}} \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(\mbox{\hyperlink{structMat2D}{Mat2D}} plane\_p, \mbox{\hyperlink{structMat2D}{Mat2D}} plane\_n, \mbox{\hyperlink{structMat2D}{Mat2D}} line\_start, \mbox{\hyperlink{structMat2D}{Mat2D}} line\_end, \textcolor{keywordtype}{float} *t)}
\DoxyCodeLine{01681 \{}
\DoxyCodeLine{01682     \mbox{\hyperlink{Matrix2D_8h_af74e919ae2726605b4b8edfbcd639a64}{mat2D\_normalize}}(plane\_n);}
\DoxyCodeLine{01683     \textcolor{keywordtype}{float} plane\_d = -\/ \mbox{\hyperlink{Matrix2D_8h_aa71d6e00d49857849957d6abdec1eed7}{mat2D\_dot\_product}}(plane\_n, plane\_p);}
\DoxyCodeLine{01684     \textcolor{keywordtype}{float} ad = \mbox{\hyperlink{Matrix2D_8h_aa71d6e00d49857849957d6abdec1eed7}{mat2D\_dot\_product}}(line\_start, plane\_n);}
\DoxyCodeLine{01685     \textcolor{keywordtype}{float} bd = \mbox{\hyperlink{Matrix2D_8h_aa71d6e00d49857849957d6abdec1eed7}{mat2D\_dot\_product}}(line\_end, plane\_n);}
\DoxyCodeLine{01686     *t  = (-\/ plane\_d -\/ ad) / (bd -\/ ad);}
\DoxyCodeLine{01687     \mbox{\hyperlink{Matrix2D_8h_a96b3b954a60d4f9dd6ac9954945bc749}{mat2D\_sub}}(line\_end, line\_start);}
\DoxyCodeLine{01688     \mbox{\hyperlink{structMat2D}{Mat2D}} line\_start\_to\_end = line\_end;}
\DoxyCodeLine{01689     \mbox{\hyperlink{Matrix2D_8h_ab053dbc6d1eba395817707c410b227e0}{mat2D\_mult}}(line\_start\_to\_end, *t);}
\DoxyCodeLine{01690     \mbox{\hyperlink{structMat2D}{Mat2D}} line\_to\_intersection = line\_start\_to\_end;}
\DoxyCodeLine{01691     }
\DoxyCodeLine{01692     \mbox{\hyperlink{structMat2D}{Mat2D}} intersection\_p = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{01693     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(intersection\_p, 0);}
\DoxyCodeLine{01694     \mbox{\hyperlink{Matrix2D_8h_aed7c0d494d147d19864b273f91c39423}{mat2D\_add}}(intersection\_p, line\_start);}
\DoxyCodeLine{01695     \mbox{\hyperlink{Matrix2D_8h_aed7c0d494d147d19864b273f91c39423}{mat2D\_add}}(intersection\_p, line\_to\_intersection);}
\DoxyCodeLine{01696 }
\DoxyCodeLine{01697     \mbox{\hyperlink{structPoint}{Point}} ans\_p = \mbox{\hyperlink{Almog__Engine_8h_af02975c063e1ea909c3bbc94210ea85f}{ae\_mat2D\_to\_point}}(intersection\_p);}
\DoxyCodeLine{01698 }
\DoxyCodeLine{01699     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(intersection\_p);}
\DoxyCodeLine{01700 }
\DoxyCodeLine{01701     \textcolor{keywordflow}{return} ans\_p;}
\DoxyCodeLine{01702 \}}
\DoxyCodeLine{01703 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l01720}\mbox{\hyperlink{Almog__Engine_8h_a16d1ee56f32a7e62f49bdee310d580c0}{01720}} \textcolor{keywordtype}{int} \mbox{\hyperlink{Almog__Engine_8h_a16d1ee56f32a7e62f49bdee310d580c0}{ae\_line\_clip\_with\_plane}}(\mbox{\hyperlink{structPoint}{Point}} start\_in, \mbox{\hyperlink{structPoint}{Point}} end\_in, \mbox{\hyperlink{structMat2D}{Mat2D}} plane\_p, \mbox{\hyperlink{structMat2D}{Mat2D}} plane\_n, \mbox{\hyperlink{structPoint}{Point}} *start\_out, \mbox{\hyperlink{structPoint}{Point}} *end\_out)}
\DoxyCodeLine{01721 \{}
\DoxyCodeLine{01722     \mbox{\hyperlink{Almog__Engine_8h_a47b289604d96908f7b3ae5ea6235be9c}{ae\_assert\_point\_is\_valid}}(start\_in);}
\DoxyCodeLine{01723     \mbox{\hyperlink{Almog__Engine_8h_a47b289604d96908f7b3ae5ea6235be9c}{ae\_assert\_point\_is\_valid}}(end\_in);}
\DoxyCodeLine{01724 }
\DoxyCodeLine{01725     \mbox{\hyperlink{Matrix2D_8h_af74e919ae2726605b4b8edfbcd639a64}{mat2D\_normalize}}(plane\_n);}
\DoxyCodeLine{01726 }
\DoxyCodeLine{01727     \textcolor{comment}{/* if the signed distance is positive, the point lies on the "{}inside"{} of the plane */}}
\DoxyCodeLine{01728     \mbox{\hyperlink{structPoint}{Point}} inside\_points[2];}
\DoxyCodeLine{01729     \mbox{\hyperlink{structPoint}{Point}} outside\_points[2];}
\DoxyCodeLine{01730     \textcolor{keywordtype}{int} inside\_points\_count = 0;}
\DoxyCodeLine{01731     \textcolor{keywordtype}{int} outside\_points\_count = 0;}
\DoxyCodeLine{01732     }
\DoxyCodeLine{01733     \textcolor{comment}{/* calc signed distance of each point of tri\_in */}}
\DoxyCodeLine{01734     \textcolor{keywordtype}{float} d0 = \mbox{\hyperlink{Almog__Engine_8h_addb82974119ee833122b944f3c0c1b71}{ae\_signed\_dist\_point\_and\_plane}}(start\_in, plane\_p, plane\_n);}
\DoxyCodeLine{01735     \textcolor{keywordtype}{float} d1 = \mbox{\hyperlink{Almog__Engine_8h_addb82974119ee833122b944f3c0c1b71}{ae\_signed\_dist\_point\_and\_plane}}(end\_in, plane\_p, plane\_n);}
\DoxyCodeLine{01736     \textcolor{keywordtype}{float} t;}
\DoxyCodeLine{01737 }
\DoxyCodeLine{01738     \textcolor{comment}{// float epsilon = 1e-\/3;}}
\DoxyCodeLine{01739     \textcolor{keywordtype}{float} epsilon = 0;}
\DoxyCodeLine{01740     \textcolor{keywordflow}{if} (d0 >= epsilon) \{}
\DoxyCodeLine{01741         inside\_points[inside\_points\_count++] = start\_in;}
\DoxyCodeLine{01742     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01743         outside\_points[outside\_points\_count++] = start\_in;}
\DoxyCodeLine{01744     \}}
\DoxyCodeLine{01745     \textcolor{keywordflow}{if} (d1 >= epsilon) \{}
\DoxyCodeLine{01746         inside\_points[inside\_points\_count++] = end\_in;}
\DoxyCodeLine{01747     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01748         outside\_points[outside\_points\_count++] = end\_in;}
\DoxyCodeLine{01749     \}}
\DoxyCodeLine{01750 }
\DoxyCodeLine{01751     \textcolor{comment}{/* classifying the triangle points */}}
\DoxyCodeLine{01752     \textcolor{keywordflow}{if} (outside\_points\_count == 2) \{}
\DoxyCodeLine{01753         \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{01754     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (inside\_points\_count == 2) \{}
\DoxyCodeLine{01755         *start\_out = start\_in;}
\DoxyCodeLine{01756         *end\_out = end\_in;}
\DoxyCodeLine{01757         \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{01758     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (d0 >= epsilon \&\& d1 < epsilon) \{}
\DoxyCodeLine{01759         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_start = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{01760         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_end   = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{01761 }
\DoxyCodeLine{01762         *start\_out = inside\_points[0];}
\DoxyCodeLine{01763 }
\DoxyCodeLine{01764         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(inside\_points[0], line\_start);}
\DoxyCodeLine{01765         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(outside\_points[0], line\_end);}
\DoxyCodeLine{01766         *end\_out = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{01767 }
\DoxyCodeLine{01768         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_start);}
\DoxyCodeLine{01769         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_end);}
\DoxyCodeLine{01770 }
\DoxyCodeLine{01771         \mbox{\hyperlink{Almog__Engine_8h_a47b289604d96908f7b3ae5ea6235be9c}{ae\_assert\_point\_is\_valid}}(*start\_out);}
\DoxyCodeLine{01772         \mbox{\hyperlink{Almog__Engine_8h_a47b289604d96908f7b3ae5ea6235be9c}{ae\_assert\_point\_is\_valid}}(*end\_out);}
\DoxyCodeLine{01773 }
\DoxyCodeLine{01774         \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{01775     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (d1 >= epsilon \&\& d0 < epsilon) \{}
\DoxyCodeLine{01776         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_start = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{01777         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_end   = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{01778 }
\DoxyCodeLine{01779         *end\_out = inside\_points[0];}
\DoxyCodeLine{01780 }
\DoxyCodeLine{01781         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(inside\_points[0], line\_start);}
\DoxyCodeLine{01782         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(outside\_points[0], line\_end);}
\DoxyCodeLine{01783         *start\_out = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{01784 }
\DoxyCodeLine{01785         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_start);}
\DoxyCodeLine{01786         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_end);}
\DoxyCodeLine{01787 }
\DoxyCodeLine{01788         \mbox{\hyperlink{Almog__Engine_8h_a47b289604d96908f7b3ae5ea6235be9c}{ae\_assert\_point\_is\_valid}}(*start\_out);}
\DoxyCodeLine{01789         \mbox{\hyperlink{Almog__Engine_8h_a47b289604d96908f7b3ae5ea6235be9c}{ae\_assert\_point\_is\_valid}}(*end\_out);}
\DoxyCodeLine{01790 }
\DoxyCodeLine{01791         \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{01792     \}}
\DoxyCodeLine{01793     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{01794 \}}
\DoxyCodeLine{01795 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l01807}\mbox{\hyperlink{Almog__Engine_8h_addb82974119ee833122b944f3c0c1b71}{01807}} \textcolor{keywordtype}{float} \mbox{\hyperlink{Almog__Engine_8h_addb82974119ee833122b944f3c0c1b71}{ae\_signed\_dist\_point\_and\_plane}}(\mbox{\hyperlink{structPoint}{Point}} p, \mbox{\hyperlink{structMat2D}{Mat2D}} plane\_p, \mbox{\hyperlink{structMat2D}{Mat2D}} plane\_n)}
\DoxyCodeLine{01808 \{}
\DoxyCodeLine{01809     \mbox{\hyperlink{Almog__Engine_8h_a47b289604d96908f7b3ae5ea6235be9c}{ae\_assert\_point\_is\_valid}}(p);}
\DoxyCodeLine{01810 }
\DoxyCodeLine{01811     \textcolor{comment}{// mat2D\_normalize(plane\_n);}}
\DoxyCodeLine{01812     \textcolor{comment}{// Mat2D p\_mat2D = mat2D\_alloc(3, 1);}}
\DoxyCodeLine{01813     \textcolor{comment}{// ae\_point\_to\_mat2D(p, p\_mat2D);}}
\DoxyCodeLine{01814 }
\DoxyCodeLine{01815     \textcolor{comment}{// float res = mat2D\_dot\_product(plane\_n, p\_mat2D) -\/ mat2D\_dot\_product(plane\_n, plane\_p); }}
\DoxyCodeLine{01816 }
\DoxyCodeLine{01817     \textcolor{keywordtype}{float} res = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(plane\_n, 0, 0) * p.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} + \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(plane\_n, 1, 0) * p.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} + \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(plane\_n, 2, 0) * p.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} -\/ (\mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(plane\_n, 0, 0) * \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(plane\_p, 0, 0) + \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(plane\_n, 1, 0) * \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(plane\_p, 1, 0) + \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(plane\_n, 2, 0) * \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(plane\_p, 2, 0)); }
\DoxyCodeLine{01818 }
\DoxyCodeLine{01819     \textcolor{comment}{// mat2D\_free(p\_mat2D);}}
\DoxyCodeLine{01820 }
\DoxyCodeLine{01821     \textcolor{keywordflow}{return} res;}
\DoxyCodeLine{01822 \}}
\DoxyCodeLine{01823 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l01838}\mbox{\hyperlink{Almog__Engine_8h_a8c5f2139e3c08f222e1c1bf9ccb4c8b8}{01838}} \textcolor{keywordtype}{int} \mbox{\hyperlink{Almog__Engine_8h_a8c5f2139e3c08f222e1c1bf9ccb4c8b8}{ae\_tri\_clip\_with\_plane}}(\mbox{\hyperlink{structTri}{Tri}} tri\_in, \mbox{\hyperlink{structMat2D}{Mat2D}} plane\_p, \mbox{\hyperlink{structMat2D}{Mat2D}} plane\_n, \mbox{\hyperlink{structTri}{Tri}} *tri\_out1, \mbox{\hyperlink{structTri}{Tri}} *tri\_out2)}
\DoxyCodeLine{01839 \{}
\DoxyCodeLine{01840     \mbox{\hyperlink{Almog__Engine_8h_ad51295cab44c98e63a76c2f2ecaeb16c}{ae\_assert\_tri\_is\_valid}}(tri\_in);}
\DoxyCodeLine{01841 }
\DoxyCodeLine{01842     \mbox{\hyperlink{Matrix2D_8h_af74e919ae2726605b4b8edfbcd639a64}{mat2D\_normalize}}(plane\_n);}
\DoxyCodeLine{01843 }
\DoxyCodeLine{01844     \textcolor{comment}{/* if the signed distance is positive, the point lies on the "{}inside"{} of the plane */}}
\DoxyCodeLine{01845     \mbox{\hyperlink{structPoint}{Point}} inside\_points[3];}
\DoxyCodeLine{01846     \mbox{\hyperlink{structPoint}{Point}} outside\_points[3];}
\DoxyCodeLine{01847     \textcolor{keywordtype}{int} inside\_points\_count = 0;}
\DoxyCodeLine{01848     \textcolor{keywordtype}{int} outside\_points\_count = 0;}
\DoxyCodeLine{01849     \mbox{\hyperlink{structPoint}{Point}} tex\_inside\_points[3];}
\DoxyCodeLine{01850     \mbox{\hyperlink{structPoint}{Point}} tex\_outside\_points[3];}
\DoxyCodeLine{01851     \textcolor{keywordtype}{int} tex\_inside\_points\_count = 0;}
\DoxyCodeLine{01852     \textcolor{keywordtype}{int} tex\_outside\_points\_count = 0;}
\DoxyCodeLine{01853     }
\DoxyCodeLine{01854     \textcolor{comment}{/* calc signed distance of each point of tri\_in */}}
\DoxyCodeLine{01855     \textcolor{keywordtype}{float} d0 = \mbox{\hyperlink{Almog__Engine_8h_addb82974119ee833122b944f3c0c1b71}{ae\_signed\_dist\_point\_and\_plane}}(tri\_in.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0], plane\_p, plane\_n);}
\DoxyCodeLine{01856     \textcolor{keywordtype}{float} d1 = \mbox{\hyperlink{Almog__Engine_8h_addb82974119ee833122b944f3c0c1b71}{ae\_signed\_dist\_point\_and\_plane}}(tri\_in.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[1], plane\_p, plane\_n);}
\DoxyCodeLine{01857     \textcolor{keywordtype}{float} d2 = \mbox{\hyperlink{Almog__Engine_8h_addb82974119ee833122b944f3c0c1b71}{ae\_signed\_dist\_point\_and\_plane}}(tri\_in.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[2], plane\_p, plane\_n);}
\DoxyCodeLine{01858     \textcolor{keywordtype}{float} t;}
\DoxyCodeLine{01859 }
\DoxyCodeLine{01860     \textcolor{comment}{// float epsilon = 1e-\/3;}}
\DoxyCodeLine{01861     \textcolor{keywordtype}{float} epsilon = 0;}
\DoxyCodeLine{01862     \textcolor{keywordflow}{if} (d0 >= epsilon) \{}
\DoxyCodeLine{01863         inside\_points[inside\_points\_count++] = tri\_in.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0];}
\DoxyCodeLine{01864         tex\_inside\_points[tex\_inside\_points\_count++] = tri\_in.\mbox{\hyperlink{structTri_a0cbc3520ec1e9920434c9984a8f3c345}{tex\_points}}[0];}
\DoxyCodeLine{01865     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01866         outside\_points[outside\_points\_count++] = tri\_in.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0];}
\DoxyCodeLine{01867         tex\_outside\_points[tex\_outside\_points\_count++] = tri\_in.\mbox{\hyperlink{structTri_a0cbc3520ec1e9920434c9984a8f3c345}{tex\_points}}[0];}
\DoxyCodeLine{01868     \}}
\DoxyCodeLine{01869     \textcolor{keywordflow}{if} (d1 >= epsilon) \{}
\DoxyCodeLine{01870         inside\_points[inside\_points\_count++] = tri\_in.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[1];}
\DoxyCodeLine{01871         tex\_inside\_points[tex\_inside\_points\_count++] = tri\_in.\mbox{\hyperlink{structTri_a0cbc3520ec1e9920434c9984a8f3c345}{tex\_points}}[1];}
\DoxyCodeLine{01872     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01873         outside\_points[outside\_points\_count++] = tri\_in.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[1];}
\DoxyCodeLine{01874         tex\_outside\_points[tex\_outside\_points\_count++] = tri\_in.\mbox{\hyperlink{structTri_a0cbc3520ec1e9920434c9984a8f3c345}{tex\_points}}[1];}
\DoxyCodeLine{01875     \}}
\DoxyCodeLine{01876     \textcolor{keywordflow}{if} (d2 >= epsilon) \{}
\DoxyCodeLine{01877         inside\_points[inside\_points\_count++] = tri\_in.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[2];}
\DoxyCodeLine{01878         tex\_inside\_points[tex\_inside\_points\_count++] = tri\_in.\mbox{\hyperlink{structTri_a0cbc3520ec1e9920434c9984a8f3c345}{tex\_points}}[2];}
\DoxyCodeLine{01879     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{01880         outside\_points[outside\_points\_count++] = tri\_in.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[2];}
\DoxyCodeLine{01881         tex\_outside\_points[tex\_outside\_points\_count++] = tri\_in.\mbox{\hyperlink{structTri_a0cbc3520ec1e9920434c9984a8f3c345}{tex\_points}}[2];}
\DoxyCodeLine{01882     \}}
\DoxyCodeLine{01883 }
\DoxyCodeLine{01884     \textcolor{comment}{/* classifying the triangle points */}}
\DoxyCodeLine{01885     \textcolor{keywordflow}{if} (inside\_points\_count == 0) \{}
\DoxyCodeLine{01886         \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{01887     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (inside\_points\_count == 3) \{}
\DoxyCodeLine{01888         *tri\_out1 = tri\_in;}
\DoxyCodeLine{01889         \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{01890     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (inside\_points\_count == 1 \&\& outside\_points\_count == 2 \&\& d2 >= epsilon) \{}
\DoxyCodeLine{01891         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_start = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{01892         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_end   = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{01893 }
\DoxyCodeLine{01894         *tri\_out1 = tri\_in;}
\DoxyCodeLine{01895         \textcolor{comment}{// tri\_out1-\/>colors[0] = 0xFF0000;}}
\DoxyCodeLine{01896         \textcolor{comment}{// tri\_out1-\/>colors[1] = 0xFF0000;}}
\DoxyCodeLine{01897         \textcolor{comment}{// tri\_out1-\/>colors[2] = 0xFF0000;}}
\DoxyCodeLine{01898         }
\DoxyCodeLine{01899         (*tri\_out1).\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0] = inside\_points[0];}
\DoxyCodeLine{01900         (*tri\_out1).tex\_points[0] = tex\_inside\_points[0];}
\DoxyCodeLine{01901 }
\DoxyCodeLine{01902         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(inside\_points[0], line\_start);}
\DoxyCodeLine{01903         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(outside\_points[0], line\_end);}
\DoxyCodeLine{01904         (*tri\_out1).points[1] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{01905         (*tri\_out1).points[1].w = t * (outside\_points[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ inside\_points[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + inside\_points[0].w;}
\DoxyCodeLine{01906         (*tri\_out1).tex\_points[1].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = t * (tex\_outside\_points[0].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} -\/ tex\_inside\_points[0].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}}) + tex\_inside\_points[0].x;}
\DoxyCodeLine{01907         (*tri\_out1).tex\_points[1].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = t * (tex\_outside\_points[0].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} -\/ tex\_inside\_points[0].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}}) + tex\_inside\_points[0].y;}
\DoxyCodeLine{01908 }
\DoxyCodeLine{01909         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(inside\_points[0], line\_start);}
\DoxyCodeLine{01910         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(outside\_points[1], line\_end);}
\DoxyCodeLine{01911         (*tri\_out1).points[2] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{01912         (*tri\_out1).points[2].w = t * (outside\_points[1].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ inside\_points[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + inside\_points[0].w;}
\DoxyCodeLine{01913         (*tri\_out1).tex\_points[2].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = t * (tex\_outside\_points[1].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} -\/ tex\_inside\_points[0].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}}) + tex\_inside\_points[0].x;}
\DoxyCodeLine{01914         (*tri\_out1).tex\_points[2].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = t * (tex\_outside\_points[1].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} -\/ tex\_inside\_points[0].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}}) + tex\_inside\_points[0].y;}
\DoxyCodeLine{01915 }
\DoxyCodeLine{01916         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_start);}
\DoxyCodeLine{01917         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_end);}
\DoxyCodeLine{01918 }
\DoxyCodeLine{01919         \textcolor{comment}{/* fixing color ordering */}}
\DoxyCodeLine{01920         uint32\_t temp\_color = tri\_out1-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[2]; }
\DoxyCodeLine{01921         tri\_out1-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[2] = tri\_out1-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[1];}
\DoxyCodeLine{01922         tri\_out1-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[1] = tri\_out1-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[0];}
\DoxyCodeLine{01923         tri\_out1-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[0] = temp\_color;}
\DoxyCodeLine{01924 }
\DoxyCodeLine{01925         \mbox{\hyperlink{Almog__Engine_8h_ad51295cab44c98e63a76c2f2ecaeb16c}{ae\_assert\_tri\_is\_valid}}(*tri\_out1);}
\DoxyCodeLine{01926 }
\DoxyCodeLine{01927         \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{01928     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (inside\_points\_count == 1 \&\& outside\_points\_count == 2 \&\& d1 >= epsilon) \{}
\DoxyCodeLine{01929         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_start = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{01930         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_end   = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{01931 }
\DoxyCodeLine{01932         *tri\_out1 = tri\_in;}
\DoxyCodeLine{01933         \textcolor{comment}{// tri\_out1-\/>colors[0] = 0xFF0000;}}
\DoxyCodeLine{01934         \textcolor{comment}{// tri\_out1-\/>colors[1] = 0xFF0000;}}
\DoxyCodeLine{01935         \textcolor{comment}{// tri\_out1-\/>colors[2] = 0xFF0000;}}
\DoxyCodeLine{01936         }
\DoxyCodeLine{01937         (*tri\_out1).\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0] = inside\_points[0];}
\DoxyCodeLine{01938         (*tri\_out1).tex\_points[0] = tex\_inside\_points[0];}
\DoxyCodeLine{01939 }
\DoxyCodeLine{01940         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(inside\_points[0], line\_start);}
\DoxyCodeLine{01941         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(outside\_points[0], line\_end);}
\DoxyCodeLine{01942         (*tri\_out1).points[1] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{01943         (*tri\_out1).points[1].w = t * (outside\_points[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ inside\_points[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + inside\_points[0].w;}
\DoxyCodeLine{01944         (*tri\_out1).tex\_points[1].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = t * (tex\_outside\_points[0].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} -\/ tex\_inside\_points[0].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}}) + tex\_inside\_points[0].x;}
\DoxyCodeLine{01945         (*tri\_out1).tex\_points[1].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = t * (tex\_outside\_points[0].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} -\/ tex\_inside\_points[0].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}}) + tex\_inside\_points[0].y;}
\DoxyCodeLine{01946 }
\DoxyCodeLine{01947         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(inside\_points[0], line\_start);}
\DoxyCodeLine{01948         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(outside\_points[1], line\_end);}
\DoxyCodeLine{01949         (*tri\_out1).points[2] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{01950         (*tri\_out1).points[2].w = t * (outside\_points[1].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ inside\_points[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + inside\_points[0].w;}
\DoxyCodeLine{01951         (*tri\_out1).tex\_points[2].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = t * (tex\_outside\_points[1].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} -\/ tex\_inside\_points[0].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}}) + tex\_inside\_points[0].x;}
\DoxyCodeLine{01952         (*tri\_out1).tex\_points[2].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = t * (tex\_outside\_points[1].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} -\/ tex\_inside\_points[0].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}}) + tex\_inside\_points[0].y;}
\DoxyCodeLine{01953 }
\DoxyCodeLine{01954         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_start);}
\DoxyCodeLine{01955         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_end);}
\DoxyCodeLine{01956 }
\DoxyCodeLine{01957         \textcolor{comment}{/* fixing color ordering */}}
\DoxyCodeLine{01958         uint32\_t temp\_color = tri\_out1-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[2]; }
\DoxyCodeLine{01959         tri\_out1-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[2] = tri\_out1-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[1];}
\DoxyCodeLine{01960         tri\_out1-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[1] = tri\_out1-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[0];}
\DoxyCodeLine{01961         tri\_out1-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[0] = temp\_color;}
\DoxyCodeLine{01962 }
\DoxyCodeLine{01963         temp\_color = tri\_out1-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[2]; }
\DoxyCodeLine{01964         tri\_out1-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[2] = tri\_out1-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[0];}
\DoxyCodeLine{01965         tri\_out1-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[0] = temp\_color;}
\DoxyCodeLine{01966 }
\DoxyCodeLine{01967         \mbox{\hyperlink{Almog__Engine_8h_ad51295cab44c98e63a76c2f2ecaeb16c}{ae\_assert\_tri\_is\_valid}}(*tri\_out1);}
\DoxyCodeLine{01968 }
\DoxyCodeLine{01969         \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{01970     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (inside\_points\_count == 1 \&\& outside\_points\_count == 2 \&\& d0 >= epsilon) \{}
\DoxyCodeLine{01971         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_start = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{01972         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_end   = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{01973 }
\DoxyCodeLine{01974         *tri\_out1 = tri\_in;}
\DoxyCodeLine{01975         \textcolor{comment}{// tri\_out1-\/>colors[0] = 0xFF0000;}}
\DoxyCodeLine{01976         \textcolor{comment}{// tri\_out1-\/>colors[1] = 0xFF0000;}}
\DoxyCodeLine{01977         \textcolor{comment}{// tri\_out1-\/>colors[2] = 0xFF0000;}}
\DoxyCodeLine{01978         }
\DoxyCodeLine{01979         (*tri\_out1).\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0] = inside\_points[0];}
\DoxyCodeLine{01980         (*tri\_out1).tex\_points[0] = tex\_inside\_points[0];}
\DoxyCodeLine{01981 }
\DoxyCodeLine{01982         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(inside\_points[0], line\_start);}
\DoxyCodeLine{01983         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(outside\_points[0], line\_end);}
\DoxyCodeLine{01984         (*tri\_out1).points[1] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{01985         (*tri\_out1).points[1].w = t * (outside\_points[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ inside\_points[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + inside\_points[0].w;}
\DoxyCodeLine{01986         (*tri\_out1).tex\_points[1].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = t * (tex\_outside\_points[0].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} -\/ tex\_inside\_points[0].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}}) + tex\_inside\_points[0].x;}
\DoxyCodeLine{01987         (*tri\_out1).tex\_points[1].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = t * (tex\_outside\_points[0].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} -\/ tex\_inside\_points[0].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}}) + tex\_inside\_points[0].y;}
\DoxyCodeLine{01988 }
\DoxyCodeLine{01989         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(inside\_points[0], line\_start);}
\DoxyCodeLine{01990         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(outside\_points[1], line\_end);}
\DoxyCodeLine{01991         (*tri\_out1).points[2] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{01992         (*tri\_out1).points[2].w = t * (outside\_points[1].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ inside\_points[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + inside\_points[0].w;}
\DoxyCodeLine{01993         (*tri\_out1).tex\_points[2].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = t * (tex\_outside\_points[1].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} -\/ tex\_inside\_points[0].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}}) + tex\_inside\_points[0].x;}
\DoxyCodeLine{01994         (*tri\_out1).tex\_points[2].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = t * (tex\_outside\_points[1].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} -\/ tex\_inside\_points[0].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}}) + tex\_inside\_points[0].y;}
\DoxyCodeLine{01995 }
\DoxyCodeLine{01996         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_start);}
\DoxyCodeLine{01997         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_end);}
\DoxyCodeLine{01998 }
\DoxyCodeLine{01999         \mbox{\hyperlink{Almog__Engine_8h_ad51295cab44c98e63a76c2f2ecaeb16c}{ae\_assert\_tri\_is\_valid}}(*tri\_out1);}
\DoxyCodeLine{02000 }
\DoxyCodeLine{02001         \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{02002     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (inside\_points\_count == 2 \&\& outside\_points\_count == 1 \&\& d2 < epsilon) \{}
\DoxyCodeLine{02003         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_start = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02004         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_end   = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02005         }
\DoxyCodeLine{02006         *tri\_out1 = tri\_in;}
\DoxyCodeLine{02007         \textcolor{comment}{// tri\_out1-\/>colors[0] = 0x00FF00;}}
\DoxyCodeLine{02008         \textcolor{comment}{// tri\_out1-\/>colors[1] = 0x00FF00;}}
\DoxyCodeLine{02009         \textcolor{comment}{// tri\_out1-\/>colors[2] = 0x00FF00;}}
\DoxyCodeLine{02010 }
\DoxyCodeLine{02011         *tri\_out2 = tri\_in;}
\DoxyCodeLine{02012         \textcolor{comment}{// tri\_out2-\/>colors[0] = 0x0000FF;}}
\DoxyCodeLine{02013         \textcolor{comment}{// tri\_out2-\/>colors[1] = 0x0000FF;}}
\DoxyCodeLine{02014         \textcolor{comment}{// tri\_out2-\/>colors[2] = 0x0000FF;}}
\DoxyCodeLine{02015 }
\DoxyCodeLine{02016         (*tri\_out1).\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0] = inside\_points[0];}
\DoxyCodeLine{02017         (*tri\_out1).tex\_points[0] = tex\_inside\_points[0];}
\DoxyCodeLine{02018         (*tri\_out1).points[1] = inside\_points[1];}
\DoxyCodeLine{02019         (*tri\_out1).tex\_points[1] = tex\_inside\_points[1];}
\DoxyCodeLine{02020         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(inside\_points[0], line\_start);}
\DoxyCodeLine{02021         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(outside\_points[0], line\_end);}
\DoxyCodeLine{02022         (*tri\_out1).points[2] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02023         (*tri\_out1).points[2].w = t * (outside\_points[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ inside\_points[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + inside\_points[0].w;}
\DoxyCodeLine{02024         (*tri\_out1).tex\_points[2].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = t * (tex\_outside\_points[0].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} -\/ tex\_inside\_points[0].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}}) + tex\_inside\_points[0].x;}
\DoxyCodeLine{02025         (*tri\_out1).tex\_points[2].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = t * (tex\_outside\_points[0].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} -\/ tex\_inside\_points[0].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}}) + tex\_inside\_points[0].y;}
\DoxyCodeLine{02026 }
\DoxyCodeLine{02027         (*tri\_out2).points[0] = inside\_points[1];}
\DoxyCodeLine{02028         (*tri\_out2).tex\_points[0] = tex\_inside\_points[1];}
\DoxyCodeLine{02029         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(inside\_points[1], line\_start);}
\DoxyCodeLine{02030         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(outside\_points[0], line\_end);}
\DoxyCodeLine{02031         (*tri\_out2).points[1] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02032         (*tri\_out2).points[1].w = t * (outside\_points[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ inside\_points[1].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + inside\_points[1].w;}
\DoxyCodeLine{02033         (*tri\_out2).tex\_points[1].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = t * (tex\_outside\_points[0].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} -\/ tex\_inside\_points[1].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}}) + tex\_inside\_points[1].x;}
\DoxyCodeLine{02034         (*tri\_out2).tex\_points[1].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = t * (tex\_outside\_points[0].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} -\/ tex\_inside\_points[1].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}}) + tex\_inside\_points[1].y;}
\DoxyCodeLine{02035         (*tri\_out2).points[2] = (*tri\_out1).points[2];}
\DoxyCodeLine{02036         (*tri\_out2).tex\_points[2] = (*tri\_out1).tex\_points[2];}
\DoxyCodeLine{02037 }
\DoxyCodeLine{02038         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_start);}
\DoxyCodeLine{02039         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_end);}
\DoxyCodeLine{02040 }
\DoxyCodeLine{02041         \textcolor{comment}{/* fixing color ordering */}}
\DoxyCodeLine{02042         uint32\_t temp\_color = tri\_out2-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[2]; }
\DoxyCodeLine{02043         tri\_out2-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[2] = tri\_out2-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[0];}
\DoxyCodeLine{02044         tri\_out2-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[0] = tri\_out2-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[1];}
\DoxyCodeLine{02045         tri\_out2-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[1] = temp\_color;}
\DoxyCodeLine{02046 }
\DoxyCodeLine{02047         \mbox{\hyperlink{Almog__Engine_8h_ad51295cab44c98e63a76c2f2ecaeb16c}{ae\_assert\_tri\_is\_valid}}(*tri\_out1);}
\DoxyCodeLine{02048         \mbox{\hyperlink{Almog__Engine_8h_ad51295cab44c98e63a76c2f2ecaeb16c}{ae\_assert\_tri\_is\_valid}}(*tri\_out2);}
\DoxyCodeLine{02049 }
\DoxyCodeLine{02050         \textcolor{keywordflow}{return} 2;}
\DoxyCodeLine{02051     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (inside\_points\_count == 2 \&\& outside\_points\_count == 1 \&\& d1 < epsilon) \{}
\DoxyCodeLine{02052         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_start = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02053         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_end   = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02054         }
\DoxyCodeLine{02055         *tri\_out1 = tri\_in;}
\DoxyCodeLine{02056         \textcolor{comment}{// tri\_out1-\/>colors[0] = 0x00FF00;}}
\DoxyCodeLine{02057         \textcolor{comment}{// tri\_out1-\/>colors[1] = 0x00FF00;}}
\DoxyCodeLine{02058         \textcolor{comment}{// tri\_out1-\/>colors[2] = 0x00FF00;}}
\DoxyCodeLine{02059 }
\DoxyCodeLine{02060         *tri\_out2 = tri\_in;}
\DoxyCodeLine{02061         \textcolor{comment}{// tri\_out2-\/>colors[0] = 0x0000FF;}}
\DoxyCodeLine{02062         \textcolor{comment}{// tri\_out2-\/>colors[1] = 0x0000FF;}}
\DoxyCodeLine{02063         \textcolor{comment}{// tri\_out2-\/>colors[2] = 0x0000FF;}}
\DoxyCodeLine{02064 }
\DoxyCodeLine{02065         (*tri\_out1).\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0] = inside\_points[0];}
\DoxyCodeLine{02066         (*tri\_out1).tex\_points[0] = tex\_inside\_points[0];}
\DoxyCodeLine{02067         (*tri\_out1).points[1] = inside\_points[1];}
\DoxyCodeLine{02068         (*tri\_out1).tex\_points[1] = tex\_inside\_points[1];}
\DoxyCodeLine{02069         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(inside\_points[0], line\_start);}
\DoxyCodeLine{02070         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(outside\_points[0], line\_end);}
\DoxyCodeLine{02071         (*tri\_out1).points[2] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02072         (*tri\_out1).points[2].w = t * (outside\_points[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ inside\_points[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + inside\_points[0].w;}
\DoxyCodeLine{02073         (*tri\_out1).tex\_points[2].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = t * (tex\_outside\_points[0].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} -\/ tex\_inside\_points[0].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}}) + tex\_inside\_points[0].x;}
\DoxyCodeLine{02074         (*tri\_out1).tex\_points[2].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = t * (tex\_outside\_points[0].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} -\/ tex\_inside\_points[0].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}}) + tex\_inside\_points[0].y;}
\DoxyCodeLine{02075 }
\DoxyCodeLine{02076         (*tri\_out2).points[0] = inside\_points[1];}
\DoxyCodeLine{02077         (*tri\_out2).tex\_points[0] = tex\_inside\_points[1];}
\DoxyCodeLine{02078         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(inside\_points[1], line\_start);}
\DoxyCodeLine{02079         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(outside\_points[0], line\_end);}
\DoxyCodeLine{02080         (*tri\_out2).points[1] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02081         (*tri\_out2).points[1].w = t * (outside\_points[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ inside\_points[1].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + inside\_points[1].w;}
\DoxyCodeLine{02082         (*tri\_out2).tex\_points[1].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = t * (tex\_outside\_points[0].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} -\/ tex\_inside\_points[1].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}}) + tex\_inside\_points[1].x;}
\DoxyCodeLine{02083         (*tri\_out2).tex\_points[1].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = t * (tex\_outside\_points[0].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} -\/ tex\_inside\_points[1].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}}) + tex\_inside\_points[1].y;}
\DoxyCodeLine{02084         (*tri\_out2).points[2] = (*tri\_out1).points[2];}
\DoxyCodeLine{02085         (*tri\_out2).tex\_points[2] = (*tri\_out1).tex\_points[2];}
\DoxyCodeLine{02086 }
\DoxyCodeLine{02087         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_start);}
\DoxyCodeLine{02088         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_end);}
\DoxyCodeLine{02089         }
\DoxyCodeLine{02090         \textcolor{comment}{/* fixing color ordering */}}
\DoxyCodeLine{02091         uint32\_t temp\_color = tri\_out1-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[2]; }
\DoxyCodeLine{02092         tri\_out1-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[2] = tri\_out1-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[1];}
\DoxyCodeLine{02093         tri\_out1-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[1] = temp\_color;}
\DoxyCodeLine{02094         }
\DoxyCodeLine{02095         temp\_color = tri\_out2-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[2]; }
\DoxyCodeLine{02096         tri\_out2-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[2] = tri\_out2-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[0];}
\DoxyCodeLine{02097         tri\_out2-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[0] = tri\_out2-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[1];}
\DoxyCodeLine{02098         tri\_out2-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[1] = temp\_color;}
\DoxyCodeLine{02099         temp\_color = tri\_out2-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[1]; }
\DoxyCodeLine{02100         tri\_out2-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[1] = tri\_out2-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[0];}
\DoxyCodeLine{02101         tri\_out2-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[0] = temp\_color;}
\DoxyCodeLine{02102 }
\DoxyCodeLine{02103         \mbox{\hyperlink{Almog__Engine_8h_ad51295cab44c98e63a76c2f2ecaeb16c}{ae\_assert\_tri\_is\_valid}}(*tri\_out1);}
\DoxyCodeLine{02104         \mbox{\hyperlink{Almog__Engine_8h_ad51295cab44c98e63a76c2f2ecaeb16c}{ae\_assert\_tri\_is\_valid}}(*tri\_out2);}
\DoxyCodeLine{02105 }
\DoxyCodeLine{02106         \textcolor{keywordflow}{return} 2;}
\DoxyCodeLine{02107     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (inside\_points\_count == 2 \&\& outside\_points\_count == 1 \&\& d0 < epsilon) \{}
\DoxyCodeLine{02108         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_start = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02109         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_end   = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02110         }
\DoxyCodeLine{02111         *tri\_out1 = tri\_in;}
\DoxyCodeLine{02112         \textcolor{comment}{// tri\_out1-\/>colors[0] = 0x00FF00;}}
\DoxyCodeLine{02113         \textcolor{comment}{// tri\_out1-\/>colors[1] = 0x00FF00;}}
\DoxyCodeLine{02114         \textcolor{comment}{// tri\_out1-\/>colors[2] = 0x00FF00;}}
\DoxyCodeLine{02115 }
\DoxyCodeLine{02116         *tri\_out2 = tri\_in;}
\DoxyCodeLine{02117         \textcolor{comment}{// tri\_out2-\/>colors[0] = 0x0000FF;}}
\DoxyCodeLine{02118         \textcolor{comment}{// tri\_out2-\/>colors[1] = 0x0000FF;}}
\DoxyCodeLine{02119         \textcolor{comment}{// tri\_out2-\/>colors[2] = 0x0000FF;}}
\DoxyCodeLine{02120 }
\DoxyCodeLine{02121         (*tri\_out1).\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0] = inside\_points[0];}
\DoxyCodeLine{02122         (*tri\_out1).tex\_points[0] = tex\_inside\_points[0];}
\DoxyCodeLine{02123         (*tri\_out1).points[1] = inside\_points[1];}
\DoxyCodeLine{02124         (*tri\_out1).tex\_points[1] = tex\_inside\_points[1];}
\DoxyCodeLine{02125         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(inside\_points[0], line\_start);}
\DoxyCodeLine{02126         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(outside\_points[0], line\_end);}
\DoxyCodeLine{02127         (*tri\_out1).points[2] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02128         (*tri\_out1).points[2].w = t * (outside\_points[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ inside\_points[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + inside\_points[0].w;}
\DoxyCodeLine{02129         (*tri\_out1).tex\_points[2].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = t * (tex\_outside\_points[0].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} -\/ tex\_inside\_points[0].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}}) + tex\_inside\_points[0].x;}
\DoxyCodeLine{02130         (*tri\_out1).tex\_points[2].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = t * (tex\_outside\_points[0].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} -\/ tex\_inside\_points[0].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}}) + tex\_inside\_points[0].y;}
\DoxyCodeLine{02131 }
\DoxyCodeLine{02132         (*tri\_out2).points[0] = inside\_points[1];}
\DoxyCodeLine{02133         (*tri\_out2).tex\_points[0] = tex\_inside\_points[1];}
\DoxyCodeLine{02134         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(inside\_points[1], line\_start);}
\DoxyCodeLine{02135         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(outside\_points[0], line\_end);}
\DoxyCodeLine{02136         (*tri\_out2).points[1] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02137         (*tri\_out2).points[1].w = t * (outside\_points[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ inside\_points[1].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + inside\_points[1].w;}
\DoxyCodeLine{02138         (*tri\_out2).tex\_points[1].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = t * (tex\_outside\_points[0].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} -\/ tex\_inside\_points[1].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}}) + tex\_inside\_points[1].x;}
\DoxyCodeLine{02139         (*tri\_out2).tex\_points[1].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = t * (tex\_outside\_points[0].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} -\/ tex\_inside\_points[1].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}}) + tex\_inside\_points[1].y;}
\DoxyCodeLine{02140         (*tri\_out2).points[2] = (*tri\_out1).points[2];}
\DoxyCodeLine{02141         (*tri\_out2).tex\_points[2] = (*tri\_out1).tex\_points[2];}
\DoxyCodeLine{02142 }
\DoxyCodeLine{02143         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_start);}
\DoxyCodeLine{02144         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_end);}
\DoxyCodeLine{02145 }
\DoxyCodeLine{02146         \textcolor{comment}{/* fixing color ordering */}}
\DoxyCodeLine{02147         uint32\_t temp\_color = tri\_out1-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[2]; }
\DoxyCodeLine{02148         tri\_out1-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[2] = tri\_out1-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[0];}
\DoxyCodeLine{02149         tri\_out1-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[0] = tri\_out1-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[1];}
\DoxyCodeLine{02150         tri\_out1-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[1] = temp\_color;}
\DoxyCodeLine{02151 }
\DoxyCodeLine{02152         temp\_color = tri\_out2-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[2]; }
\DoxyCodeLine{02153         tri\_out2-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[2] = tri\_out2-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[1];}
\DoxyCodeLine{02154         tri\_out2-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[1] = tri\_out2-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[0];}
\DoxyCodeLine{02155         tri\_out2-\/>\mbox{\hyperlink{structTri_a37512ed111593b418219640902fa9663}{colors}}[0] = temp\_color;}
\DoxyCodeLine{02156 }
\DoxyCodeLine{02157         \mbox{\hyperlink{Almog__Engine_8h_ad51295cab44c98e63a76c2f2ecaeb16c}{ae\_assert\_tri\_is\_valid}}(*tri\_out1);}
\DoxyCodeLine{02158         \mbox{\hyperlink{Almog__Engine_8h_ad51295cab44c98e63a76c2f2ecaeb16c}{ae\_assert\_tri\_is\_valid}}(*tri\_out2);}
\DoxyCodeLine{02159 }
\DoxyCodeLine{02160         \textcolor{keywordflow}{return} 2;}
\DoxyCodeLine{02161     \}}
\DoxyCodeLine{02162     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{02163 \}}
\DoxyCodeLine{02164 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l02181}\mbox{\hyperlink{Almog__Engine_8h_aff9453f6f1fde30f7752ac03fd49aebb}{02181}} \textcolor{keywordtype}{int} \mbox{\hyperlink{Almog__Engine_8h_aff9453f6f1fde30f7752ac03fd49aebb}{ae\_quad\_clip\_with\_plane}}(\mbox{\hyperlink{structQuad}{Quad}} quad\_in, \mbox{\hyperlink{structMat2D}{Mat2D}} plane\_p, \mbox{\hyperlink{structMat2D}{Mat2D}} plane\_n, \mbox{\hyperlink{structQuad}{Quad}} *quad\_out1, \mbox{\hyperlink{structQuad}{Quad}} *quad\_out2)}
\DoxyCodeLine{02182 \{}
\DoxyCodeLine{02183     \mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{ae\_assert\_quad\_is\_valid}}(quad\_in);}
\DoxyCodeLine{02184 }
\DoxyCodeLine{02185     \mbox{\hyperlink{Matrix2D_8h_af74e919ae2726605b4b8edfbcd639a64}{mat2D\_normalize}}(plane\_n);}
\DoxyCodeLine{02186 }
\DoxyCodeLine{02187     \textcolor{comment}{/* if the signed distance is positive, the point lies on the "{}inside"{} of the plane */}}
\DoxyCodeLine{02188     \mbox{\hyperlink{structPoint}{Point}} inside\_points[4];}
\DoxyCodeLine{02189     \mbox{\hyperlink{structPoint}{Point}} outside\_points[4];}
\DoxyCodeLine{02190     \textcolor{keywordtype}{int} inside\_points\_count = 0;}
\DoxyCodeLine{02191     \textcolor{keywordtype}{int} outside\_points\_count = 0;}
\DoxyCodeLine{02192     }
\DoxyCodeLine{02193     \textcolor{comment}{/* calc signed distance of each point of tri\_in */}}
\DoxyCodeLine{02194     \textcolor{keywordtype}{float} d0 = \mbox{\hyperlink{Almog__Engine_8h_addb82974119ee833122b944f3c0c1b71}{ae\_signed\_dist\_point\_and\_plane}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0], plane\_p, plane\_n);}
\DoxyCodeLine{02195     \textcolor{keywordtype}{float} d1 = \mbox{\hyperlink{Almog__Engine_8h_addb82974119ee833122b944f3c0c1b71}{ae\_signed\_dist\_point\_and\_plane}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1], plane\_p, plane\_n);}
\DoxyCodeLine{02196     \textcolor{keywordtype}{float} d2 = \mbox{\hyperlink{Almog__Engine_8h_addb82974119ee833122b944f3c0c1b71}{ae\_signed\_dist\_point\_and\_plane}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2], plane\_p, plane\_n);}
\DoxyCodeLine{02197     \textcolor{keywordtype}{float} d3 = \mbox{\hyperlink{Almog__Engine_8h_addb82974119ee833122b944f3c0c1b71}{ae\_signed\_dist\_point\_and\_plane}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3], plane\_p, plane\_n);}
\DoxyCodeLine{02198     \textcolor{keywordtype}{float} t;}
\DoxyCodeLine{02199 }
\DoxyCodeLine{02200     \textcolor{comment}{// float epsilon = 1e-\/3;}}
\DoxyCodeLine{02201     \textcolor{keywordtype}{float} epsilon = 0;}
\DoxyCodeLine{02202     \textcolor{keywordflow}{if} (d0 >= epsilon) \{}
\DoxyCodeLine{02203         inside\_points[inside\_points\_count++] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0];}
\DoxyCodeLine{02204     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{02205         outside\_points[outside\_points\_count++] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0];}
\DoxyCodeLine{02206     \}}
\DoxyCodeLine{02207     \textcolor{keywordflow}{if} (d1 >= epsilon) \{}
\DoxyCodeLine{02208         inside\_points[inside\_points\_count++] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1];}
\DoxyCodeLine{02209     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{02210         outside\_points[outside\_points\_count++] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1];}
\DoxyCodeLine{02211     \}}
\DoxyCodeLine{02212     \textcolor{keywordflow}{if} (d2 >= epsilon) \{}
\DoxyCodeLine{02213         inside\_points[inside\_points\_count++] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2];}
\DoxyCodeLine{02214     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{02215         outside\_points[outside\_points\_count++] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2];}
\DoxyCodeLine{02216     \}}
\DoxyCodeLine{02217     \textcolor{keywordflow}{if} (d3 >= epsilon) \{}
\DoxyCodeLine{02218         inside\_points[inside\_points\_count++] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3];}
\DoxyCodeLine{02219     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{02220         outside\_points[outside\_points\_count++] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3];}
\DoxyCodeLine{02221     \}}
\DoxyCodeLine{02222 }
\DoxyCodeLine{02223     \textcolor{comment}{/* classifying the triangle points */}}
\DoxyCodeLine{02224     \textcolor{keywordflow}{if} (inside\_points\_count == 0) \{}
\DoxyCodeLine{02225         \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{02226     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (inside\_points\_count == 4) \{}
\DoxyCodeLine{02227         *quad\_out1 = quad\_in;}
\DoxyCodeLine{02228         \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{02229     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (inside\_points\_count == 1 \&\& outside\_points\_count == 3 \&\& d1 >= epsilon) \{}
\DoxyCodeLine{02230         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_start = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02231         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_end   = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02232 }
\DoxyCodeLine{02233         *quad\_out1 = quad\_in;        }
\DoxyCodeLine{02234         *quad\_out2 = quad\_in;        }
\DoxyCodeLine{02235 }
\DoxyCodeLine{02236         (*quad\_out1).\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1];}
\DoxyCodeLine{02237 }
\DoxyCodeLine{02238         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1], line\_start);}
\DoxyCodeLine{02239         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2], line\_end);}
\DoxyCodeLine{02240         (*quad\_out1).points[2] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02241         (*quad\_out1).points[2].w = t * (quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}};}
\DoxyCodeLine{02242         (*quad\_out1).colors[2] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[2];}
\DoxyCodeLine{02243 }
\DoxyCodeLine{02244         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1], line\_start);}
\DoxyCodeLine{02245         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0], line\_end);}
\DoxyCodeLine{02246         (*quad\_out1).points[0] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02247         (*quad\_out1).points[0].w = t * (quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}};}
\DoxyCodeLine{02248         (*quad\_out1).colors[0] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[0];}
\DoxyCodeLine{02249 }
\DoxyCodeLine{02250         (*quad\_out1).points[3].x = ((*quad\_out1).points[0].x + (*quad\_out1).points[2].x) / 2;}
\DoxyCodeLine{02251         (*quad\_out1).points[3].y = ((*quad\_out1).points[0].y + (*quad\_out1).points[2].y) / 2;}
\DoxyCodeLine{02252         (*quad\_out1).points[3].z = ((*quad\_out1).points[0].z + (*quad\_out1).points[2].z) / 2;}
\DoxyCodeLine{02253         (*quad\_out1).points[3].w = ((*quad\_out1).points[0].w + (*quad\_out1).points[2].w) / 2;}
\DoxyCodeLine{02254         (*quad\_out1).colors[3] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[3];}
\DoxyCodeLine{02255 }
\DoxyCodeLine{02256         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_start);}
\DoxyCodeLine{02257         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_end);}
\DoxyCodeLine{02258 }
\DoxyCodeLine{02259         \mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{ae\_assert\_quad\_is\_valid}}(*quad\_out1);}
\DoxyCodeLine{02260 }
\DoxyCodeLine{02261         \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{02262     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (inside\_points\_count == 1 \&\& outside\_points\_count == 3 \&\& d2 >= epsilon) \{}
\DoxyCodeLine{02263         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_start = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02264         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_end   = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02265 }
\DoxyCodeLine{02266         *quad\_out1 = quad\_in;        }
\DoxyCodeLine{02267         *quad\_out2 = quad\_in;        }
\DoxyCodeLine{02268 }
\DoxyCodeLine{02269         (*quad\_out1).\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2];}
\DoxyCodeLine{02270 }
\DoxyCodeLine{02271         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2], line\_start);}
\DoxyCodeLine{02272         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3], line\_end);}
\DoxyCodeLine{02273         (*quad\_out1).points[3] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02274         (*quad\_out1).points[3].w = t * (quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}};}
\DoxyCodeLine{02275         (*quad\_out1).colors[3] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[3];}
\DoxyCodeLine{02276 }
\DoxyCodeLine{02277         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2], line\_start);}
\DoxyCodeLine{02278         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1], line\_end);}
\DoxyCodeLine{02279         (*quad\_out1).points[1] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02280         (*quad\_out1).points[1].w = t * (quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}};}
\DoxyCodeLine{02281         (*quad\_out1).colors[1] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[1];}
\DoxyCodeLine{02282 }
\DoxyCodeLine{02283         (*quad\_out1).points[0].x = ((*quad\_out1).points[3].x + (*quad\_out1).points[1].x) / 2;}
\DoxyCodeLine{02284         (*quad\_out1).points[0].y = ((*quad\_out1).points[3].y + (*quad\_out1).points[1].y) / 2;}
\DoxyCodeLine{02285         (*quad\_out1).points[0].z = ((*quad\_out1).points[3].z + (*quad\_out1).points[1].z) / 2;}
\DoxyCodeLine{02286         (*quad\_out1).points[0].w = ((*quad\_out1).points[3].w + (*quad\_out1).points[1].w) / 2;}
\DoxyCodeLine{02287         (*quad\_out1).colors[0] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[0];}
\DoxyCodeLine{02288 }
\DoxyCodeLine{02289         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_start);}
\DoxyCodeLine{02290         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_end);}
\DoxyCodeLine{02291 }
\DoxyCodeLine{02292         \mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{ae\_assert\_quad\_is\_valid}}(*quad\_out1);}
\DoxyCodeLine{02293 }
\DoxyCodeLine{02294         \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{02295     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (inside\_points\_count == 1 \&\& outside\_points\_count == 3 \&\& d3 >= epsilon) \{}
\DoxyCodeLine{02296         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_start = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02297         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_end   = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02298 }
\DoxyCodeLine{02299         *quad\_out1 = quad\_in;        }
\DoxyCodeLine{02300         *quad\_out2 = quad\_in;        }
\DoxyCodeLine{02301 }
\DoxyCodeLine{02302         (*quad\_out1).\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3];}
\DoxyCodeLine{02303 }
\DoxyCodeLine{02304         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3], line\_start);}
\DoxyCodeLine{02305         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0], line\_end);}
\DoxyCodeLine{02306         (*quad\_out1).points[0] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02307         (*quad\_out1).points[0].w = t * (quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}};}
\DoxyCodeLine{02308         (*quad\_out1).colors[0] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[0];}
\DoxyCodeLine{02309 }
\DoxyCodeLine{02310         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3], line\_start);}
\DoxyCodeLine{02311         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2], line\_end);}
\DoxyCodeLine{02312         (*quad\_out1).points[2] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02313         (*quad\_out1).points[2].w = t * (quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}};}
\DoxyCodeLine{02314         (*quad\_out1).colors[2] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[2];}
\DoxyCodeLine{02315 }
\DoxyCodeLine{02316         (*quad\_out1).points[1].x = ((*quad\_out1).points[2].x + (*quad\_out1).points[0].x) / 2;}
\DoxyCodeLine{02317         (*quad\_out1).points[1].y = ((*quad\_out1).points[2].y + (*quad\_out1).points[0].y) / 2;}
\DoxyCodeLine{02318         (*quad\_out1).points[1].z = ((*quad\_out1).points[2].z + (*quad\_out1).points[0].z) / 2;}
\DoxyCodeLine{02319         (*quad\_out1).points[1].w = ((*quad\_out1).points[2].w + (*quad\_out1).points[0].w) / 2;}
\DoxyCodeLine{02320         (*quad\_out1).colors[1] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[1];}
\DoxyCodeLine{02321 }
\DoxyCodeLine{02322         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_start);}
\DoxyCodeLine{02323         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_end);}
\DoxyCodeLine{02324 }
\DoxyCodeLine{02325         \mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{ae\_assert\_quad\_is\_valid}}(*quad\_out1);}
\DoxyCodeLine{02326 }
\DoxyCodeLine{02327         \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{02328     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (inside\_points\_count == 1 \&\& outside\_points\_count == 3) \{}
\DoxyCodeLine{02329         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_start = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02330         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_end   = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02331 }
\DoxyCodeLine{02332         *quad\_out1 = quad\_in;        }
\DoxyCodeLine{02333         *quad\_out2 = quad\_in;        }
\DoxyCodeLine{02334 }
\DoxyCodeLine{02335         (*quad\_out1).\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0] = inside\_points[0];}
\DoxyCodeLine{02336 }
\DoxyCodeLine{02337         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(inside\_points[0], line\_start);}
\DoxyCodeLine{02338         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(outside\_points[0], line\_end);}
\DoxyCodeLine{02339         (*quad\_out1).points[1] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02340         (*quad\_out1).points[1].w = t * (outside\_points[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ inside\_points[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + inside\_points[0].w;}
\DoxyCodeLine{02341 }
\DoxyCodeLine{02342         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(inside\_points[0], line\_start);}
\DoxyCodeLine{02343         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(outside\_points[1], line\_end);}
\DoxyCodeLine{02344         (*quad\_out1).points[2] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02345         (*quad\_out1).points[2].w = t * (outside\_points[1].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ inside\_points[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + inside\_points[0].w;}
\DoxyCodeLine{02346 }
\DoxyCodeLine{02347         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(inside\_points[0], line\_start);}
\DoxyCodeLine{02348         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(outside\_points[2], line\_end);}
\DoxyCodeLine{02349         (*quad\_out1).points[3] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02350         (*quad\_out1).points[3].w = t * (outside\_points[2].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ inside\_points[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + inside\_points[0].w;}
\DoxyCodeLine{02351 }
\DoxyCodeLine{02352         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_start);}
\DoxyCodeLine{02353         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_end);}
\DoxyCodeLine{02354 }
\DoxyCodeLine{02355         \mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{ae\_assert\_quad\_is\_valid}}(*quad\_out1);}
\DoxyCodeLine{02356 }
\DoxyCodeLine{02357         \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{02358     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (inside\_points\_count == 2 \&\& outside\_points\_count == 2 \&\& d2 < epsilon \&\& d1 < epsilon) \{}
\DoxyCodeLine{02359         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_start = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02360         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_end   = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02361         }
\DoxyCodeLine{02362         *quad\_out1 = quad\_in;}
\DoxyCodeLine{02363 }
\DoxyCodeLine{02364         (*quad\_out1).\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3];}
\DoxyCodeLine{02365         (*quad\_out1).colors[0] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[3];}
\DoxyCodeLine{02366         (*quad\_out1).points[1] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0];}
\DoxyCodeLine{02367         (*quad\_out1).colors[1] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[0];}
\DoxyCodeLine{02368 }
\DoxyCodeLine{02369         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0], line\_start);}
\DoxyCodeLine{02370         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1], line\_end);}
\DoxyCodeLine{02371         (*quad\_out1).points[2] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02372         (*quad\_out1).points[2].w = t * (quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}};}
\DoxyCodeLine{02373         (*quad\_out1).colors[2] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[1];}
\DoxyCodeLine{02374 }
\DoxyCodeLine{02375         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3], line\_start);}
\DoxyCodeLine{02376         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2], line\_end);}
\DoxyCodeLine{02377         (*quad\_out1).points[3] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02378         (*quad\_out1).points[3].w = t * (quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}};}
\DoxyCodeLine{02379         (*quad\_out1).colors[3] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[2];}
\DoxyCodeLine{02380 }
\DoxyCodeLine{02381         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_start);}
\DoxyCodeLine{02382         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_end);}
\DoxyCodeLine{02383 }
\DoxyCodeLine{02384         \mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{ae\_assert\_quad\_is\_valid}}(*quad\_out1);}
\DoxyCodeLine{02385 }
\DoxyCodeLine{02386         \textcolor{keywordflow}{return} 2;}
\DoxyCodeLine{02387     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (inside\_points\_count == 2 \&\& outside\_points\_count == 2 \&\& d0 < epsilon \&\& d1 < epsilon) \{}
\DoxyCodeLine{02388         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_start = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02389         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_end   = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02390         }
\DoxyCodeLine{02391         *quad\_out1 = quad\_in;}
\DoxyCodeLine{02392 }
\DoxyCodeLine{02393         (*quad\_out1).\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2];}
\DoxyCodeLine{02394         (*quad\_out1).colors[0] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[2];}
\DoxyCodeLine{02395         (*quad\_out1).points[1] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3];}
\DoxyCodeLine{02396         (*quad\_out1).colors[1] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[3];}
\DoxyCodeLine{02397 }
\DoxyCodeLine{02398         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2], line\_start);}
\DoxyCodeLine{02399         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1], line\_end);}
\DoxyCodeLine{02400         (*quad\_out1).points[3] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02401         (*quad\_out1).points[3].w = t * (quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}};}
\DoxyCodeLine{02402         (*quad\_out1).colors[3] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[1];}
\DoxyCodeLine{02403 }
\DoxyCodeLine{02404         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3], line\_start);}
\DoxyCodeLine{02405         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0], line\_end);}
\DoxyCodeLine{02406         (*quad\_out1).points[2] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02407         (*quad\_out1).points[2].w = t * (quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}};}
\DoxyCodeLine{02408         (*quad\_out1).colors[2] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[0];}
\DoxyCodeLine{02409 }
\DoxyCodeLine{02410         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_start);}
\DoxyCodeLine{02411         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_end);}
\DoxyCodeLine{02412 }
\DoxyCodeLine{02413         \mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{ae\_assert\_quad\_is\_valid}}(*quad\_out1);}
\DoxyCodeLine{02414 }
\DoxyCodeLine{02415         \textcolor{keywordflow}{return} 2;}
\DoxyCodeLine{02416     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (inside\_points\_count == 2 \&\& outside\_points\_count == 2 \&\& d0 < epsilon \&\& d3 < epsilon) \{}
\DoxyCodeLine{02417         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_start = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02418         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_end   = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02419         }
\DoxyCodeLine{02420         *quad\_out1 = quad\_in;}
\DoxyCodeLine{02421 }
\DoxyCodeLine{02422         (*quad\_out1).\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1];}
\DoxyCodeLine{02423         (*quad\_out1).colors[0] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[1];}
\DoxyCodeLine{02424         (*quad\_out1).points[1] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2];}
\DoxyCodeLine{02425         (*quad\_out1).colors[1] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[2];}
\DoxyCodeLine{02426 }
\DoxyCodeLine{02427         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2], line\_start);}
\DoxyCodeLine{02428         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3], line\_end);}
\DoxyCodeLine{02429         (*quad\_out1).points[2] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02430         (*quad\_out1).points[2].w = t * (quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}};}
\DoxyCodeLine{02431         (*quad\_out1).colors[2] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[3];}
\DoxyCodeLine{02432 }
\DoxyCodeLine{02433         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1], line\_start);}
\DoxyCodeLine{02434         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0], line\_end);}
\DoxyCodeLine{02435         (*quad\_out1).points[3] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02436         (*quad\_out1).points[3].w = t * (quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}};}
\DoxyCodeLine{02437         (*quad\_out1).colors[3] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[0];}
\DoxyCodeLine{02438 }
\DoxyCodeLine{02439         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_start);}
\DoxyCodeLine{02440         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_end);}
\DoxyCodeLine{02441 }
\DoxyCodeLine{02442         \mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{ae\_assert\_quad\_is\_valid}}(*quad\_out1);}
\DoxyCodeLine{02443 }
\DoxyCodeLine{02444         \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{02445     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (inside\_points\_count == 2 \&\& outside\_points\_count == 2) \{}
\DoxyCodeLine{02446         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_start = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02447         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_end   = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02448         }
\DoxyCodeLine{02449         *quad\_out1 = quad\_in;}
\DoxyCodeLine{02450 }
\DoxyCodeLine{02451         (*quad\_out1).\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0] = inside\_points[0];}
\DoxyCodeLine{02452         (*quad\_out1).points[1] = inside\_points[1];}
\DoxyCodeLine{02453         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(inside\_points[1], line\_start);}
\DoxyCodeLine{02454         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(outside\_points[0], line\_end);}
\DoxyCodeLine{02455         (*quad\_out1).points[2] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02456         (*quad\_out1).points[2].w = t * (outside\_points[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ inside\_points[1].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + inside\_points[1].w;}
\DoxyCodeLine{02457 }
\DoxyCodeLine{02458         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(inside\_points[0], line\_start);}
\DoxyCodeLine{02459         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(outside\_points[1], line\_end);}
\DoxyCodeLine{02460         (*quad\_out1).points[3] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02461         (*quad\_out1).points[3].w = t * (outside\_points[1].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ inside\_points[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + inside\_points[0].w;}
\DoxyCodeLine{02462 }
\DoxyCodeLine{02463         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_start);}
\DoxyCodeLine{02464         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_end);}
\DoxyCodeLine{02465 }
\DoxyCodeLine{02466         \mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{ae\_assert\_quad\_is\_valid}}(*quad\_out1);}
\DoxyCodeLine{02467 }
\DoxyCodeLine{02468         \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{02469     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (inside\_points\_count == 3 \&\& outside\_points\_count == 1 \&\& d0 < epsilon) \{}
\DoxyCodeLine{02470         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_start = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02471         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_end   = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02472         }
\DoxyCodeLine{02473         *quad\_out1 = quad\_in;}
\DoxyCodeLine{02474         *quad\_out2 = quad\_in;}
\DoxyCodeLine{02475 }
\DoxyCodeLine{02476         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3], line\_start);}
\DoxyCodeLine{02477         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0], line\_end);}
\DoxyCodeLine{02478         (*quad\_out1).points[0] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02479         (*quad\_out1).points[0].w = t * (quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}};}
\DoxyCodeLine{02480         \textcolor{comment}{// adl\_interpolate\_ARGBcolor\_on\_RGB((quad\_in).colors[3], (quad\_in).colors[0], t, \&((*quad\_out1).colors[0]));}}
\DoxyCodeLine{02481 }
\DoxyCodeLine{02482         (*quad\_out2).points[1] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1];}
\DoxyCodeLine{02483         \textcolor{comment}{// (*quad\_out2).colors[1] = quad\_in.colors[1];}}
\DoxyCodeLine{02484 }
\DoxyCodeLine{02485         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1], line\_start);}
\DoxyCodeLine{02486         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0], line\_end);}
\DoxyCodeLine{02487         (*quad\_out2).points[0] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02488         (*quad\_out2).points[0].w = t * (quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}};}
\DoxyCodeLine{02489         \textcolor{comment}{// adl\_interpolate\_ARGBcolor\_on\_RGB((quad\_in).colors[1], (quad\_in).colors[0], t, \&((*quad\_out2).colors[0]));}}
\DoxyCodeLine{02490 }
\DoxyCodeLine{02491         (*quad\_out2).points[2] = (*quad\_out1).points[0];}
\DoxyCodeLine{02492         \textcolor{comment}{// (*quad\_out2).colors[2] = (*quad\_out1).colors[0];}}
\DoxyCodeLine{02493 }
\DoxyCodeLine{02494         (*quad\_out2).points[3].x = ((*quad\_out2).points[2].x + (*quad\_out2).points[0].x) / 2;}
\DoxyCodeLine{02495         (*quad\_out2).points[3].y = ((*quad\_out2).points[2].y + (*quad\_out2).points[0].y) / 2;}
\DoxyCodeLine{02496         (*quad\_out2).points[3].z = ((*quad\_out2).points[2].z + (*quad\_out2).points[0].z) / 2;}
\DoxyCodeLine{02497         (*quad\_out2).points[3].w = ((*quad\_out2).points[2].w + (*quad\_out2).points[0].w) / 2;}
\DoxyCodeLine{02498         \textcolor{comment}{// adl\_interpolate\_ARGBcolor\_on\_RGB((*quad\_out2).colors[2], (*quad\_out2).colors[0], 0.5f, \&((*quad\_out2).colors[3]));}}
\DoxyCodeLine{02499 }
\DoxyCodeLine{02500 }
\DoxyCodeLine{02501         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_start);}
\DoxyCodeLine{02502         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_end);}
\DoxyCodeLine{02503 }
\DoxyCodeLine{02504         \mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{ae\_assert\_quad\_is\_valid}}(*quad\_out1);}
\DoxyCodeLine{02505 }
\DoxyCodeLine{02506         \textcolor{keywordflow}{return} 2;}
\DoxyCodeLine{02507     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (inside\_points\_count == 3 \&\& outside\_points\_count == 1 \&\& d1 < epsilon) \{}
\DoxyCodeLine{02508         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_start = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02509         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_end   = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02510         }
\DoxyCodeLine{02511         *quad\_out1 = quad\_in;}
\DoxyCodeLine{02512         *quad\_out2 = quad\_in;}
\DoxyCodeLine{02513 }
\DoxyCodeLine{02514         (*quad\_out1).\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0];}
\DoxyCodeLine{02515         (*quad\_out1).colors[0] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[0];}
\DoxyCodeLine{02516         (*quad\_out1).points[2] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2];}
\DoxyCodeLine{02517         (*quad\_out1).colors[2] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[2];}
\DoxyCodeLine{02518         (*quad\_out1).points[3] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3];}
\DoxyCodeLine{02519         (*quad\_out1).colors[3] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[3];}
\DoxyCodeLine{02520 }
\DoxyCodeLine{02521         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2], line\_start);}
\DoxyCodeLine{02522         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1], line\_end);}
\DoxyCodeLine{02523         (*quad\_out1).points[1] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02524         (*quad\_out1).points[1].w = t * (quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}};}
\DoxyCodeLine{02525         (*quad\_out1).colors[1] = (*quad\_out1).colors[1];}
\DoxyCodeLine{02526         \textcolor{comment}{// adl\_interpolate\_ARGBcolor\_on\_RGB((quad\_in).colors[2], (quad\_in).colors[1], t, \&((*quad\_out1).colors[1]));}}
\DoxyCodeLine{02527 }
\DoxyCodeLine{02528         (*quad\_out2).points[0] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0];}
\DoxyCodeLine{02529         (*quad\_out2).colors[0] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[0];}
\DoxyCodeLine{02530         (*quad\_out2).points[3] = (*quad\_out1).points[1];}
\DoxyCodeLine{02531         (*quad\_out2).colors[3] = (*quad\_out1).colors[3];}
\DoxyCodeLine{02532 }
\DoxyCodeLine{02533         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0], line\_start);}
\DoxyCodeLine{02534         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1], line\_end);}
\DoxyCodeLine{02535         (*quad\_out2).points[1] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02536         (*quad\_out2).points[1].w = t * (quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}};}
\DoxyCodeLine{02537         (*quad\_out2).colors[1] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[1];}
\DoxyCodeLine{02538         \textcolor{comment}{// adl\_interpolate\_ARGBcolor\_on\_RGB((quad\_in).colors[0], (quad\_in).colors[1], t, \&((*quad\_out2).colors[1]));}}
\DoxyCodeLine{02539 }
\DoxyCodeLine{02540         (*quad\_out2).points[2].x = ((*quad\_out2).points[1].x + (*quad\_out2).points[3].x) / 2;}
\DoxyCodeLine{02541         (*quad\_out2).points[2].y = ((*quad\_out2).points[1].y + (*quad\_out2).points[3].y) / 2;}
\DoxyCodeLine{02542         (*quad\_out2).points[2].z = ((*quad\_out2).points[1].z + (*quad\_out2).points[3].z) / 2;}
\DoxyCodeLine{02543         (*quad\_out2).points[2].w = ((*quad\_out2).points[1].w + (*quad\_out2).points[3].w) / 2;}
\DoxyCodeLine{02544         \textcolor{comment}{// adl\_interpolate\_ARGBcolor\_on\_RGB((*quad\_out2).colors[1], (*quad\_out2).colors[3], 0.5f, \&((*quad\_out2).colors[2]));}}
\DoxyCodeLine{02545 }
\DoxyCodeLine{02546 }
\DoxyCodeLine{02547         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_start);}
\DoxyCodeLine{02548         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_end);}
\DoxyCodeLine{02549 }
\DoxyCodeLine{02550         \mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{ae\_assert\_quad\_is\_valid}}(*quad\_out1);}
\DoxyCodeLine{02551 }
\DoxyCodeLine{02552         \textcolor{keywordflow}{return} 2;}
\DoxyCodeLine{02553     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (inside\_points\_count == 3 \&\& outside\_points\_count == 1 \&\& d2 < epsilon) \{}
\DoxyCodeLine{02554         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_start = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02555         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_end   = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02556         }
\DoxyCodeLine{02557         *quad\_out1 = quad\_in;}
\DoxyCodeLine{02558         *quad\_out2 = quad\_in;}
\DoxyCodeLine{02559 }
\DoxyCodeLine{02560         (*quad\_out1).\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0];}
\DoxyCodeLine{02561         (*quad\_out1).colors[0] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[0];}
\DoxyCodeLine{02562         (*quad\_out1).points[1] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1];}
\DoxyCodeLine{02563         (*quad\_out1).colors[1] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[1];}
\DoxyCodeLine{02564         (*quad\_out1).points[3] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3];}
\DoxyCodeLine{02565         (*quad\_out1).colors[3] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[3];}
\DoxyCodeLine{02566 }
\DoxyCodeLine{02567         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1], line\_start);}
\DoxyCodeLine{02568         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2], line\_end);}
\DoxyCodeLine{02569         (*quad\_out1).points[2] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02570         (*quad\_out1).points[2].w = t * (quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}};}
\DoxyCodeLine{02571         (*quad\_out1).colors[2] = (*quad\_out1).colors[2];}
\DoxyCodeLine{02572         \textcolor{comment}{// adl\_interpolate\_ARGBcolor\_on\_RGB((quad\_in).colors[2], (quad\_in).colors[1], t, \&((*quad\_out1).colors[1]));}}
\DoxyCodeLine{02573 }
\DoxyCodeLine{02574         (*quad\_out2).points[3] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3];}
\DoxyCodeLine{02575         (*quad\_out2).colors[3] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[3];}
\DoxyCodeLine{02576         (*quad\_out2).points[0] = (*quad\_out1).points[2];}
\DoxyCodeLine{02577         (*quad\_out2).colors[0] = (*quad\_out1).colors[0];}
\DoxyCodeLine{02578 }
\DoxyCodeLine{02579         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3], line\_start);}
\DoxyCodeLine{02580         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2], line\_end);}
\DoxyCodeLine{02581         (*quad\_out2).points[2] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02582         (*quad\_out2).points[2].w = t * (quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}};}
\DoxyCodeLine{02583         (*quad\_out2).colors[2] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[2];}
\DoxyCodeLine{02584         \textcolor{comment}{// adl\_interpolate\_ARGBcolor\_on\_RGB((quad\_in).colors[0], (quad\_in).colors[1], t, \&((*quad\_out2).colors[1]));}}
\DoxyCodeLine{02585 }
\DoxyCodeLine{02586         (*quad\_out2).points[1].x = ((*quad\_out2).points[2].x + (*quad\_out2).points[0].x) / 2;}
\DoxyCodeLine{02587         (*quad\_out2).points[1].y = ((*quad\_out2).points[2].y + (*quad\_out2).points[0].y) / 2;}
\DoxyCodeLine{02588         (*quad\_out2).points[1].z = ((*quad\_out2).points[2].z + (*quad\_out2).points[0].z) / 2;}
\DoxyCodeLine{02589         (*quad\_out2).points[1].w = ((*quad\_out2).points[2].w + (*quad\_out2).points[0].w) / 2;}
\DoxyCodeLine{02590         \textcolor{comment}{// adl\_interpolate\_ARGBcolor\_on\_RGB((*quad\_out2).colors[1], (*quad\_out2).colors[3], 0.5f, \&((*quad\_out2).colors[2]));}}
\DoxyCodeLine{02591 }
\DoxyCodeLine{02592 }
\DoxyCodeLine{02593         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_start);}
\DoxyCodeLine{02594         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_end);}
\DoxyCodeLine{02595 }
\DoxyCodeLine{02596         \mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{ae\_assert\_quad\_is\_valid}}(*quad\_out1);}
\DoxyCodeLine{02597 }
\DoxyCodeLine{02598         \textcolor{keywordflow}{return} 2;}
\DoxyCodeLine{02599     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (inside\_points\_count == 3 \&\& outside\_points\_count == 1 \&\& d3 < epsilon) \{}
\DoxyCodeLine{02600         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_start = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02601         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_end   = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02602         }
\DoxyCodeLine{02603         *quad\_out1 = quad\_in;}
\DoxyCodeLine{02604         *quad\_out2 = quad\_in;}
\DoxyCodeLine{02605 }
\DoxyCodeLine{02606         (*quad\_out1).\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0];}
\DoxyCodeLine{02607         (*quad\_out1).colors[0] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[0];}
\DoxyCodeLine{02608         (*quad\_out1).points[1] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[1];}
\DoxyCodeLine{02609         (*quad\_out1).colors[1] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[1];}
\DoxyCodeLine{02610         (*quad\_out1).points[2] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2];}
\DoxyCodeLine{02611         (*quad\_out1).colors[2] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[2];}
\DoxyCodeLine{02612 }
\DoxyCodeLine{02613         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0], line\_start);}
\DoxyCodeLine{02614         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3], line\_end);}
\DoxyCodeLine{02615         (*quad\_out1).points[3] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02616         (*quad\_out1).points[3].w = t * (quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}};}
\DoxyCodeLine{02617         (*quad\_out1).colors[3] = (*quad\_out1).colors[3];}
\DoxyCodeLine{02618         \textcolor{comment}{// adl\_interpolate\_ARGBcolor\_on\_RGB((quad\_in).colors[2], (quad\_in).colors[1], t, \&((*quad\_out1).colors[1]));}}
\DoxyCodeLine{02619 }
\DoxyCodeLine{02620         (*quad\_out2).points[2] = quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2];}
\DoxyCodeLine{02621         (*quad\_out2).colors[2] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[2];}
\DoxyCodeLine{02622         (*quad\_out2).points[1] = (*quad\_out1).points[3];}
\DoxyCodeLine{02623         (*quad\_out2).colors[1] = (*quad\_out1).colors[1];}
\DoxyCodeLine{02624 }
\DoxyCodeLine{02625         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2], line\_start);}
\DoxyCodeLine{02626         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3], line\_end);}
\DoxyCodeLine{02627         (*quad\_out2).points[3] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02628         (*quad\_out2).points[3].w = t * (quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[3].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + quad\_in.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[2].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}};}
\DoxyCodeLine{02629         (*quad\_out2).colors[3] = quad\_in.\mbox{\hyperlink{structQuad_a1e9cbf4cb77c761772547fac019dccf3}{colors}}[3];}
\DoxyCodeLine{02630         \textcolor{comment}{// adl\_interpolate\_ARGBcolor\_on\_RGB((quad\_in).colors[0], (quad\_in).colors[1], t, \&((*quad\_out2).colors[1]));}}
\DoxyCodeLine{02631 }
\DoxyCodeLine{02632         (*quad\_out2).points[0].x = ((*quad\_out2).points[3].x + (*quad\_out2).points[1].x) / 2;}
\DoxyCodeLine{02633         (*quad\_out2).points[0].y = ((*quad\_out2).points[3].y + (*quad\_out2).points[1].y) / 2;}
\DoxyCodeLine{02634         (*quad\_out2).points[0].z = ((*quad\_out2).points[3].z + (*quad\_out2).points[1].z) / 2;}
\DoxyCodeLine{02635         (*quad\_out2).points[0].w = ((*quad\_out2).points[3].w + (*quad\_out2).points[1].w) / 2;}
\DoxyCodeLine{02636         \textcolor{comment}{// adl\_interpolate\_ARGBcolor\_on\_RGB((*quad\_out2).colors[1], (*quad\_out2).colors[3], 0.5f, \&((*quad\_out2).colors[2]));}}
\DoxyCodeLine{02637 }
\DoxyCodeLine{02638 }
\DoxyCodeLine{02639         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_start);}
\DoxyCodeLine{02640         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_end);}
\DoxyCodeLine{02641 }
\DoxyCodeLine{02642         \mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{ae\_assert\_quad\_is\_valid}}(*quad\_out1);}
\DoxyCodeLine{02643 }
\DoxyCodeLine{02644         \textcolor{keywordflow}{return} 2;}
\DoxyCodeLine{02645     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (inside\_points\_count == 3 \&\& outside\_points\_count == 1) \{}
\DoxyCodeLine{02646         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_start = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02647         \mbox{\hyperlink{structMat2D}{Mat2D}} line\_end   = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02648         }
\DoxyCodeLine{02649         *quad\_out1 = quad\_in;}
\DoxyCodeLine{02650 }
\DoxyCodeLine{02651         (*quad\_out1).\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0] = inside\_points[0];}
\DoxyCodeLine{02652         (*quad\_out1).points[1] = inside\_points[1];}
\DoxyCodeLine{02653         (*quad\_out1).points[2] = inside\_points[2];}
\DoxyCodeLine{02654         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(inside\_points[2], line\_start);}
\DoxyCodeLine{02655         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(outside\_points[0], line\_end);}
\DoxyCodeLine{02656         (*quad\_out1).points[3] = \mbox{\hyperlink{Almog__Engine_8h_a3fdac032dabf1b1b41cc4264ab5b3ed7}{ae\_line\_itersect\_plane}}(plane\_p, plane\_n, line\_start, line\_end, \&t);}
\DoxyCodeLine{02657         (*quad\_out1).points[3].w = t * (outside\_points[0].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} -\/ inside\_points[2].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) + inside\_points[2].w;}
\DoxyCodeLine{02658 }
\DoxyCodeLine{02659         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_start);}
\DoxyCodeLine{02660         \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(line\_end);}
\DoxyCodeLine{02661 }
\DoxyCodeLine{02662         \mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{ae\_assert\_quad\_is\_valid}}(*quad\_out1);}
\DoxyCodeLine{02663 }
\DoxyCodeLine{02664         \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{02665     \}}
\DoxyCodeLine{02666     \textcolor{keywordflow}{return} -\/1;}
\DoxyCodeLine{02667 \}}
\DoxyCodeLine{02668 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l02682}\mbox{\hyperlink{Almog__Engine_8h_a1b7def01c3bfc991682cdd645b806672}{02682}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_a1b7def01c3bfc991682cdd645b806672}{ae\_projection\_mat\_set}}(\mbox{\hyperlink{structMat2D}{Mat2D}} proj\_mat,\textcolor{keywordtype}{float} aspect\_ratio, \textcolor{keywordtype}{float} FOV\_deg, \textcolor{keywordtype}{float} z\_near, \textcolor{keywordtype}{float} z\_far)}
\DoxyCodeLine{02683 \{}
\DoxyCodeLine{02684     \mbox{\hyperlink{Almog__Engine_8h_ae0ee5af7ebeb8607977697ad6710723f}{AE\_ASSERT}}(4 == proj\_mat.\mbox{\hyperlink{structMat2D_ae9c10e24bb9e8d68c3ba96eb1cca3c5c}{cols}}); }
\DoxyCodeLine{02685     \mbox{\hyperlink{Almog__Engine_8h_ae0ee5af7ebeb8607977697ad6710723f}{AE\_ASSERT}}(4 == proj\_mat.\mbox{\hyperlink{structMat2D_ae2c1f099d11352ac91db1ff1b0c8ed0a}{rows}}); }
\DoxyCodeLine{02686     \mbox{\hyperlink{Almog__Engine_8h_ae0ee5af7ebeb8607977697ad6710723f}{AE\_ASSERT}}(FOV\_deg \&\& \textcolor{stringliteral}{"{}FOV needs to bee bigger then zero"{}});}
\DoxyCodeLine{02687 }
\DoxyCodeLine{02688     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(proj\_mat, 0);}
\DoxyCodeLine{02689 }
\DoxyCodeLine{02690     \textcolor{keywordtype}{float} field\_of\_view = 1.0f / tanf(0.5f * FOV\_deg * \mbox{\hyperlink{Matrix2D_8h_a598a3330b3c21701223ee0ca14316eca}{PI}} / 180);}
\DoxyCodeLine{02691     \textcolor{keywordtype}{float} z\_normalization = z\_far / (z\_far -\/ z\_near);}
\DoxyCodeLine{02692 }
\DoxyCodeLine{02693     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(proj\_mat, 0, 0) = aspect\_ratio * field\_of\_view;}
\DoxyCodeLine{02694     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(proj\_mat, 1, 1) = field\_of\_view;}
\DoxyCodeLine{02695     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(proj\_mat, 2, 2) = z\_normalization;}
\DoxyCodeLine{02696     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(proj\_mat, 2, 3) = 1;}
\DoxyCodeLine{02697     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(proj\_mat, 3, 2) = -\/ z\_normalization * z\_near;}
\DoxyCodeLine{02698 \}}
\DoxyCodeLine{02699 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l02716}\mbox{\hyperlink{Almog__Engine_8h_a973977dd2f135de3e1091cf8bbd0f7ff}{02716}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_a973977dd2f135de3e1091cf8bbd0f7ff}{ae\_view\_mat\_set}}(\mbox{\hyperlink{structMat2D}{Mat2D}} view\_mat, \mbox{\hyperlink{structCamera}{Camera}} camera, \mbox{\hyperlink{structMat2D}{Mat2D}} up)}
\DoxyCodeLine{02717 \{}
\DoxyCodeLine{02718     \mbox{\hyperlink{structMat2D}{Mat2D}} DCM = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3,3);}
\DoxyCodeLine{02719     \mbox{\hyperlink{structMat2D}{Mat2D}} DCM\_trans = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3,3);}
\DoxyCodeLine{02720     \mbox{\hyperlink{Matrix2D_8h_a4a9489c8a78bf80f98ec7b2b9fd0888e}{mat2D\_set\_DCM\_zyx}}(DCM, camera.\mbox{\hyperlink{structCamera_aff86483478f1228e641b98a9ddd13774}{yaw\_offset\_deg}}, camera.\mbox{\hyperlink{structCamera_ac744a4909bde4c4f58cc7b6918c8c7e3}{pitch\_offset\_deg}}, camera.\mbox{\hyperlink{structCamera_a5904daa05edae9d8ed86becf7b3e4059}{roll\_offset\_deg}});}
\DoxyCodeLine{02721     \mbox{\hyperlink{Matrix2D_8h_a18bd1d4bbab4a1fdef11f735cb3fbf5d}{mat2D\_transpose}}(DCM\_trans, DCM);}
\DoxyCodeLine{02722 }
\DoxyCodeLine{02723     \mbox{\hyperlink{structMat2D}{Mat2D}} temp\_vec = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02724     \mbox{\hyperlink{structMat2D}{Mat2D}} camera\_direction = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02725 }
\DoxyCodeLine{02726     \textcolor{comment}{/* rotating camera\_direction */}}
\DoxyCodeLine{02727     \mbox{\hyperlink{Matrix2D_8h_a54befe38bb85e4e8d07030cf3c4f9e16}{mat2D\_dot}}(camera\_direction, DCM\_trans, camera.\mbox{\hyperlink{structCamera_a1041adaac6e1d8aacd1d02319adeb3a1}{direction}});}
\DoxyCodeLine{02728 }
\DoxyCodeLine{02729     \textcolor{comment}{/* calc new forward direction */}}
\DoxyCodeLine{02730     \mbox{\hyperlink{structMat2D}{Mat2D}} new\_forward = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02731     \mbox{\hyperlink{Matrix2D_8h_a5349f2b49eb72fa91c4824b0d08f4a83}{mat2D\_copy}}(new\_forward, camera\_direction);}
\DoxyCodeLine{02732     \mbox{\hyperlink{Matrix2D_8h_ab053dbc6d1eba395817707c410b227e0}{mat2D\_mult}}(new\_forward, 1.0 / \mbox{\hyperlink{Matrix2D_8h_abda90a369811f8c2693911008994f6ec}{mat2D\_calc\_norma}}(new\_forward));}
\DoxyCodeLine{02733 }
\DoxyCodeLine{02734     \textcolor{comment}{/* calc new up direction */}}
\DoxyCodeLine{02735     \mbox{\hyperlink{Matrix2D_8h_a5349f2b49eb72fa91c4824b0d08f4a83}{mat2D\_copy}}(temp\_vec, new\_forward);}
\DoxyCodeLine{02736     \mbox{\hyperlink{Matrix2D_8h_ab053dbc6d1eba395817707c410b227e0}{mat2D\_mult}}(temp\_vec, \mbox{\hyperlink{Matrix2D_8h_aa71d6e00d49857849957d6abdec1eed7}{mat2D\_dot\_product}}(up, new\_forward));}
\DoxyCodeLine{02737     \mbox{\hyperlink{structMat2D}{Mat2D}} new\_up = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02738     \mbox{\hyperlink{Matrix2D_8h_a5349f2b49eb72fa91c4824b0d08f4a83}{mat2D\_copy}}(new\_up, up);}
\DoxyCodeLine{02739     \mbox{\hyperlink{Matrix2D_8h_a96b3b954a60d4f9dd6ac9954945bc749}{mat2D\_sub}}(new\_up, temp\_vec);}
\DoxyCodeLine{02740     \mbox{\hyperlink{Matrix2D_8h_ab053dbc6d1eba395817707c410b227e0}{mat2D\_mult}}(new\_up, 1.0 / \mbox{\hyperlink{Matrix2D_8h_abda90a369811f8c2693911008994f6ec}{mat2D\_calc\_norma}}(new\_up));}
\DoxyCodeLine{02741 }
\DoxyCodeLine{02742     \textcolor{comment}{/* calc new right direction */}}
\DoxyCodeLine{02743     \mbox{\hyperlink{structMat2D}{Mat2D}} new\_right = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02744     \mbox{\hyperlink{Matrix2D_8h_a195a44f3fe41a5c25f431b9a0c43ea48}{mat2D\_cross}}(new\_right, new\_up, new\_forward);}
\DoxyCodeLine{02745     \mbox{\hyperlink{Matrix2D_8h_ab053dbc6d1eba395817707c410b227e0}{mat2D\_mult}}(new\_right, 1.0 / \mbox{\hyperlink{Matrix2D_8h_abda90a369811f8c2693911008994f6ec}{mat2D\_calc\_norma}}(new\_right));}
\DoxyCodeLine{02746 }
\DoxyCodeLine{02747     \mbox{\hyperlink{Matrix2D_8h_a5349f2b49eb72fa91c4824b0d08f4a83}{mat2D\_copy}}(camera.\mbox{\hyperlink{structCamera_abb8a2eb94f9ef97bc23fcc3c3f220969}{camera\_x}}, new\_right);}
\DoxyCodeLine{02748     \mbox{\hyperlink{Matrix2D_8h_a5349f2b49eb72fa91c4824b0d08f4a83}{mat2D\_copy}}(camera.\mbox{\hyperlink{structCamera_a16ce40de4ecd440a4ebe700e6cb97f59}{camera\_y}}, new\_up);}
\DoxyCodeLine{02749     \mbox{\hyperlink{Matrix2D_8h_a5349f2b49eb72fa91c4824b0d08f4a83}{mat2D\_copy}}(camera.\mbox{\hyperlink{structCamera_a9c279b07c32c1a4122dcf88fa5075bdc}{camera\_z}}, new\_forward);}
\DoxyCodeLine{02750 }
\DoxyCodeLine{02751     \textcolor{comment}{/* adding offset to init\_position */}}
\DoxyCodeLine{02752     \textcolor{comment}{// mat2D\_add(camera\_pos, camera.offset\_position);}}
\DoxyCodeLine{02753 }
\DoxyCodeLine{02754     \mbox{\hyperlink{Matrix2D_8h_a5349f2b49eb72fa91c4824b0d08f4a83}{mat2D\_copy}}(temp\_vec, camera.\mbox{\hyperlink{structCamera_abb8a2eb94f9ef97bc23fcc3c3f220969}{camera\_x}});}
\DoxyCodeLine{02755     \mbox{\hyperlink{Matrix2D_8h_ab053dbc6d1eba395817707c410b227e0}{mat2D\_mult}}(temp\_vec, \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(camera.\mbox{\hyperlink{structCamera_aca1b0a8e748059f79a00ab1a0c775624}{offset\_position}}, 0, 0));}
\DoxyCodeLine{02756     \mbox{\hyperlink{Matrix2D_8h_aed7c0d494d147d19864b273f91c39423}{mat2D\_add}}(camera.\mbox{\hyperlink{structCamera_adc5641764d588d64baeb2c9a5773d2e0}{current\_position}}, temp\_vec);}
\DoxyCodeLine{02757     \mbox{\hyperlink{Matrix2D_8h_a5349f2b49eb72fa91c4824b0d08f4a83}{mat2D\_copy}}(temp\_vec, camera.\mbox{\hyperlink{structCamera_a16ce40de4ecd440a4ebe700e6cb97f59}{camera\_y}});}
\DoxyCodeLine{02758     \mbox{\hyperlink{Matrix2D_8h_ab053dbc6d1eba395817707c410b227e0}{mat2D\_mult}}(temp\_vec, \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(camera.\mbox{\hyperlink{structCamera_aca1b0a8e748059f79a00ab1a0c775624}{offset\_position}}, 1, 0));}
\DoxyCodeLine{02759     \mbox{\hyperlink{Matrix2D_8h_aed7c0d494d147d19864b273f91c39423}{mat2D\_add}}(camera.\mbox{\hyperlink{structCamera_adc5641764d588d64baeb2c9a5773d2e0}{current\_position}}, temp\_vec);}
\DoxyCodeLine{02760     \mbox{\hyperlink{Matrix2D_8h_a5349f2b49eb72fa91c4824b0d08f4a83}{mat2D\_copy}}(temp\_vec, camera.\mbox{\hyperlink{structCamera_a9c279b07c32c1a4122dcf88fa5075bdc}{camera\_z}});}
\DoxyCodeLine{02761     \mbox{\hyperlink{Matrix2D_8h_ab053dbc6d1eba395817707c410b227e0}{mat2D\_mult}}(temp\_vec, \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(camera.\mbox{\hyperlink{structCamera_aca1b0a8e748059f79a00ab1a0c775624}{offset\_position}}, 2, 0));}
\DoxyCodeLine{02762     \mbox{\hyperlink{Matrix2D_8h_aed7c0d494d147d19864b273f91c39423}{mat2D\_add}}(camera.\mbox{\hyperlink{structCamera_adc5641764d588d64baeb2c9a5773d2e0}{current\_position}}, temp\_vec);}
\DoxyCodeLine{02763 }
\DoxyCodeLine{02764     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(camera.\mbox{\hyperlink{structCamera_aca1b0a8e748059f79a00ab1a0c775624}{offset\_position}}, 0);}
\DoxyCodeLine{02765 }
\DoxyCodeLine{02766     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(view\_mat, 0, 0) = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(new\_right, 0, 0);}
\DoxyCodeLine{02767     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(view\_mat, 0, 1) = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(new\_up, 0, 0);}
\DoxyCodeLine{02768     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(view\_mat, 0, 2) = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(new\_forward, 0, 0);}
\DoxyCodeLine{02769     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(view\_mat, 0, 3) = 0;}
\DoxyCodeLine{02770     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(view\_mat, 1, 0) = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(new\_right, 1, 0);}
\DoxyCodeLine{02771     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(view\_mat, 1, 1) = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(new\_up, 1, 0);}
\DoxyCodeLine{02772     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(view\_mat, 1, 2) = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(new\_forward, 1, 0);}
\DoxyCodeLine{02773     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(view\_mat, 1, 3) = 0;}
\DoxyCodeLine{02774     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(view\_mat, 2, 0) = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(new\_right, 2, 0);}
\DoxyCodeLine{02775     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(view\_mat, 2, 1) = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(new\_up, 2, 0);}
\DoxyCodeLine{02776     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(view\_mat, 2, 2) = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(new\_forward, 2, 0);}
\DoxyCodeLine{02777     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(view\_mat, 2, 3) = 0;}
\DoxyCodeLine{02778     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(view\_mat, 3, 0) = -\/ \mbox{\hyperlink{Matrix2D_8h_aa71d6e00d49857849957d6abdec1eed7}{mat2D\_dot\_product}}(camera.\mbox{\hyperlink{structCamera_adc5641764d588d64baeb2c9a5773d2e0}{current\_position}}, new\_right);}
\DoxyCodeLine{02779     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(view\_mat, 3, 1) = -\/ \mbox{\hyperlink{Matrix2D_8h_aa71d6e00d49857849957d6abdec1eed7}{mat2D\_dot\_product}}(camera.\mbox{\hyperlink{structCamera_adc5641764d588d64baeb2c9a5773d2e0}{current\_position}}, new\_up);}
\DoxyCodeLine{02780     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(view\_mat, 3, 2) = -\/ \mbox{\hyperlink{Matrix2D_8h_aa71d6e00d49857849957d6abdec1eed7}{mat2D\_dot\_product}}(camera.\mbox{\hyperlink{structCamera_adc5641764d588d64baeb2c9a5773d2e0}{current\_position}}, new\_forward);}
\DoxyCodeLine{02781     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(view\_mat, 3, 3) = 1;}
\DoxyCodeLine{02782 }
\DoxyCodeLine{02783 }
\DoxyCodeLine{02784     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(temp\_vec);}
\DoxyCodeLine{02785     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(new\_forward);}
\DoxyCodeLine{02786     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(new\_up);}
\DoxyCodeLine{02787     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(new\_right);}
\DoxyCodeLine{02788     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(DCM);}
\DoxyCodeLine{02789     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(DCM\_trans);}
\DoxyCodeLine{02790     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(camera\_direction);}
\DoxyCodeLine{02791 \}}
\DoxyCodeLine{02792 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l02806}\mbox{\hyperlink{Almog__Engine_8h_a45d3a5d37afa1cc50d2920d8684a5efc}{02806}} \mbox{\hyperlink{structPoint}{Point}} \mbox{\hyperlink{Almog__Engine_8h_a45d3a5d37afa1cc50d2920d8684a5efc}{ae\_point\_project\_world2screen}}(\mbox{\hyperlink{structMat2D}{Mat2D}} view\_mat, \mbox{\hyperlink{structMat2D}{Mat2D}} proj\_mat, \mbox{\hyperlink{structPoint}{Point}} src, \textcolor{keywordtype}{int} window\_w, \textcolor{keywordtype}{int} window\_h)}
\DoxyCodeLine{02807 \{}
\DoxyCodeLine{02808     \mbox{\hyperlink{structPoint}{Point}} view\_point = \mbox{\hyperlink{Almog__Engine_8h_ad43833aa381862dba7a1e91e81260103}{ae\_point\_project\_world2view}}(view\_mat, src);}
\DoxyCodeLine{02809     \mbox{\hyperlink{structPoint}{Point}} screen\_point = \mbox{\hyperlink{Almog__Engine_8h_ae10d1bf00c014c797936ebea24b4e81a}{ae\_point\_project\_view2screen}}(proj\_mat, view\_point, window\_w, window\_h);}
\DoxyCodeLine{02810 }
\DoxyCodeLine{02811     \textcolor{keywordflow}{return} screen\_point;}
\DoxyCodeLine{02812 \}}
\DoxyCodeLine{02813 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l02824}\mbox{\hyperlink{Almog__Engine_8h_ad43833aa381862dba7a1e91e81260103}{02824}} \mbox{\hyperlink{structPoint}{Point}} \mbox{\hyperlink{Almog__Engine_8h_ad43833aa381862dba7a1e91e81260103}{ae\_point\_project\_world2view}}(\mbox{\hyperlink{structMat2D}{Mat2D}} view\_mat, \mbox{\hyperlink{structPoint}{Point}} src)}
\DoxyCodeLine{02825 \{}
\DoxyCodeLine{02826     \mbox{\hyperlink{Almog__Engine_8h_a47b289604d96908f7b3ae5ea6235be9c}{ae\_assert\_point\_is\_valid}}(src);}
\DoxyCodeLine{02827 }
\DoxyCodeLine{02828     \mbox{\hyperlink{structMat2D}{Mat2D}} src\_point\_mat = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(1,4);}
\DoxyCodeLine{02829     \mbox{\hyperlink{structMat2D}{Mat2D}} des\_point\_mat = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(1,4);}
\DoxyCodeLine{02830 }
\DoxyCodeLine{02831     \mbox{\hyperlink{structPoint}{Point}} des\_point = \{0\};}
\DoxyCodeLine{02832 }
\DoxyCodeLine{02833     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(src\_point\_mat, 0, 0) = src.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}};}
\DoxyCodeLine{02834     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(src\_point\_mat, 0, 1) = src.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}};}
\DoxyCodeLine{02835     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(src\_point\_mat, 0, 2) = src.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}};}
\DoxyCodeLine{02836     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(src\_point\_mat, 0, 3) = 1;}
\DoxyCodeLine{02837 }
\DoxyCodeLine{02838     \mbox{\hyperlink{Matrix2D_8h_a54befe38bb85e4e8d07030cf3c4f9e16}{mat2D\_dot}}(des\_point\_mat, src\_point\_mat, view\_mat);}
\DoxyCodeLine{02839 }
\DoxyCodeLine{02840     \textcolor{keywordtype}{double} w = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(des\_point\_mat, 0, 3);}
\DoxyCodeLine{02841     \mbox{\hyperlink{Almog__Engine_8h_ae0ee5af7ebeb8607977697ad6710723f}{AE\_ASSERT}}(w == 1);}
\DoxyCodeLine{02842     des\_point.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(des\_point\_mat, 0, 0) / w;}
\DoxyCodeLine{02843     des\_point.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(des\_point\_mat, 0, 1) / w;}
\DoxyCodeLine{02844     des\_point.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(des\_point\_mat, 0, 2) / w;}
\DoxyCodeLine{02845     des\_point.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} = w;}
\DoxyCodeLine{02846 }
\DoxyCodeLine{02847     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(src\_point\_mat);}
\DoxyCodeLine{02848     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(des\_point\_mat);}
\DoxyCodeLine{02849 }
\DoxyCodeLine{02850     \textcolor{keywordflow}{return} des\_point;}
\DoxyCodeLine{02851 }
\DoxyCodeLine{02852 \}}
\DoxyCodeLine{02853 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l02870}\mbox{\hyperlink{Almog__Engine_8h_ae10d1bf00c014c797936ebea24b4e81a}{02870}} \mbox{\hyperlink{structPoint}{Point}} \mbox{\hyperlink{Almog__Engine_8h_ae10d1bf00c014c797936ebea24b4e81a}{ae\_point\_project\_view2screen}}(\mbox{\hyperlink{structMat2D}{Mat2D}} proj\_mat, \mbox{\hyperlink{structPoint}{Point}} src, \textcolor{keywordtype}{int} window\_w, \textcolor{keywordtype}{int} window\_h)}
\DoxyCodeLine{02871 \{}
\DoxyCodeLine{02872     \mbox{\hyperlink{Almog__Engine_8h_a47b289604d96908f7b3ae5ea6235be9c}{ae\_assert\_point\_is\_valid}}(src);}
\DoxyCodeLine{02873 }
\DoxyCodeLine{02874     \mbox{\hyperlink{structMat2D}{Mat2D}} src\_point\_mat = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(1,4);}
\DoxyCodeLine{02875     \mbox{\hyperlink{structMat2D}{Mat2D}} des\_point\_mat = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(1,4);}
\DoxyCodeLine{02876     \mbox{\hyperlink{structPoint}{Point}} des;}
\DoxyCodeLine{02877 }
\DoxyCodeLine{02878     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(src\_point\_mat, 0, 0) = src.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}};}
\DoxyCodeLine{02879     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(src\_point\_mat, 0, 1) = src.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}};}
\DoxyCodeLine{02880     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(src\_point\_mat, 0, 2) = src.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}};}
\DoxyCodeLine{02881     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(src\_point\_mat, 0, 3) = 1;}
\DoxyCodeLine{02882 }
\DoxyCodeLine{02883     \mbox{\hyperlink{Matrix2D_8h_a54befe38bb85e4e8d07030cf3c4f9e16}{mat2D\_dot}}(des\_point\_mat, src\_point\_mat, proj\_mat);}
\DoxyCodeLine{02884 }
\DoxyCodeLine{02885     \textcolor{keywordtype}{double} w = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(des\_point\_mat, 0, 3);}
\DoxyCodeLine{02886     \textcolor{keywordflow}{if} (fabs(w) > 1e-\/3) \{}
\DoxyCodeLine{02887         des.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(des\_point\_mat, 0, 0) / w;}
\DoxyCodeLine{02888         des.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(des\_point\_mat, 0, 1) / w;}
\DoxyCodeLine{02889         des.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(des\_point\_mat, 0, 2) / w;}
\DoxyCodeLine{02890         des.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} = w;}
\DoxyCodeLine{02891     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{02892         \textcolor{comment}{// des.x = MAT2D\_AT(des\_point\_mat, 0, 0);}}
\DoxyCodeLine{02893         \textcolor{comment}{// des.y = MAT2D\_AT(des\_point\_mat, 0, 1);}}
\DoxyCodeLine{02894         \textcolor{comment}{// des.z = MAT2D\_AT(des\_point\_mat, 0, 2);}}
\DoxyCodeLine{02895         \textcolor{comment}{// des.w = 1;}}
\DoxyCodeLine{02896 }
\DoxyCodeLine{02897         des.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = 0;}
\DoxyCodeLine{02898         des.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = 0;}
\DoxyCodeLine{02899         des.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} = 0;}
\DoxyCodeLine{02900         des.\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} = 1;}
\DoxyCodeLine{02901     \}}
\DoxyCodeLine{02902 }
\DoxyCodeLine{02903     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(src\_point\_mat);}
\DoxyCodeLine{02904     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(des\_point\_mat);}
\DoxyCodeLine{02905 }
\DoxyCodeLine{02906     \textcolor{comment}{/* scale into view */}}
\DoxyCodeLine{02907     des.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} += 1;}
\DoxyCodeLine{02908     des.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} += 1;}
\DoxyCodeLine{02909 }
\DoxyCodeLine{02910     des.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} *= 0.5f * window\_w;}
\DoxyCodeLine{02911     des.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} *= 0.5f * window\_h;}
\DoxyCodeLine{02912 }
\DoxyCodeLine{02913     \textcolor{keywordflow}{return} des;}
\DoxyCodeLine{02914 \}}
\DoxyCodeLine{02915 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l02933}\mbox{\hyperlink{Almog__Engine_8h_ae7ed56cd28c920fcd190a3d8ff3e0283}{02933}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_ae7ed56cd28c920fcd190a3d8ff3e0283}{ae\_line\_project\_world2screen}}(\mbox{\hyperlink{structMat2D}{Mat2D}} view\_mat, \mbox{\hyperlink{structMat2D}{Mat2D}} proj\_mat, \mbox{\hyperlink{structPoint}{Point}} start\_src, \mbox{\hyperlink{structPoint}{Point}} end\_src, \textcolor{keywordtype}{int} window\_w, \textcolor{keywordtype}{int} window\_h, \mbox{\hyperlink{structPoint}{Point}} *start\_des, \mbox{\hyperlink{structPoint}{Point}} *end\_des, \mbox{\hyperlink{structScene}{Scene}} *scene)}
\DoxyCodeLine{02934 \{}
\DoxyCodeLine{02935     \mbox{\hyperlink{structPoint}{Point}} start\_view\_point = \mbox{\hyperlink{Almog__Engine_8h_ad43833aa381862dba7a1e91e81260103}{ae\_point\_project\_world2view}}(view\_mat, start\_src);}
\DoxyCodeLine{02936     \mbox{\hyperlink{structPoint}{Point}} end\_view\_point = \mbox{\hyperlink{Almog__Engine_8h_ad43833aa381862dba7a1e91e81260103}{ae\_point\_project\_world2view}}(view\_mat, end\_src);}
\DoxyCodeLine{02937 }
\DoxyCodeLine{02938     \mbox{\hyperlink{structMat2D}{Mat2D}} z\_p = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02939     \mbox{\hyperlink{structMat2D}{Mat2D}} z\_n = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{02940     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(z\_p, 0);}
\DoxyCodeLine{02941     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(z\_n, 0);}
\DoxyCodeLine{02942     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(z\_p, 2, 0) = scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a14ebc5ce9490721428eaf1ca023322f9}{z\_near}}+0.01;}
\DoxyCodeLine{02943     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(z\_n, 2, 0) = 1;}
\DoxyCodeLine{02944 }
\DoxyCodeLine{02945     \mbox{\hyperlink{structPoint}{Point}} clipped\_start\_view\_point = \{0\}, clipped\_end\_view\_point = \{0\};}
\DoxyCodeLine{02946     \textcolor{keywordtype}{int} rc = \mbox{\hyperlink{Almog__Engine_8h_a16d1ee56f32a7e62f49bdee310d580c0}{ae\_line\_clip\_with\_plane}}(start\_view\_point, end\_view\_point, z\_p, z\_n, \&clipped\_start\_view\_point, \&clipped\_end\_view\_point);           }
\DoxyCodeLine{02947 }
\DoxyCodeLine{02948     \textcolor{keywordflow}{if} (rc == -\/1) \{}
\DoxyCodeLine{02949         fprintf(stderr, \textcolor{stringliteral}{"{}\%s:\%d: [error] problem with clipping lines\(\backslash\)n"{}}, \_\_FILE\_\_, \_\_LINE\_\_);}
\DoxyCodeLine{02950         exit(1);}
\DoxyCodeLine{02951     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (rc == 0) \{}
\DoxyCodeLine{02952         clipped\_start\_view\_point = (\mbox{\hyperlink{structPoint}{Point}})\{-\/1,-\/1,1,1\};}
\DoxyCodeLine{02953         clipped\_end\_view\_point = (\mbox{\hyperlink{structPoint}{Point}})\{-\/1,-\/1,1,1\};}
\DoxyCodeLine{02954         start\_view\_point = clipped\_start\_view\_point;}
\DoxyCodeLine{02955         end\_view\_point = clipped\_end\_view\_point;}
\DoxyCodeLine{02956         }
\DoxyCodeLine{02957         *start\_des = start\_view\_point;}
\DoxyCodeLine{02958         *end\_des = end\_view\_point;}
\DoxyCodeLine{02959         \textcolor{keywordflow}{return};}
\DoxyCodeLine{02960 }
\DoxyCodeLine{02961     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (rc == 1) \{}
\DoxyCodeLine{02962         start\_view\_point = clipped\_start\_view\_point;}
\DoxyCodeLine{02963         end\_view\_point = clipped\_end\_view\_point;}
\DoxyCodeLine{02964     \}}
\DoxyCodeLine{02965 }
\DoxyCodeLine{02966 }
\DoxyCodeLine{02967     \mbox{\hyperlink{structPoint}{Point}} start\_screen\_point = \mbox{\hyperlink{Almog__Engine_8h_ae10d1bf00c014c797936ebea24b4e81a}{ae\_point\_project\_view2screen}}(proj\_mat, start\_view\_point, window\_w, window\_h);}
\DoxyCodeLine{02968     \mbox{\hyperlink{structPoint}{Point}} end\_screen\_point = \mbox{\hyperlink{Almog__Engine_8h_ae10d1bf00c014c797936ebea24b4e81a}{ae\_point\_project\_view2screen}}(proj\_mat, end\_view\_point, window\_w, window\_h);}
\DoxyCodeLine{02969 }
\DoxyCodeLine{02970     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(z\_p);}
\DoxyCodeLine{02971     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(z\_n);}
\DoxyCodeLine{02972 }
\DoxyCodeLine{02973     *start\_des = start\_screen\_point;}
\DoxyCodeLine{02974     *end\_des = end\_screen\_point;}
\DoxyCodeLine{02975 }
\DoxyCodeLine{02976 \}}
\DoxyCodeLine{02977 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l02988}\mbox{\hyperlink{Almog__Engine_8h_a1c1797fd06019133cacb5329fa1fe24e}{02988}} \mbox{\hyperlink{structTri}{Tri}} \mbox{\hyperlink{Almog__Engine_8h_a1c1797fd06019133cacb5329fa1fe24e}{ae\_tri\_transform\_to\_view}}(\mbox{\hyperlink{structMat2D}{Mat2D}} view\_mat, \mbox{\hyperlink{structTri}{Tri}} tri)}
\DoxyCodeLine{02989 \{}
\DoxyCodeLine{02990     \mbox{\hyperlink{Almog__Engine_8h_ad51295cab44c98e63a76c2f2ecaeb16c}{ae\_assert\_tri\_is\_valid}}(tri);}
\DoxyCodeLine{02991 }
\DoxyCodeLine{02992     \mbox{\hyperlink{structMat2D}{Mat2D}} src\_point\_mat = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(1,4);}
\DoxyCodeLine{02993     \mbox{\hyperlink{structMat2D}{Mat2D}} des\_point\_mat = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(1,4);}
\DoxyCodeLine{02994 }
\DoxyCodeLine{02995     \mbox{\hyperlink{structTri}{Tri}} des\_tri = tri;}
\DoxyCodeLine{02996 }
\DoxyCodeLine{02997     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 3; i++) \{}
\DoxyCodeLine{02998         \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(src\_point\_mat, 0, 0) = tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[i].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}};}
\DoxyCodeLine{02999         \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(src\_point\_mat, 0, 1) = tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[i].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}};}
\DoxyCodeLine{03000         \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(src\_point\_mat, 0, 2) = tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[i].\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}};}
\DoxyCodeLine{03001         \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(src\_point\_mat, 0, 3) = 1;}
\DoxyCodeLine{03002 }
\DoxyCodeLine{03003         \mbox{\hyperlink{Matrix2D_8h_a54befe38bb85e4e8d07030cf3c4f9e16}{mat2D\_dot}}(des\_point\_mat, src\_point\_mat, view\_mat);}
\DoxyCodeLine{03004 }
\DoxyCodeLine{03005         \textcolor{keywordtype}{double} w = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(des\_point\_mat, 0, 3);}
\DoxyCodeLine{03006         \mbox{\hyperlink{Almog__Engine_8h_ae0ee5af7ebeb8607977697ad6710723f}{AE\_ASSERT}}(w == 1);}
\DoxyCodeLine{03007         des\_tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[i].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(des\_point\_mat, 0, 0) / w;}
\DoxyCodeLine{03008         des\_tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[i].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(des\_point\_mat, 0, 1) / w;}
\DoxyCodeLine{03009         des\_tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[i].\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(des\_point\_mat, 0, 2) / w;}
\DoxyCodeLine{03010         des\_tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[i].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} = w;}
\DoxyCodeLine{03011     \}}
\DoxyCodeLine{03012 }
\DoxyCodeLine{03013     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(src\_point\_mat);}
\DoxyCodeLine{03014     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(des\_point\_mat);}
\DoxyCodeLine{03015 }
\DoxyCodeLine{03016     \mbox{\hyperlink{Almog__Engine_8h_ad51295cab44c98e63a76c2f2ecaeb16c}{ae\_assert\_tri\_is\_valid}}(des\_tri);}
\DoxyCodeLine{03017 }
\DoxyCodeLine{03018     \textcolor{keywordflow}{return} des\_tri;}
\DoxyCodeLine{03019 \}}
\DoxyCodeLine{03020 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l03038}\mbox{\hyperlink{Almog__Engine_8h_a58de2ce54cb320d8cade6a8de95d89d3}{03038}} \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} \mbox{\hyperlink{Almog__Engine_8h_a58de2ce54cb320d8cade6a8de95d89d3}{ae\_tri\_project\_world2screen}}(\mbox{\hyperlink{structMat2D}{Mat2D}} proj\_mat, \mbox{\hyperlink{structMat2D}{Mat2D}} view\_mat, \mbox{\hyperlink{structTri}{Tri}} tri, \textcolor{keywordtype}{int} window\_w, \textcolor{keywordtype}{int} window\_h, \mbox{\hyperlink{structScene}{Scene}} *scene, \mbox{\hyperlink{Almog__Engine_8h_a3b664376e82e1cd4013e17ea17ac6501}{Lighting\_mode}} lighting\_mode)}
\DoxyCodeLine{03039 \{}
\DoxyCodeLine{03040     \mbox{\hyperlink{Almog__Engine_8h_ad51295cab44c98e63a76c2f2ecaeb16c}{ae\_assert\_tri\_is\_valid}}(tri);}
\DoxyCodeLine{03041 }
\DoxyCodeLine{03042     \mbox{\hyperlink{structMat2D}{Mat2D}} tri\_normal = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03043     \mbox{\hyperlink{structMat2D}{Mat2D}} temp\_camera2tri = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03044     \mbox{\hyperlink{structMat2D}{Mat2D}} camera2tri = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(1, 3);}
\DoxyCodeLine{03045     \mbox{\hyperlink{structMat2D}{Mat2D}} dot\_product = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(1, 1);}
\DoxyCodeLine{03046     \mbox{\hyperlink{structTri}{Tri}} des\_tri = tri;}
\DoxyCodeLine{03047 }
\DoxyCodeLine{03048     \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0], temp\_camera2tri);}
\DoxyCodeLine{03049     \mbox{\hyperlink{Matrix2D_8h_a96b3b954a60d4f9dd6ac9954945bc749}{mat2D\_sub}}(temp\_camera2tri, scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_adc5641764d588d64baeb2c9a5773d2e0}{current\_position}});}
\DoxyCodeLine{03050     \mbox{\hyperlink{Matrix2D_8h_a18bd1d4bbab4a1fdef11f735cb3fbf5d}{mat2D\_transpose}}(camera2tri, temp\_camera2tri);}
\DoxyCodeLine{03051 }
\DoxyCodeLine{03052     \textcolor{comment}{/* calc lighting intensity of tri */}}
\DoxyCodeLine{03053 \textcolor{preprocessor}{    \#if 1}}
\DoxyCodeLine{03054         \mbox{\hyperlink{Almog__Engine_8h_abbea9d10462f28e6e52352a6c36ffabd}{ae\_tri\_calc\_light\_intensity}}(\&des\_tri, scene, lighting\_mode);}
\DoxyCodeLine{03055 \textcolor{preprocessor}{    \#else}}
\DoxyCodeLine{03056     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 3; i++) \{}
\DoxyCodeLine{03057         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(tri.\mbox{\hyperlink{structTri_a3614ec76d2b41cb7f1cffc66cd5482ec}{normals}}[i], tri\_normal);}
\DoxyCodeLine{03058         \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(dot\_product, 0, 0) = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(light\_direction, 0, 0) * \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(tri\_normal, 0, 0) + \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(light\_direction, 1, 0) * \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(tri\_normal, 1, 0) + \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(light\_direction, 2, 0) * \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(tri\_normal, 2, 0);}
\DoxyCodeLine{03059         des\_tri.\mbox{\hyperlink{structTri_ae0621440deabb3071d6b2b9f88f55c34}{light\_intensity}}[i] = fmaxf(0.2, fminf(1, \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(dot\_product, 0, 0)));}
\DoxyCodeLine{03060     \}}
\DoxyCodeLine{03061 \textcolor{preprocessor}{    \#endif}}
\DoxyCodeLine{03062 }
\DoxyCodeLine{03063     \textcolor{comment}{/* calc if tri is visible to the camera */}}
\DoxyCodeLine{03064     \mbox{\hyperlink{Almog__Engine_8h_add210cedd8afbad661cb2afb96c077df}{ae\_tri\_calc\_normal}}(tri\_normal, tri);}
\DoxyCodeLine{03065     \textcolor{comment}{// ae\_point\_to\_mat2D(tri.normals[0], tri\_normal);}}
\DoxyCodeLine{03066     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(dot\_product, 0, 0) = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(camera2tri, 0, 0) * \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(tri\_normal, 0, 0) + \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(camera2tri, 0, 1) * \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(tri\_normal, 1, 0) + \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(camera2tri, 0, 2) * \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(tri\_normal, 2, 0);}
\DoxyCodeLine{03067     \textcolor{keywordflow}{if} (\mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(dot\_product, 0, 0) < 0) \{}
\DoxyCodeLine{03068         des\_tri.\mbox{\hyperlink{structTri_a5b4e4396e4ee399ff6d07ffcedaeceaa}{to\_draw}} = \textcolor{keyword}{true};}
\DoxyCodeLine{03069     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{03070         des\_tri.\mbox{\hyperlink{structTri_a5b4e4396e4ee399ff6d07ffcedaeceaa}{to\_draw}} = \textcolor{keyword}{false};}
\DoxyCodeLine{03071     \}}
\DoxyCodeLine{03072 }
\DoxyCodeLine{03073     \textcolor{comment}{/* transform tri to camera view */}}
\DoxyCodeLine{03074     tri = \mbox{\hyperlink{Almog__Engine_8h_a1c1797fd06019133cacb5329fa1fe24e}{ae\_tri\_transform\_to\_view}}(view\_mat, tri);}
\DoxyCodeLine{03075 }
\DoxyCodeLine{03076     \textcolor{comment}{// Tri\_mesh temp\_tri\_array; }}
\DoxyCodeLine{03077     \textcolor{comment}{// ada\_init\_array(Tri, temp\_tri\_array);}}
\DoxyCodeLine{03078     \textcolor{comment}{// ada\_appand(Tri, temp\_tri\_array, tri);}}
\DoxyCodeLine{03079     \textcolor{comment}{/* clip tir */}}
\DoxyCodeLine{03080     \mbox{\hyperlink{structTri}{Tri}} clipped\_tri1 = \{0\};}
\DoxyCodeLine{03081     \mbox{\hyperlink{structTri}{Tri}} clipped\_tri2 = \{0\};}
\DoxyCodeLine{03082     \mbox{\hyperlink{structMat2D}{Mat2D}} z\_plane\_p = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03083     \mbox{\hyperlink{structMat2D}{Mat2D}} z\_plane\_n = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03084     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(z\_plane\_p, 0);}
\DoxyCodeLine{03085     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(z\_plane\_n, 0);}
\DoxyCodeLine{03086     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(z\_plane\_p, 2, 0) = scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a14ebc5ce9490721428eaf1ca023322f9}{z\_near}}+0.01;}
\DoxyCodeLine{03087     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(z\_plane\_n, 2, 0) = 1;}
\DoxyCodeLine{03088 }
\DoxyCodeLine{03089     \textcolor{keywordtype}{int} num\_clipped\_tri = \mbox{\hyperlink{Almog__Engine_8h_a8c5f2139e3c08f222e1c1bf9ccb4c8b8}{ae\_tri\_clip\_with\_plane}}(tri, z\_plane\_p, z\_plane\_n, \&clipped\_tri1, \&clipped\_tri2);}
\DoxyCodeLine{03090     \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} temp\_tri\_array; }
\DoxyCodeLine{03091     \mbox{\hyperlink{Almog__Dynamic__Array_8h_aac157302e0837f301f0c915360cfb182}{ada\_init\_array}}(\mbox{\hyperlink{structTri}{Tri}}, temp\_tri\_array);}
\DoxyCodeLine{03092     \textcolor{keywordflow}{if} (num\_clipped\_tri == -\/1) \{}
\DoxyCodeLine{03093         fprintf(stderr, \textcolor{stringliteral}{"{}\%s:\%d: [error] problem with clipping triangles\(\backslash\)n"{}}, \_\_FILE\_\_, \_\_LINE\_\_);}
\DoxyCodeLine{03094         exit(1);}
\DoxyCodeLine{03095     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (num\_clipped\_tri == 0) \{}
\DoxyCodeLine{03096         ;}
\DoxyCodeLine{03097     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (num\_clipped\_tri == 1) \{}
\DoxyCodeLine{03098         \mbox{\hyperlink{Almog__Engine_8h_ad51295cab44c98e63a76c2f2ecaeb16c}{ae\_assert\_tri\_is\_valid}}(clipped\_tri1);}
\DoxyCodeLine{03099         \mbox{\hyperlink{Almog__Dynamic__Array_8h_a61680400e419e2d55c2e3cb9fe96dad7}{ada\_appand}}(\mbox{\hyperlink{structTri}{Tri}}, temp\_tri\_array, clipped\_tri1);}
\DoxyCodeLine{03100     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (num\_clipped\_tri == 2) \{}
\DoxyCodeLine{03101         \mbox{\hyperlink{Almog__Engine_8h_ad51295cab44c98e63a76c2f2ecaeb16c}{ae\_assert\_tri\_is\_valid}}(clipped\_tri1);}
\DoxyCodeLine{03102         \mbox{\hyperlink{Almog__Engine_8h_ad51295cab44c98e63a76c2f2ecaeb16c}{ae\_assert\_tri\_is\_valid}}(clipped\_tri2);}
\DoxyCodeLine{03103         \mbox{\hyperlink{Almog__Dynamic__Array_8h_a61680400e419e2d55c2e3cb9fe96dad7}{ada\_appand}}(\mbox{\hyperlink{structTri}{Tri}}, temp\_tri\_array, clipped\_tri1);}
\DoxyCodeLine{03104         \mbox{\hyperlink{Almog__Dynamic__Array_8h_a61680400e419e2d55c2e3cb9fe96dad7}{ada\_appand}}(\mbox{\hyperlink{structTri}{Tri}}, temp\_tri\_array, clipped\_tri2);}
\DoxyCodeLine{03105     \}}
\DoxyCodeLine{03106     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(z\_plane\_p);}
\DoxyCodeLine{03107     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(z\_plane\_n);}
\DoxyCodeLine{03108 }
\DoxyCodeLine{03109     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} temp\_tri\_index = 0; temp\_tri\_index < temp\_tri\_array.\mbox{\hyperlink{structTri__mesh_a0fb2a2069a57bd77bac6a91a3b2e4ffb}{length}}; temp\_tri\_index++) \{}
\DoxyCodeLine{03110         \textcolor{comment}{/* project tri to screen */}}
\DoxyCodeLine{03111         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 3; i++) \{}
\DoxyCodeLine{03112             des\_tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[i] = \mbox{\hyperlink{Almog__Engine_8h_ae10d1bf00c014c797936ebea24b4e81a}{ae\_point\_project\_view2screen}}(proj\_mat, temp\_tri\_array.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[temp\_tri\_index].\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[i], window\_w, window\_h);}
\DoxyCodeLine{03113 }
\DoxyCodeLine{03114             \textcolor{keywordflow}{if} (des\_tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[i].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}) \{}
\DoxyCodeLine{03115                 des\_tri.\mbox{\hyperlink{structTri_a0cbc3520ec1e9920434c9984a8f3c345}{tex\_points}}[i].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} /= des\_tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[i].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}};}
\DoxyCodeLine{03116                 des\_tri.\mbox{\hyperlink{structTri_a0cbc3520ec1e9920434c9984a8f3c345}{tex\_points}}[i].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} /= des\_tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[i].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}};}
\DoxyCodeLine{03117                 des\_tri.\mbox{\hyperlink{structTri_a0cbc3520ec1e9920434c9984a8f3c345}{tex\_points}}[i].\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} /= des\_tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[i].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}};}
\DoxyCodeLine{03118                 des\_tri.\mbox{\hyperlink{structTri_a0cbc3520ec1e9920434c9984a8f3c345}{tex\_points}}[i].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}}  = des\_tri.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[i].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}};}
\DoxyCodeLine{03119             \}}
\DoxyCodeLine{03120 }
\DoxyCodeLine{03121         \}}
\DoxyCodeLine{03122         \mbox{\hyperlink{Almog__Engine_8h_ad51295cab44c98e63a76c2f2ecaeb16c}{ae\_assert\_tri\_is\_valid}}(des\_tri);}
\DoxyCodeLine{03123         temp\_tri\_array.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[temp\_tri\_index] = des\_tri;}
\DoxyCodeLine{03124     \}}
\DoxyCodeLine{03125 }
\DoxyCodeLine{03126 }
\DoxyCodeLine{03127     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(tri\_normal);}
\DoxyCodeLine{03128     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(temp\_camera2tri);}
\DoxyCodeLine{03129     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(camera2tri);}
\DoxyCodeLine{03130     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(dot\_product);}
\DoxyCodeLine{03131 }
\DoxyCodeLine{03132     \textcolor{keywordflow}{return} temp\_tri\_array;}
\DoxyCodeLine{03133 \}}
\DoxyCodeLine{03134 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l03151}\mbox{\hyperlink{Almog__Engine_8h_ad67eee66e34c55818406703f2a13ccd5}{03151}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_ad67eee66e34c55818406703f2a13ccd5}{ae\_tri\_mesh\_project\_world2screen}}(\mbox{\hyperlink{structMat2D}{Mat2D}} proj\_mat, \mbox{\hyperlink{structMat2D}{Mat2D}} view\_mat, \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} *des, \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} src, \textcolor{keywordtype}{int} window\_w, \textcolor{keywordtype}{int} window\_h, \mbox{\hyperlink{structScene}{Scene}} *scene, \mbox{\hyperlink{Almog__Engine_8h_a3b664376e82e1cd4013e17ea17ac6501}{Lighting\_mode}} lighting\_mode)}
\DoxyCodeLine{03152 \{}
\DoxyCodeLine{03153     \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} temp\_des = *des;}
\DoxyCodeLine{03154     temp\_des.\mbox{\hyperlink{structTri__mesh_a0fb2a2069a57bd77bac6a91a3b2e4ffb}{length}} = 0;}
\DoxyCodeLine{03155 }
\DoxyCodeLine{03156     \textcolor{keywordtype}{size\_t} i;}
\DoxyCodeLine{03157     \textcolor{keywordflow}{for} (i = 0; i < src.\mbox{\hyperlink{structTri__mesh_a0fb2a2069a57bd77bac6a91a3b2e4ffb}{length}}; i++) \{}
\DoxyCodeLine{03158         \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} temp\_tri\_array = \mbox{\hyperlink{Almog__Engine_8h_a58de2ce54cb320d8cade6a8de95d89d3}{ae\_tri\_project\_world2screen}}(proj\_mat, view\_mat, src.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[i], window\_w, window\_h, scene, lighting\_mode);}
\DoxyCodeLine{03159 }
\DoxyCodeLine{03160         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} tri\_index = 0; tri\_index < temp\_tri\_array.\mbox{\hyperlink{structTri__mesh_a0fb2a2069a57bd77bac6a91a3b2e4ffb}{length}}; tri\_index++) \{}
\DoxyCodeLine{03161             \mbox{\hyperlink{structTri}{Tri}} temp\_tri = temp\_tri\_array.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[tri\_index];}
\DoxyCodeLine{03162             \mbox{\hyperlink{Almog__Dynamic__Array_8h_a61680400e419e2d55c2e3cb9fe96dad7}{ada\_appand}}(\mbox{\hyperlink{structTri}{Tri}}, temp\_des, temp\_tri);}
\DoxyCodeLine{03163         \}}
\DoxyCodeLine{03164 }
\DoxyCodeLine{03165         free(temp\_tri\_array.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}});}
\DoxyCodeLine{03166     \}}
\DoxyCodeLine{03167 }
\DoxyCodeLine{03168     \textcolor{comment}{/* clip tir */}}
\DoxyCodeLine{03169     \textcolor{keywordtype}{int} offset = 0;}
\DoxyCodeLine{03170     \mbox{\hyperlink{structMat2D}{Mat2D}} top\_p = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03171     \mbox{\hyperlink{structMat2D}{Mat2D}} top\_n = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03172     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(top\_p, 0);}
\DoxyCodeLine{03173     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(top\_n, 0);}
\DoxyCodeLine{03174     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(top\_p, 1, 0) = 0 + offset;}
\DoxyCodeLine{03175     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(top\_n, 1, 0) = 1;}
\DoxyCodeLine{03176 }
\DoxyCodeLine{03177     \mbox{\hyperlink{structMat2D}{Mat2D}} bottom\_p = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03178     \mbox{\hyperlink{structMat2D}{Mat2D}} bottom\_n = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03179     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(bottom\_p, 0);}
\DoxyCodeLine{03180     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(bottom\_n, 0);}
\DoxyCodeLine{03181     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(bottom\_p, 1, 0) = window\_h -\/ offset;}
\DoxyCodeLine{03182     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(bottom\_n, 1, 0) = -\/1;}
\DoxyCodeLine{03183 }
\DoxyCodeLine{03184     \mbox{\hyperlink{structMat2D}{Mat2D}} left\_p = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03185     \mbox{\hyperlink{structMat2D}{Mat2D}} left\_n = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03186     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(left\_p, 0);}
\DoxyCodeLine{03187     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(left\_n, 0);}
\DoxyCodeLine{03188     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(left\_p, 0, 0) = 0 + offset;}
\DoxyCodeLine{03189     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(left\_n, 0, 0) = 1;}
\DoxyCodeLine{03190 }
\DoxyCodeLine{03191     \mbox{\hyperlink{structMat2D}{Mat2D}} right\_p = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03192     \mbox{\hyperlink{structMat2D}{Mat2D}} right\_n = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03193     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(right\_p, 0);}
\DoxyCodeLine{03194     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(right\_n, 0);}
\DoxyCodeLine{03195     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(right\_p, 0, 0) = window\_w -\/ offset;}
\DoxyCodeLine{03196     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(right\_n, 0, 0) = -\/1;}
\DoxyCodeLine{03197 }
\DoxyCodeLine{03198     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} plane\_number = 0; plane\_number < 4; plane\_number++) \{}
\DoxyCodeLine{03199         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} tri\_index = 0; tri\_index < (int)(temp\_des.\mbox{\hyperlink{structTri__mesh_a0fb2a2069a57bd77bac6a91a3b2e4ffb}{length}}); tri\_index++) \{}
\DoxyCodeLine{03200             \textcolor{keywordflow}{if} (temp\_des.\mbox{\hyperlink{structTri__mesh_a0fb2a2069a57bd77bac6a91a3b2e4ffb}{length}} == 0) \{}
\DoxyCodeLine{03201                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{03202             \}}
\DoxyCodeLine{03203             \textcolor{comment}{// if (temp\_des.elements[tri\_index].to\_draw == false) \{}}
\DoxyCodeLine{03204             \textcolor{comment}{//     ada\_remove\_unordered(Tri, temp\_des, tri\_index);}}
\DoxyCodeLine{03205             \textcolor{comment}{//     tri\_index-\/-\/;}}
\DoxyCodeLine{03206             \textcolor{comment}{//     tri\_index = (int)fmaxf((float)tri\_index, 0.0f);}}
\DoxyCodeLine{03207             \textcolor{comment}{//     continue;}}
\DoxyCodeLine{03208             \textcolor{comment}{// \}}}
\DoxyCodeLine{03209             \mbox{\hyperlink{structTri}{Tri}} clipped\_tri1 = \{0\};}
\DoxyCodeLine{03210             \mbox{\hyperlink{structTri}{Tri}} clipped\_tri2 = \{0\};}
\DoxyCodeLine{03211             \textcolor{keywordtype}{int} num\_clipped\_tri;}
\DoxyCodeLine{03212             \textcolor{keywordflow}{switch} (plane\_number) \{}
\DoxyCodeLine{03213                 \textcolor{keywordflow}{case} 0:}
\DoxyCodeLine{03214                     num\_clipped\_tri = \mbox{\hyperlink{Almog__Engine_8h_a8c5f2139e3c08f222e1c1bf9ccb4c8b8}{ae\_tri\_clip\_with\_plane}}(temp\_des.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[tri\_index], top\_p, top\_n, \&clipped\_tri1, \&clipped\_tri2);}
\DoxyCodeLine{03215                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{03216                 \textcolor{keywordflow}{case} 1:}
\DoxyCodeLine{03217                     num\_clipped\_tri = \mbox{\hyperlink{Almog__Engine_8h_a8c5f2139e3c08f222e1c1bf9ccb4c8b8}{ae\_tri\_clip\_with\_plane}}(temp\_des.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[tri\_index], right\_p, right\_n, \&clipped\_tri1, \&clipped\_tri2);}
\DoxyCodeLine{03218                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{03219                 \textcolor{keywordflow}{case} 2:}
\DoxyCodeLine{03220                     num\_clipped\_tri = \mbox{\hyperlink{Almog__Engine_8h_a8c5f2139e3c08f222e1c1bf9ccb4c8b8}{ae\_tri\_clip\_with\_plane}}(temp\_des.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[tri\_index], bottom\_p, bottom\_n, \&clipped\_tri1, \&clipped\_tri2);}
\DoxyCodeLine{03221                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{03222                 \textcolor{keywordflow}{case} 3:}
\DoxyCodeLine{03223                     num\_clipped\_tri = \mbox{\hyperlink{Almog__Engine_8h_a8c5f2139e3c08f222e1c1bf9ccb4c8b8}{ae\_tri\_clip\_with\_plane}}(temp\_des.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[tri\_index], left\_p, left\_n, \&clipped\_tri1, \&clipped\_tri2);}
\DoxyCodeLine{03224                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{03225             \}}
\DoxyCodeLine{03226             \textcolor{keywordflow}{if} (num\_clipped\_tri == -\/1) \{}
\DoxyCodeLine{03227                 fprintf(stderr, \textcolor{stringliteral}{"{}\%s:\%d: [error] problem with clipping triangles\(\backslash\)n"{}}, \_\_FILE\_\_, \_\_LINE\_\_);}
\DoxyCodeLine{03228                 exit(1);}
\DoxyCodeLine{03229             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (num\_clipped\_tri == 0) \{}
\DoxyCodeLine{03230                 \mbox{\hyperlink{Almog__Dynamic__Array_8h_a0df1461ea637ae0948bd6dd43b5f08ed}{ada\_remove\_unordered}}(\mbox{\hyperlink{structTri}{Tri}}, temp\_des, tri\_index);}
\DoxyCodeLine{03231                 tri\_index-\/-\/;}
\DoxyCodeLine{03232                 tri\_index = (int)fmaxf((\textcolor{keywordtype}{float})tri\_index, 0.0f);}
\DoxyCodeLine{03233             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (num\_clipped\_tri == 1) \{}
\DoxyCodeLine{03234                 \mbox{\hyperlink{Almog__Engine_8h_ad51295cab44c98e63a76c2f2ecaeb16c}{ae\_assert\_tri\_is\_valid}}(clipped\_tri1);}
\DoxyCodeLine{03235                 temp\_des.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[tri\_index] = clipped\_tri1;}
\DoxyCodeLine{03236             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (num\_clipped\_tri == 2) \{}
\DoxyCodeLine{03237                 \mbox{\hyperlink{Almog__Engine_8h_ad51295cab44c98e63a76c2f2ecaeb16c}{ae\_assert\_tri\_is\_valid}}(clipped\_tri1);}
\DoxyCodeLine{03238                 \mbox{\hyperlink{Almog__Engine_8h_ad51295cab44c98e63a76c2f2ecaeb16c}{ae\_assert\_tri\_is\_valid}}(clipped\_tri2);}
\DoxyCodeLine{03239                 temp\_des.\mbox{\hyperlink{structTri__mesh_ac89551cc5ed8f98f0d21a12e2c96dcdb}{elements}}[tri\_index] = clipped\_tri1;}
\DoxyCodeLine{03240                 \mbox{\hyperlink{Almog__Dynamic__Array_8h_a0c20741fa11196eb7394b8e05b8e0b48}{ada\_insert\_unordered}}(\mbox{\hyperlink{structTri}{Tri}}, temp\_des, clipped\_tri2, tri\_index+1);}
\DoxyCodeLine{03241             \}}
\DoxyCodeLine{03242         \}}
\DoxyCodeLine{03243     \}}
\DoxyCodeLine{03244 }
\DoxyCodeLine{03245     \textcolor{comment}{// if (temp\_des.length > 2) \{}}
\DoxyCodeLine{03246     \textcolor{comment}{//     ae\_qsort\_tri(temp\_des.elements, 0, temp\_des.length-\/1);}}
\DoxyCodeLine{03247     \textcolor{comment}{// \}}}
\DoxyCodeLine{03248 }
\DoxyCodeLine{03249     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(top\_p);}
\DoxyCodeLine{03250     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(top\_n);}
\DoxyCodeLine{03251     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(bottom\_p);}
\DoxyCodeLine{03252     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(bottom\_n);}
\DoxyCodeLine{03253     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(left\_p);}
\DoxyCodeLine{03254     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(left\_n);}
\DoxyCodeLine{03255     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(right\_p);}
\DoxyCodeLine{03256     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(right\_n);}
\DoxyCodeLine{03257 }
\DoxyCodeLine{03258     *des = temp\_des;}
\DoxyCodeLine{03259 \}}
\DoxyCodeLine{03260 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l03271}\mbox{\hyperlink{Almog__Engine_8h_a318de3677b5db4ffd03ae2b73a998e52}{03271}} \mbox{\hyperlink{structQuad}{Quad}} \mbox{\hyperlink{Almog__Engine_8h_a318de3677b5db4ffd03ae2b73a998e52}{ae\_quad\_transform\_to\_view}}(\mbox{\hyperlink{structMat2D}{Mat2D}} view\_mat, \mbox{\hyperlink{structQuad}{Quad}} quad)}
\DoxyCodeLine{03272 \{}
\DoxyCodeLine{03273     \mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{ae\_assert\_quad\_is\_valid}}(quad);}
\DoxyCodeLine{03274 }
\DoxyCodeLine{03275     \mbox{\hyperlink{structMat2D}{Mat2D}} src\_point\_mat = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(1,4);}
\DoxyCodeLine{03276     \mbox{\hyperlink{structMat2D}{Mat2D}} des\_point\_mat = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(1,4);}
\DoxyCodeLine{03277 }
\DoxyCodeLine{03278     \mbox{\hyperlink{structQuad}{Quad}} des\_quad = quad;}
\DoxyCodeLine{03279 }
\DoxyCodeLine{03280     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 4; i++) \{}
\DoxyCodeLine{03281         \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(src\_point\_mat, 0, 0) = quad.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[i].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}};}
\DoxyCodeLine{03282         \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(src\_point\_mat, 0, 1) = quad.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[i].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}};}
\DoxyCodeLine{03283         \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(src\_point\_mat, 0, 2) = quad.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[i].\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}};}
\DoxyCodeLine{03284         \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(src\_point\_mat, 0, 3) = 1;}
\DoxyCodeLine{03285 }
\DoxyCodeLine{03286         \mbox{\hyperlink{Matrix2D_8h_a54befe38bb85e4e8d07030cf3c4f9e16}{mat2D\_dot}}(des\_point\_mat, src\_point\_mat, view\_mat);}
\DoxyCodeLine{03287 }
\DoxyCodeLine{03288         \textcolor{keywordtype}{double} w = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(des\_point\_mat, 0, 3);}
\DoxyCodeLine{03289         \mbox{\hyperlink{Almog__Engine_8h_ae0ee5af7ebeb8607977697ad6710723f}{AE\_ASSERT}}(w == 1);}
\DoxyCodeLine{03290         des\_quad.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[i].\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(des\_point\_mat, 0, 0) / w;}
\DoxyCodeLine{03291         des\_quad.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[i].\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(des\_point\_mat, 0, 1) / w;}
\DoxyCodeLine{03292         des\_quad.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[i].\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(des\_point\_mat, 0, 2) / w;}
\DoxyCodeLine{03293         des\_quad.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[i].\mbox{\hyperlink{structPoint_a31e4e3c1137e7e992df6420e911fa595}{w}} = w;}
\DoxyCodeLine{03294     \}}
\DoxyCodeLine{03295 }
\DoxyCodeLine{03296     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(src\_point\_mat);}
\DoxyCodeLine{03297     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(des\_point\_mat);}
\DoxyCodeLine{03298 }
\DoxyCodeLine{03299     \mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{ae\_assert\_quad\_is\_valid}}(des\_quad);}
\DoxyCodeLine{03300 }
\DoxyCodeLine{03301     \textcolor{keywordflow}{return} des\_quad;}
\DoxyCodeLine{03302 \}}
\DoxyCodeLine{03303 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l03321}\mbox{\hyperlink{Almog__Engine_8h_a328b8b2bb3e397b7d36e72669671868e}{03321}} \mbox{\hyperlink{structQuad__mesh}{Quad\_mesh}} \mbox{\hyperlink{Almog__Engine_8h_a328b8b2bb3e397b7d36e72669671868e}{ae\_quad\_project\_world2screen}}(\mbox{\hyperlink{structMat2D}{Mat2D}} proj\_mat, \mbox{\hyperlink{structMat2D}{Mat2D}} view\_mat, \mbox{\hyperlink{structQuad}{Quad}} quad, \textcolor{keywordtype}{int} window\_w, \textcolor{keywordtype}{int} window\_h, \mbox{\hyperlink{structScene}{Scene}} *scene, \mbox{\hyperlink{Almog__Engine_8h_a3b664376e82e1cd4013e17ea17ac6501}{Lighting\_mode}} lighting\_mode)}
\DoxyCodeLine{03322 \{}
\DoxyCodeLine{03323     \mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{ae\_assert\_quad\_is\_valid}}(quad);}
\DoxyCodeLine{03324 }
\DoxyCodeLine{03325     \mbox{\hyperlink{structMat2D}{Mat2D}} quad\_normal = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03326     \mbox{\hyperlink{structMat2D}{Mat2D}} camera2quad = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03327     \mbox{\hyperlink{structMat2D}{Mat2D}} dot\_product = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(1, 1);}
\DoxyCodeLine{03328     \mbox{\hyperlink{structQuad}{Quad}} des\_quad = quad;}
\DoxyCodeLine{03329 }
\DoxyCodeLine{03330     \textcolor{comment}{/* calc lighting intensity of tri */}}
\DoxyCodeLine{03331 \textcolor{preprocessor}{    \#if 1}}
\DoxyCodeLine{03332         \mbox{\hyperlink{Almog__Engine_8h_a36c108042b6ed289b4d0f85f8c5700ee}{ae\_quad\_calc\_light\_intensity}}(\&des\_quad, scene, lighting\_mode);}
\DoxyCodeLine{03333 \textcolor{preprocessor}{    \#else}}
\DoxyCodeLine{03334     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 4; i++) \{}
\DoxyCodeLine{03335         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad.\mbox{\hyperlink{structQuad_a00c91a94eee9820ce31b8ee8927368f0}{normals}}[i], quad\_normal);}
\DoxyCodeLine{03336         \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(dot\_product, 0, 0) = scene-\/>\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}}.\mbox{\hyperlink{structLight__source_ac24d933710b710d1ed6d45b4696e38c8}{light\_direction\_or\_pos}}.\mbox{\hyperlink{structPoint_a05dfe2dfbde813ad234b514f30e662f1}{x}} * \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(quad\_normal, 0, 0) + scene-\/>\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}}.\mbox{\hyperlink{structLight__source_ac24d933710b710d1ed6d45b4696e38c8}{light\_direction\_or\_pos}}.\mbox{\hyperlink{structPoint_a6101960c8d2d4e8ea1d32c9234bbeb8d}{y}} * \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(quad\_normal, 1, 0) + scene-\/>\mbox{\hyperlink{structScene_a711d71152c5504997e9cf77934ee815e}{light\_source0}}.\mbox{\hyperlink{structLight__source_ac24d933710b710d1ed6d45b4696e38c8}{light\_direction\_or\_pos}}.\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}} * \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(quad\_normal, 2, 0);}
\DoxyCodeLine{03337         des\_quad.\mbox{\hyperlink{structQuad_aba6d53f3dc917e11da1715cc669589d7}{light\_intensity}}[i] = fmaxf(0.2, fminf(1, \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(dot\_product, 0, 0)));}
\DoxyCodeLine{03338     \}}
\DoxyCodeLine{03339 \textcolor{preprocessor}{    \#endif}}
\DoxyCodeLine{03340 }
\DoxyCodeLine{03341     \textcolor{comment}{/* calc if quad is visible to the camera */}}
\DoxyCodeLine{03342     \textcolor{keywordtype}{bool} visible = 0;}
\DoxyCodeLine{03343 \textcolor{preprocessor}{    \#if 1}}
\DoxyCodeLine{03344     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 4; i++) \{}
\DoxyCodeLine{03345         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[i], camera2quad);}
\DoxyCodeLine{03346         \mbox{\hyperlink{Matrix2D_8h_a96b3b954a60d4f9dd6ac9954945bc749}{mat2D\_sub}}(camera2quad, scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_adc5641764d588d64baeb2c9a5773d2e0}{current\_position}});}
\DoxyCodeLine{03347 }
\DoxyCodeLine{03348         \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad.\mbox{\hyperlink{structQuad_a00c91a94eee9820ce31b8ee8927368f0}{normals}}[i], quad\_normal);}
\DoxyCodeLine{03349         \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(dot\_product, 0, 0) = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(camera2quad, 0, 0) * \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(quad\_normal, 0, 0) + \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(camera2quad, 1, 0) * \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(quad\_normal, 1, 0) + \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(camera2quad, 2, 0) * \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(quad\_normal, 2, 0);}
\DoxyCodeLine{03350         visible = visible || (\mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(dot\_product, 0, 0) < 0);}
\DoxyCodeLine{03351     \}}
\DoxyCodeLine{03352 \textcolor{preprocessor}{    \#else}}
\DoxyCodeLine{03353     \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(quad.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[0], camera2quad);}
\DoxyCodeLine{03354     \mbox{\hyperlink{Matrix2D_8h_a96b3b954a60d4f9dd6ac9954945bc749}{mat2D\_sub}}(camera2quad, scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_adc5641764d588d64baeb2c9a5773d2e0}{current\_position}});}
\DoxyCodeLine{03355 }
\DoxyCodeLine{03356     \mbox{\hyperlink{structPoint}{Point}} ave\_norm = \mbox{\hyperlink{Almog__Engine_8h_a13940b94d775b4887b34e03ffff9661e}{ae\_quad\_get\_average\_normal}}(quad);}
\DoxyCodeLine{03357     \mbox{\hyperlink{Almog__Engine_8h_a35a66ba0fbf0ed95b863ecde0962a496}{ae\_point\_to\_mat2D}}(ave\_norm, quad\_normal);}
\DoxyCodeLine{03358     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(dot\_product, 0, 0) = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(camera2quad, 0, 0) * \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(quad\_normal, 0, 0) + \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(camera2quad, 1, 0) * \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(quad\_normal, 1, 0) + \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(camera2quad, 2, 0) * \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(quad\_normal, 2, 0);}
\DoxyCodeLine{03359     visible = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(dot\_product, 0, 0) < 0;}
\DoxyCodeLine{03360 \textcolor{preprocessor}{    \#endif}}
\DoxyCodeLine{03361 }
\DoxyCodeLine{03362     \textcolor{keywordflow}{if} (visible) \{}
\DoxyCodeLine{03363         des\_quad.\mbox{\hyperlink{structQuad_a583cf34675c34b1242e48cec56562f35}{to\_draw}} = \textcolor{keyword}{true};}
\DoxyCodeLine{03364     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{03365         des\_quad.\mbox{\hyperlink{structQuad_a583cf34675c34b1242e48cec56562f35}{to\_draw}} = \textcolor{keyword}{false};}
\DoxyCodeLine{03366     \}}
\DoxyCodeLine{03367 }
\DoxyCodeLine{03368     \textcolor{comment}{/* transform quad to camera view */}}
\DoxyCodeLine{03369     quad = \mbox{\hyperlink{Almog__Engine_8h_a318de3677b5db4ffd03ae2b73a998e52}{ae\_quad\_transform\_to\_view}}(view\_mat, quad);}
\DoxyCodeLine{03370 }
\DoxyCodeLine{03371     \textcolor{comment}{/* clip quad */}}
\DoxyCodeLine{03372     \mbox{\hyperlink{structQuad}{Quad}}  clipped\_quad1 = \{0\}, clipped\_quad2 = \{0\};}
\DoxyCodeLine{03373     \mbox{\hyperlink{structMat2D}{Mat2D}} z\_plane\_p = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03374     \mbox{\hyperlink{structMat2D}{Mat2D}} z\_plane\_n = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03375     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(z\_plane\_p, 0);}
\DoxyCodeLine{03376     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(z\_plane\_n, 0);}
\DoxyCodeLine{03377     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(z\_plane\_p, 2, 0) = scene-\/>\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a14ebc5ce9490721428eaf1ca023322f9}{z\_near}}+0.01;}
\DoxyCodeLine{03378     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(z\_plane\_n, 2, 0) = 1;}
\DoxyCodeLine{03379 }
\DoxyCodeLine{03380     \textcolor{keywordtype}{int} num\_clipped\_quad = \mbox{\hyperlink{Almog__Engine_8h_aff9453f6f1fde30f7752ac03fd49aebb}{ae\_quad\_clip\_with\_plane}}(quad, z\_plane\_p, z\_plane\_n, \&clipped\_quad1, \&clipped\_quad2);}
\DoxyCodeLine{03381     \mbox{\hyperlink{structQuad__mesh}{Quad\_mesh}} temp\_quad\_array; }
\DoxyCodeLine{03382     \mbox{\hyperlink{Almog__Dynamic__Array_8h_aac157302e0837f301f0c915360cfb182}{ada\_init\_array}}(\mbox{\hyperlink{structQuad}{Quad}}, temp\_quad\_array);}
\DoxyCodeLine{03383     \textcolor{keywordflow}{if} (num\_clipped\_quad == -\/1) \{}
\DoxyCodeLine{03384         fprintf(stderr, \textcolor{stringliteral}{"{}\%s:\%d: [error] problem with clipping quad\(\backslash\)n"{}}, \_\_FILE\_\_, \_\_LINE\_\_);}
\DoxyCodeLine{03385         exit(1);}
\DoxyCodeLine{03386     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (num\_clipped\_quad == 0) \{}
\DoxyCodeLine{03387         ;}
\DoxyCodeLine{03388     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (num\_clipped\_quad == 1) \{}
\DoxyCodeLine{03389         \mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{ae\_assert\_quad\_is\_valid}}(clipped\_quad1);}
\DoxyCodeLine{03390         \mbox{\hyperlink{Almog__Dynamic__Array_8h_a61680400e419e2d55c2e3cb9fe96dad7}{ada\_appand}}(\mbox{\hyperlink{structQuad}{Quad}}, temp\_quad\_array, clipped\_quad1);}
\DoxyCodeLine{03391     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (num\_clipped\_quad == 2) \{}
\DoxyCodeLine{03392         \mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{ae\_assert\_quad\_is\_valid}}(clipped\_quad1);}
\DoxyCodeLine{03393         \mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{ae\_assert\_quad\_is\_valid}}(clipped\_quad2);}
\DoxyCodeLine{03394         \mbox{\hyperlink{Almog__Dynamic__Array_8h_a61680400e419e2d55c2e3cb9fe96dad7}{ada\_appand}}(\mbox{\hyperlink{structQuad}{Quad}}, temp\_quad\_array, clipped\_quad1);}
\DoxyCodeLine{03395         \mbox{\hyperlink{Almog__Dynamic__Array_8h_a61680400e419e2d55c2e3cb9fe96dad7}{ada\_appand}}(\mbox{\hyperlink{structQuad}{Quad}}, temp\_quad\_array, clipped\_quad2);}
\DoxyCodeLine{03396     \}}
\DoxyCodeLine{03397     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(z\_plane\_p);}
\DoxyCodeLine{03398     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(z\_plane\_n);}
\DoxyCodeLine{03399 }
\DoxyCodeLine{03400     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} temp\_quad\_index = 0; temp\_quad\_index < temp\_quad\_array.\mbox{\hyperlink{structQuad__mesh_acf6fda7d9ed2f0c39e8ff17fb0ef521b}{length}}; temp\_quad\_index++) \{}
\DoxyCodeLine{03401         \textcolor{comment}{/* project quad to screen */}}
\DoxyCodeLine{03402         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < 4; i++) \{}
\DoxyCodeLine{03403             des\_quad.\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[i] = \mbox{\hyperlink{Almog__Engine_8h_ae10d1bf00c014c797936ebea24b4e81a}{ae\_point\_project\_view2screen}}(proj\_mat, temp\_quad\_array.\mbox{\hyperlink{structQuad__mesh_a834716c539e7ceaa66821b4f3de7744d}{elements}}[temp\_quad\_index].\mbox{\hyperlink{structQuad_a38adc543ff9f9c206f322078f008be2d}{points}}[i], window\_w, window\_h);}
\DoxyCodeLine{03404 }
\DoxyCodeLine{03405         \}}
\DoxyCodeLine{03406         \mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{ae\_assert\_quad\_is\_valid}}(des\_quad);}
\DoxyCodeLine{03407         temp\_quad\_array.\mbox{\hyperlink{structQuad__mesh_a834716c539e7ceaa66821b4f3de7744d}{elements}}[temp\_quad\_index] = des\_quad;}
\DoxyCodeLine{03408     \}}
\DoxyCodeLine{03409 }
\DoxyCodeLine{03410 }
\DoxyCodeLine{03411     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(quad\_normal);}
\DoxyCodeLine{03412     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(camera2quad);}
\DoxyCodeLine{03413     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(dot\_product);}
\DoxyCodeLine{03414 }
\DoxyCodeLine{03415     \textcolor{keywordflow}{return} temp\_quad\_array;}
\DoxyCodeLine{03416 \}}
\DoxyCodeLine{03417 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l03434}\mbox{\hyperlink{Almog__Engine_8h_ad7415d7fdf579c8f89a5279953c1cc0f}{03434}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_ad7415d7fdf579c8f89a5279953c1cc0f}{ae\_quad\_mesh\_project\_world2screen}}(\mbox{\hyperlink{structMat2D}{Mat2D}} proj\_mat, \mbox{\hyperlink{structMat2D}{Mat2D}} view\_mat, \mbox{\hyperlink{structQuad__mesh}{Quad\_mesh}} *des, \mbox{\hyperlink{structQuad__mesh}{Quad\_mesh}} src, \textcolor{keywordtype}{int} window\_w, \textcolor{keywordtype}{int} window\_h, \mbox{\hyperlink{structScene}{Scene}} *scene, \mbox{\hyperlink{Almog__Engine_8h_a3b664376e82e1cd4013e17ea17ac6501}{Lighting\_mode}} lighting\_mode)}
\DoxyCodeLine{03435 \{}
\DoxyCodeLine{03436     \mbox{\hyperlink{structQuad__mesh}{Quad\_mesh}} temp\_des = *des;}
\DoxyCodeLine{03437     temp\_des.\mbox{\hyperlink{structQuad__mesh_acf6fda7d9ed2f0c39e8ff17fb0ef521b}{length}} = 0;}
\DoxyCodeLine{03438 }
\DoxyCodeLine{03439     \textcolor{keywordtype}{size\_t} i;}
\DoxyCodeLine{03440     \textcolor{keywordflow}{for} (i = 0; i < src.\mbox{\hyperlink{structQuad__mesh_acf6fda7d9ed2f0c39e8ff17fb0ef521b}{length}}; i++) \{}
\DoxyCodeLine{03441         \mbox{\hyperlink{structQuad__mesh}{Quad\_mesh}} temp\_quad\_array = \mbox{\hyperlink{Almog__Engine_8h_a328b8b2bb3e397b7d36e72669671868e}{ae\_quad\_project\_world2screen}}(proj\_mat, view\_mat, src.\mbox{\hyperlink{structQuad__mesh_a834716c539e7ceaa66821b4f3de7744d}{elements}}[i], window\_w, window\_h, scene, lighting\_mode);}
\DoxyCodeLine{03442 }
\DoxyCodeLine{03443         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} quad\_index = 0; quad\_index < temp\_quad\_array.\mbox{\hyperlink{structQuad__mesh_acf6fda7d9ed2f0c39e8ff17fb0ef521b}{length}}; quad\_index++) \{}
\DoxyCodeLine{03444             \mbox{\hyperlink{structQuad}{Quad}} temp\_quad = temp\_quad\_array.\mbox{\hyperlink{structQuad__mesh_a834716c539e7ceaa66821b4f3de7744d}{elements}}[quad\_index];}
\DoxyCodeLine{03445             \mbox{\hyperlink{Almog__Dynamic__Array_8h_a61680400e419e2d55c2e3cb9fe96dad7}{ada\_appand}}(\mbox{\hyperlink{structQuad}{Quad}}, temp\_des, temp\_quad);}
\DoxyCodeLine{03446         \}}
\DoxyCodeLine{03447 }
\DoxyCodeLine{03448         free(temp\_quad\_array.\mbox{\hyperlink{structQuad__mesh_a834716c539e7ceaa66821b4f3de7744d}{elements}});}
\DoxyCodeLine{03449     \}}
\DoxyCodeLine{03450 }
\DoxyCodeLine{03451 }
\DoxyCodeLine{03452     \textcolor{comment}{/* clip quad */}}
\DoxyCodeLine{03453     \textcolor{keywordtype}{int} offset = 0;}
\DoxyCodeLine{03454     \mbox{\hyperlink{structMat2D}{Mat2D}} top\_p = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03455     \mbox{\hyperlink{structMat2D}{Mat2D}} top\_n = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03456     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(top\_p, 0);}
\DoxyCodeLine{03457     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(top\_n, 0);}
\DoxyCodeLine{03458     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(top\_p, 1, 0) = 0 + offset;}
\DoxyCodeLine{03459     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(top\_n, 1, 0) = 1;}
\DoxyCodeLine{03460 }
\DoxyCodeLine{03461     \mbox{\hyperlink{structMat2D}{Mat2D}} bottom\_p = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03462     \mbox{\hyperlink{structMat2D}{Mat2D}} bottom\_n = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03463     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(bottom\_p, 0);}
\DoxyCodeLine{03464     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(bottom\_n, 0);}
\DoxyCodeLine{03465     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(bottom\_p, 1, 0) = window\_h -\/ offset;}
\DoxyCodeLine{03466     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(bottom\_n, 1, 0) = -\/1;}
\DoxyCodeLine{03467 }
\DoxyCodeLine{03468     \mbox{\hyperlink{structMat2D}{Mat2D}} left\_p = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03469     \mbox{\hyperlink{structMat2D}{Mat2D}} left\_n = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03470     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(left\_p, 0);}
\DoxyCodeLine{03471     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(left\_n, 0);}
\DoxyCodeLine{03472     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(left\_p, 0, 0) = 0 + offset;}
\DoxyCodeLine{03473     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(left\_n, 0, 0) = 1;}
\DoxyCodeLine{03474 }
\DoxyCodeLine{03475     \mbox{\hyperlink{structMat2D}{Mat2D}} right\_p = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03476     \mbox{\hyperlink{structMat2D}{Mat2D}} right\_n = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03477     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(right\_p, 0);}
\DoxyCodeLine{03478     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(right\_n, 0);}
\DoxyCodeLine{03479     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(right\_p, 0, 0) = window\_w -\/ offset;}
\DoxyCodeLine{03480     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(right\_n, 0, 0) = -\/1;}
\DoxyCodeLine{03481 }
\DoxyCodeLine{03482     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} plane\_number = 0; plane\_number < 4; plane\_number++) \{}
\DoxyCodeLine{03483         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} quad\_index = 0; quad\_index < (int)(temp\_des.\mbox{\hyperlink{structQuad__mesh_acf6fda7d9ed2f0c39e8ff17fb0ef521b}{length}}); quad\_index++) \{}
\DoxyCodeLine{03484             \textcolor{keywordflow}{if} (temp\_des.\mbox{\hyperlink{structQuad__mesh_acf6fda7d9ed2f0c39e8ff17fb0ef521b}{length}} == 0) \{}
\DoxyCodeLine{03485                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{03486             \}}
\DoxyCodeLine{03487             \textcolor{comment}{// if (temp\_des.elements[quad\_index].to\_draw == false) \{}}
\DoxyCodeLine{03488             \textcolor{comment}{//     ada\_remove\_unordered(Quad, temp\_des, quad\_index);}}
\DoxyCodeLine{03489             \textcolor{comment}{//     quad\_index-\/-\/;}}
\DoxyCodeLine{03490             \textcolor{comment}{//     quad\_index = (int)fmaxf((float)quad\_index, 0.0f);}}
\DoxyCodeLine{03491             \textcolor{comment}{//     continue;}}
\DoxyCodeLine{03492             \textcolor{comment}{// \}}}
\DoxyCodeLine{03493             \mbox{\hyperlink{structQuad}{Quad}} clipped\_quad1 = \{0\}, clipped\_quad2 = \{0\};}
\DoxyCodeLine{03494             \textcolor{keywordtype}{int} num\_clipped\_quad;}
\DoxyCodeLine{03495             \textcolor{keywordflow}{switch} (plane\_number) \{}
\DoxyCodeLine{03496                 \textcolor{keywordflow}{case} 0:}
\DoxyCodeLine{03497                     num\_clipped\_quad = \mbox{\hyperlink{Almog__Engine_8h_aff9453f6f1fde30f7752ac03fd49aebb}{ae\_quad\_clip\_with\_plane}}(temp\_des.\mbox{\hyperlink{structQuad__mesh_a834716c539e7ceaa66821b4f3de7744d}{elements}}[quad\_index], top\_p, top\_n, \&clipped\_quad1, \&clipped\_quad2);}
\DoxyCodeLine{03498                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{03499                 \textcolor{keywordflow}{case} 1:}
\DoxyCodeLine{03500                     num\_clipped\_quad = \mbox{\hyperlink{Almog__Engine_8h_aff9453f6f1fde30f7752ac03fd49aebb}{ae\_quad\_clip\_with\_plane}}(temp\_des.\mbox{\hyperlink{structQuad__mesh_a834716c539e7ceaa66821b4f3de7744d}{elements}}[quad\_index], right\_p, right\_n, \&clipped\_quad1, \&clipped\_quad2);}
\DoxyCodeLine{03501                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{03502                 \textcolor{keywordflow}{case} 2:}
\DoxyCodeLine{03503                     num\_clipped\_quad = \mbox{\hyperlink{Almog__Engine_8h_aff9453f6f1fde30f7752ac03fd49aebb}{ae\_quad\_clip\_with\_plane}}(temp\_des.\mbox{\hyperlink{structQuad__mesh_a834716c539e7ceaa66821b4f3de7744d}{elements}}[quad\_index], bottom\_p, bottom\_n, \&clipped\_quad1, \&clipped\_quad2);}
\DoxyCodeLine{03504                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{03505                 \textcolor{keywordflow}{case} 3:}
\DoxyCodeLine{03506                     num\_clipped\_quad = \mbox{\hyperlink{Almog__Engine_8h_aff9453f6f1fde30f7752ac03fd49aebb}{ae\_quad\_clip\_with\_plane}}(temp\_des.\mbox{\hyperlink{structQuad__mesh_a834716c539e7ceaa66821b4f3de7744d}{elements}}[quad\_index], left\_p, left\_n, \&clipped\_quad1, \&clipped\_quad2);}
\DoxyCodeLine{03507                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{03508             \}}
\DoxyCodeLine{03509             \textcolor{keywordflow}{if} (num\_clipped\_quad == -\/1) \{}
\DoxyCodeLine{03510                 fprintf(stderr, \textcolor{stringliteral}{"{}\%s:\%d: [error] problem with clipping quads\(\backslash\)n"{}}, \_\_FILE\_\_, \_\_LINE\_\_);}
\DoxyCodeLine{03511                 exit(1);}
\DoxyCodeLine{03512             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (num\_clipped\_quad == 0) \{}
\DoxyCodeLine{03513                 \mbox{\hyperlink{Almog__Dynamic__Array_8h_a0df1461ea637ae0948bd6dd43b5f08ed}{ada\_remove\_unordered}}(\mbox{\hyperlink{structQuad}{Quad}}, temp\_des, quad\_index);}
\DoxyCodeLine{03514                 quad\_index-\/-\/;}
\DoxyCodeLine{03515                 quad\_index = (int)fmaxf((\textcolor{keywordtype}{float})quad\_index, 0.0f);}
\DoxyCodeLine{03516             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (num\_clipped\_quad == 1) \{}
\DoxyCodeLine{03517                 \mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{ae\_assert\_quad\_is\_valid}}(clipped\_quad1);}
\DoxyCodeLine{03518                 temp\_des.\mbox{\hyperlink{structQuad__mesh_a834716c539e7ceaa66821b4f3de7744d}{elements}}[quad\_index] = clipped\_quad1;}
\DoxyCodeLine{03519             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (num\_clipped\_quad == 2) \{}
\DoxyCodeLine{03520                 \mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{ae\_assert\_quad\_is\_valid}}(clipped\_quad1);}
\DoxyCodeLine{03521                 \mbox{\hyperlink{Almog__Engine_8h_a22d15e5e7a171794c5d7e984e2511beb}{ae\_assert\_quad\_is\_valid}}(clipped\_quad2);}
\DoxyCodeLine{03522                 temp\_des.\mbox{\hyperlink{structQuad__mesh_a834716c539e7ceaa66821b4f3de7744d}{elements}}[quad\_index] = clipped\_quad1;}
\DoxyCodeLine{03523                 \mbox{\hyperlink{Almog__Dynamic__Array_8h_a0c20741fa11196eb7394b8e05b8e0b48}{ada\_insert\_unordered}}(\mbox{\hyperlink{structQuad}{Quad}}, temp\_des, clipped\_quad2, quad\_index+1);}
\DoxyCodeLine{03524                 quad\_index++;}
\DoxyCodeLine{03525             \}}
\DoxyCodeLine{03526         \}}
\DoxyCodeLine{03527     \}}
\DoxyCodeLine{03528 }
\DoxyCodeLine{03529     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(top\_p);}
\DoxyCodeLine{03530     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(top\_n);}
\DoxyCodeLine{03531     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(bottom\_p);}
\DoxyCodeLine{03532     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(bottom\_n);}
\DoxyCodeLine{03533     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(left\_p);}
\DoxyCodeLine{03534     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(left\_n);}
\DoxyCodeLine{03535     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(right\_p);}
\DoxyCodeLine{03536     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(right\_n);}
\DoxyCodeLine{03537 }
\DoxyCodeLine{03538     *des = temp\_des;}
\DoxyCodeLine{03539 \}}
\DoxyCodeLine{03540 }
\DoxyCodeLine{03541 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l03558}\mbox{\hyperlink{Almog__Engine_8h_aaa5131f30f9d6f1844a4422c548b4295}{03558}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_aaa5131f30f9d6f1844a4422c548b4295}{ae\_curve\_project\_world2screen}}(\mbox{\hyperlink{structMat2D}{Mat2D}} proj\_mat, \mbox{\hyperlink{structMat2D}{Mat2D}} view\_mat, \mbox{\hyperlink{structCurve}{Curve}} *des, \mbox{\hyperlink{structCurve}{Curve}} src, \textcolor{keywordtype}{int} window\_w, \textcolor{keywordtype}{int} window\_h, \mbox{\hyperlink{structScene}{Scene}} *scene)}
\DoxyCodeLine{03559 \{}
\DoxyCodeLine{03560     \mbox{\hyperlink{Almog__Engine_8h_aac75dd9d298e655d12249edc154e7591}{ae\_curve\_copy}}(des, src);}
\DoxyCodeLine{03561     \mbox{\hyperlink{structCurve}{Curve}} temp\_des = *des;}
\DoxyCodeLine{03562     \textcolor{comment}{/* set planes */}}
\DoxyCodeLine{03563     \textcolor{keywordtype}{int} offset = 50;}
\DoxyCodeLine{03564     \mbox{\hyperlink{structMat2D}{Mat2D}} top\_p = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03565     \mbox{\hyperlink{structMat2D}{Mat2D}} top\_n = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03566     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(top\_p, 0);}
\DoxyCodeLine{03567     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(top\_n, 0);}
\DoxyCodeLine{03568     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(top\_p, 1, 0) = 0 + offset;}
\DoxyCodeLine{03569     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(top\_n, 1, 0) = 1;}
\DoxyCodeLine{03570     \mbox{\hyperlink{structMat2D}{Mat2D}} bottom\_p = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03571     \mbox{\hyperlink{structMat2D}{Mat2D}} bottom\_n = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03572     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(bottom\_p, 0);}
\DoxyCodeLine{03573     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(bottom\_n, 0);}
\DoxyCodeLine{03574     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(bottom\_p, 1, 0) = window\_h -\/ offset;}
\DoxyCodeLine{03575     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(bottom\_n, 1, 0) = -\/1;}
\DoxyCodeLine{03576     \mbox{\hyperlink{structMat2D}{Mat2D}} left\_p = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03577     \mbox{\hyperlink{structMat2D}{Mat2D}} left\_n = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03578     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(left\_p, 0);}
\DoxyCodeLine{03579     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(left\_n, 0);}
\DoxyCodeLine{03580     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(left\_p, 0, 0) = 0 + offset;}
\DoxyCodeLine{03581     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(left\_n, 0, 0) = 1;}
\DoxyCodeLine{03582     \mbox{\hyperlink{structMat2D}{Mat2D}} right\_p = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03583     \mbox{\hyperlink{structMat2D}{Mat2D}} right\_n = \mbox{\hyperlink{Matrix2D_8h_aea533ae4263119e0abba26e2d87182dd}{mat2D\_alloc}}(3, 1);}
\DoxyCodeLine{03584     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(right\_p, 0);}
\DoxyCodeLine{03585     \mbox{\hyperlink{Matrix2D_8h_a4277c771e5ccfc6b6192f6a5e662a7b4}{mat2D\_fill}}(right\_n, 0);}
\DoxyCodeLine{03586     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(right\_p, 0, 0) = window\_w -\/ offset;}
\DoxyCodeLine{03587     \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(right\_n, 0, 0) = -\/1;}
\DoxyCodeLine{03588 }
\DoxyCodeLine{03589     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} point\_index = 0; point\_index < temp\_des.\mbox{\hyperlink{structCurve_a883f62ca803547dbfe6159200e775b76}{length}}-\/1; point\_index++) \{}
\DoxyCodeLine{03590         \mbox{\hyperlink{structPoint}{Point}} start\_src\_point = src.\mbox{\hyperlink{structCurve_a9ec44e5490914bd92c039a365980fe56}{elements}}[point\_index];}
\DoxyCodeLine{03591         \mbox{\hyperlink{structPoint}{Point}} end\_src\_point = src.\mbox{\hyperlink{structCurve_a9ec44e5490914bd92c039a365980fe56}{elements}}[point\_index+1];}
\DoxyCodeLine{03592 }
\DoxyCodeLine{03593         \mbox{\hyperlink{structPoint}{Point}} start\_des\_point = \{0\}, end\_des\_point = \{0\};}
\DoxyCodeLine{03594 }
\DoxyCodeLine{03595         \mbox{\hyperlink{Almog__Engine_8h_ae7ed56cd28c920fcd190a3d8ff3e0283}{ae\_line\_project\_world2screen}}(view\_mat, proj\_mat, start\_src\_point, end\_src\_point, window\_w, window\_h, \&start\_des\_point, \&end\_des\_point, scene);}
\DoxyCodeLine{03596 }
\DoxyCodeLine{03597 }
\DoxyCodeLine{03598         \mbox{\hyperlink{structPoint}{Point}} clipped\_start\_des\_point = \{0\}, clipped\_end\_des\_point = \{0\};}
\DoxyCodeLine{03599 }
\DoxyCodeLine{03600         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} plane\_number = 0; plane\_number < 4; plane\_number++) \{}
\DoxyCodeLine{03601             \textcolor{keywordtype}{int} rc;}
\DoxyCodeLine{03602             \textcolor{keywordflow}{switch} (plane\_number) \{}
\DoxyCodeLine{03603                 \textcolor{keywordflow}{case} 0:}
\DoxyCodeLine{03604                     rc = \mbox{\hyperlink{Almog__Engine_8h_a16d1ee56f32a7e62f49bdee310d580c0}{ae\_line\_clip\_with\_plane}}(start\_des\_point, end\_des\_point, top\_p, top\_n, \&clipped\_start\_des\_point, \&clipped\_end\_des\_point);           }
\DoxyCodeLine{03605                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{03606                 \textcolor{keywordflow}{case} 1:}
\DoxyCodeLine{03607                     rc = \mbox{\hyperlink{Almog__Engine_8h_a16d1ee56f32a7e62f49bdee310d580c0}{ae\_line\_clip\_with\_plane}}(start\_des\_point, end\_des\_point, right\_p, right\_n, \&clipped\_start\_des\_point, \&clipped\_end\_des\_point);           }
\DoxyCodeLine{03608                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{03609                 \textcolor{keywordflow}{case} 2:}
\DoxyCodeLine{03610                     rc = \mbox{\hyperlink{Almog__Engine_8h_a16d1ee56f32a7e62f49bdee310d580c0}{ae\_line\_clip\_with\_plane}}(start\_des\_point, end\_des\_point, bottom\_p, bottom\_n, \&clipped\_start\_des\_point, \&clipped\_end\_des\_point);           }
\DoxyCodeLine{03611                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{03612                 \textcolor{keywordflow}{case} 3:}
\DoxyCodeLine{03613                     rc = \mbox{\hyperlink{Almog__Engine_8h_a16d1ee56f32a7e62f49bdee310d580c0}{ae\_line\_clip\_with\_plane}}(start\_des\_point, end\_des\_point, left\_p, left\_n, \&clipped\_start\_des\_point, \&clipped\_end\_des\_point);           }
\DoxyCodeLine{03614                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{03615             \}}
\DoxyCodeLine{03616             \textcolor{keywordflow}{if} (rc == -\/1) \{}
\DoxyCodeLine{03617                 fprintf(stderr, \textcolor{stringliteral}{"{}\%s:\%d: [error] problem with clipping lines\(\backslash\)n"{}}, \_\_FILE\_\_, \_\_LINE\_\_);}
\DoxyCodeLine{03618                 exit(1);}
\DoxyCodeLine{03619             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (rc == 0) \{}
\DoxyCodeLine{03620                 clipped\_start\_des\_point = (\mbox{\hyperlink{structPoint}{Point}})\{-\/1,-\/1,1,1\};}
\DoxyCodeLine{03621                 clipped\_end\_des\_point = (\mbox{\hyperlink{structPoint}{Point}})\{-\/1,-\/1,1,1\};}
\DoxyCodeLine{03622                 start\_des\_point = clipped\_start\_des\_point;}
\DoxyCodeLine{03623                 end\_des\_point = clipped\_end\_des\_point;}
\DoxyCodeLine{03624                 temp\_des.\mbox{\hyperlink{structCurve_a9ec44e5490914bd92c039a365980fe56}{elements}}[point\_index] = start\_des\_point;}
\DoxyCodeLine{03625                 temp\_des.\mbox{\hyperlink{structCurve_a9ec44e5490914bd92c039a365980fe56}{elements}}[point\_index+1] = end\_des\_point;}
\DoxyCodeLine{03626             \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (rc == 1) \{}
\DoxyCodeLine{03627                 start\_des\_point = clipped\_start\_des\_point;}
\DoxyCodeLine{03628                 end\_des\_point = clipped\_end\_des\_point;}
\DoxyCodeLine{03629                 temp\_des.\mbox{\hyperlink{structCurve_a9ec44e5490914bd92c039a365980fe56}{elements}}[point\_index] = start\_des\_point;}
\DoxyCodeLine{03630                 temp\_des.\mbox{\hyperlink{structCurve_a9ec44e5490914bd92c039a365980fe56}{elements}}[point\_index+1] = end\_des\_point;}
\DoxyCodeLine{03631             \}}
\DoxyCodeLine{03632         \}}
\DoxyCodeLine{03633 }
\DoxyCodeLine{03634     \}}
\DoxyCodeLine{03635 }
\DoxyCodeLine{03636     \mbox{\hyperlink{structPoint}{Point}} default\_point = (\mbox{\hyperlink{structPoint}{Point}})\{-\/1,-\/1,1,1\};}
\DoxyCodeLine{03637     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < (int)temp\_des.\mbox{\hyperlink{structCurve_a883f62ca803547dbfe6159200e775b76}{length}}; i++) \{}
\DoxyCodeLine{03638         \textcolor{keywordflow}{if} (\mbox{\hyperlink{Almog__Engine_8h_a640ff0675ee6dc6d040bf5941be08258}{ae\_points\_equal}}(temp\_des.\mbox{\hyperlink{structCurve_a9ec44e5490914bd92c039a365980fe56}{elements}}[i], default\_point)) \{}
\DoxyCodeLine{03639             \mbox{\hyperlink{Almog__Dynamic__Array_8h_a7dd2b8250e6b1be7d5a44ed761c35971}{ada\_remove}}(\mbox{\hyperlink{structPoint}{Point}}, temp\_des, i);}
\DoxyCodeLine{03640             i-\/-\/;}
\DoxyCodeLine{03641         \}}
\DoxyCodeLine{03642     \}}
\DoxyCodeLine{03643 }
\DoxyCodeLine{03644     *des = temp\_des;}
\DoxyCodeLine{03645 }
\DoxyCodeLine{03646     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(top\_p);}
\DoxyCodeLine{03647     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(top\_n);}
\DoxyCodeLine{03648     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(bottom\_p);}
\DoxyCodeLine{03649     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(bottom\_n);}
\DoxyCodeLine{03650     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(left\_p);}
\DoxyCodeLine{03651     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(left\_n);}
\DoxyCodeLine{03652     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(right\_p);}
\DoxyCodeLine{03653     \mbox{\hyperlink{Matrix2D_8h_a4d2d183b2cb18394e8c7e1e11f97b3ef}{mat2D\_free}}(right\_n);}
\DoxyCodeLine{03654 \}}
\DoxyCodeLine{03655 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l03670}\mbox{\hyperlink{Almog__Engine_8h_af7b851c934b815c8b57bac30b0b1cdae}{03670}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_af7b851c934b815c8b57bac30b0b1cdae}{ae\_curve\_ada\_project\_world2screen}}(\mbox{\hyperlink{structMat2D}{Mat2D}} proj\_mat, \mbox{\hyperlink{structMat2D}{Mat2D}} view\_mat, \mbox{\hyperlink{structCurve__ada}{Curve\_ada}} *des, \mbox{\hyperlink{structCurve__ada}{Curve\_ada}} src, \textcolor{keywordtype}{int} window\_w, \textcolor{keywordtype}{int} window\_h, \mbox{\hyperlink{structScene}{Scene}} *scene)}
\DoxyCodeLine{03671 \{}
\DoxyCodeLine{03672     \textcolor{keywordflow}{if} (src.\mbox{\hyperlink{structCurve__ada_ad3f75cc33ff2610b1ab31a64ca6ecc91}{length}} == 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{03673     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} curve\_index = 0; curve\_index < src.\mbox{\hyperlink{structCurve__ada_ad3f75cc33ff2610b1ab31a64ca6ecc91}{length}}; curve\_index++) \{}
\DoxyCodeLine{03674         \mbox{\hyperlink{Almog__Engine_8h_aaa5131f30f9d6f1844a4422c548b4295}{ae\_curve\_project\_world2screen}}(proj\_mat, view\_mat, \&(des-\/>\mbox{\hyperlink{structCurve__ada_ac06bc687ac15c82dd410ca6634beaa68}{elements}}[curve\_index]), src.\mbox{\hyperlink{structCurve__ada_ac06bc687ac15c82dd410ca6634beaa68}{elements}}[curve\_index], window\_w, window\_h, scene);}
\DoxyCodeLine{03675     \}}
\DoxyCodeLine{03676 \}}
\DoxyCodeLine{03677 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l03691}\mbox{\hyperlink{Almog__Engine_8h_a01d0c3758b20d64c1cbbb2a73a1cdd6c}{03691}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_a01d0c3758b20d64c1cbbb2a73a1cdd6c}{ae\_grid\_project\_world2screen}}(\mbox{\hyperlink{structMat2D}{Mat2D}} proj\_mat, \mbox{\hyperlink{structMat2D}{Mat2D}} view\_mat, \mbox{\hyperlink{structGrid}{Grid}} des, \mbox{\hyperlink{structGrid}{Grid}} src, \textcolor{keywordtype}{int} window\_w, \textcolor{keywordtype}{int} window\_h, \mbox{\hyperlink{structScene}{Scene}} *scene)}
\DoxyCodeLine{03692 \{}
\DoxyCodeLine{03693     \textcolor{keywordflow}{if} (src.\mbox{\hyperlink{structGrid_afdfaa9532a5e1577b99168f4160759d8}{curves}}.\mbox{\hyperlink{structCurve__ada_ad3f75cc33ff2610b1ab31a64ca6ecc91}{length}} == 0) \textcolor{keywordflow}{return};}
\DoxyCodeLine{03694     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} curve\_index = 0; curve\_index < src.\mbox{\hyperlink{structGrid_afdfaa9532a5e1577b99168f4160759d8}{curves}}.\mbox{\hyperlink{structCurve__ada_ad3f75cc33ff2610b1ab31a64ca6ecc91}{length}}; curve\_index++) \{}
\DoxyCodeLine{03695         \mbox{\hyperlink{Almog__Engine_8h_aaa5131f30f9d6f1844a4422c548b4295}{ae\_curve\_project\_world2screen}}(proj\_mat, view\_mat, \&(des.\mbox{\hyperlink{structGrid_afdfaa9532a5e1577b99168f4160759d8}{curves}}.\mbox{\hyperlink{structCurve__ada_ac06bc687ac15c82dd410ca6634beaa68}{elements}}[curve\_index]), src.\mbox{\hyperlink{structGrid_afdfaa9532a5e1577b99168f4160759d8}{curves}}.\mbox{\hyperlink{structCurve__ada_ac06bc687ac15c82dd410ca6634beaa68}{elements}}[curve\_index], window\_w, window\_h, scene);}
\DoxyCodeLine{03696     \}}
\DoxyCodeLine{03697 \}}
\DoxyCodeLine{03698 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l03706}\mbox{\hyperlink{Almog__Engine_8h_a4140d91e2951f6867592ed4dd685b5b3}{03706}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_a4140d91e2951f6867592ed4dd685b5b3}{ae\_tri\_swap}}(\mbox{\hyperlink{structTri}{Tri}} *v, \textcolor{keywordtype}{int} i, \textcolor{keywordtype}{int} j)}
\DoxyCodeLine{03707 \{}
\DoxyCodeLine{03708     \mbox{\hyperlink{structTri}{Tri}} temp;}
\DoxyCodeLine{03709 }
\DoxyCodeLine{03710     temp = v[i];}
\DoxyCodeLine{03711     v[i] = v[j];}
\DoxyCodeLine{03712     v[j] = temp;}
\DoxyCodeLine{03713 \}}
\DoxyCodeLine{03714 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l03725}\mbox{\hyperlink{Almog__Engine_8h_ac07fff7a48f2dc40046df5f8794d61d2}{03725}} \textcolor{keywordtype}{bool} \mbox{\hyperlink{Almog__Engine_8h_ac07fff7a48f2dc40046df5f8794d61d2}{ae\_tri\_compare}}(\mbox{\hyperlink{structTri}{Tri}} t1, \mbox{\hyperlink{structTri}{Tri}} t2)}
\DoxyCodeLine{03726 \{}
\DoxyCodeLine{03727     \textcolor{keywordtype}{float} t1\_z\_max = fmaxf(t1.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0].\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}}, fmaxf(t1.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[1].\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}}, t1.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[2].\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}}));}
\DoxyCodeLine{03728     \textcolor{keywordtype}{float} t2\_z\_max = fmaxf(t2.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[0].\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}}, fmaxf(t2.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[1].\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}}, t2.\mbox{\hyperlink{structTri_a38f5d10a7f896472fbd8d635f0f7cd03}{points}}[2].\mbox{\hyperlink{structPoint_a9a666531e0e99adff132be93d2407d0c}{z}}));}
\DoxyCodeLine{03729 }
\DoxyCodeLine{03730     \textcolor{keywordflow}{return} t1\_z\_max > t2\_z\_max;}
\DoxyCodeLine{03731 \}}
\DoxyCodeLine{03732 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l03742}\mbox{\hyperlink{Almog__Engine_8h_a6163eec1246f36c8f1f16f40c436bb14}{03742}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_a6163eec1246f36c8f1f16f40c436bb14}{ae\_tri\_qsort}}(\mbox{\hyperlink{structTri}{Tri}} *v, \textcolor{keywordtype}{int} left, \textcolor{keywordtype}{int} right)}
\DoxyCodeLine{03743 \{}
\DoxyCodeLine{03744     \textcolor{keywordtype}{int} i, last;}
\DoxyCodeLine{03745 }
\DoxyCodeLine{03746     \textcolor{keywordflow}{if} (left >= right)                  \textcolor{comment}{/* do nothing if array contains */}}
\DoxyCodeLine{03747         \textcolor{keywordflow}{return};                         \textcolor{comment}{/* fewer than two elements */}}
\DoxyCodeLine{03748     \mbox{\hyperlink{Almog__Engine_8h_a4140d91e2951f6867592ed4dd685b5b3}{ae\_tri\_swap}}(v, left, (left + right) / 2);  \textcolor{comment}{/* move partition elem */}}
\DoxyCodeLine{03749     last = left;                        \textcolor{comment}{/* to v[0] */}}
\DoxyCodeLine{03750     \textcolor{keywordflow}{for} (i = left + 1; i <= right; i++) \textcolor{comment}{/* partition */}}
\DoxyCodeLine{03751         \textcolor{keywordflow}{if} (\mbox{\hyperlink{Almog__Engine_8h_ac07fff7a48f2dc40046df5f8794d61d2}{ae\_tri\_compare}}(v[i], v[left]))}
\DoxyCodeLine{03752             \mbox{\hyperlink{Almog__Engine_8h_a4140d91e2951f6867592ed4dd685b5b3}{ae\_tri\_swap}}(v, ++last, i);}
\DoxyCodeLine{03753     \mbox{\hyperlink{Almog__Engine_8h_a4140d91e2951f6867592ed4dd685b5b3}{ae\_tri\_swap}}(v, left, last); \textcolor{comment}{/* restore partition elem */}}
\DoxyCodeLine{03754     \mbox{\hyperlink{Almog__Engine_8h_a6163eec1246f36c8f1f16f40c436bb14}{ae\_tri\_qsort}}(v, left, last -\/ 1);}
\DoxyCodeLine{03755     \mbox{\hyperlink{Almog__Engine_8h_a6163eec1246f36c8f1f16f40c436bb14}{ae\_tri\_qsort}}(v, last + 1, right);}
\DoxyCodeLine{03756 \}}
\DoxyCodeLine{03757 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l03770}\mbox{\hyperlink{Almog__Engine_8h_adfbb375cedddf064ca503a0520c66829}{03770}} \textcolor{keywordtype}{double} \mbox{\hyperlink{Almog__Engine_8h_adfbb375cedddf064ca503a0520c66829}{ae\_linear\_map}}(\textcolor{keywordtype}{double} s, \textcolor{keywordtype}{double} min\_in, \textcolor{keywordtype}{double} max\_in, \textcolor{keywordtype}{double} min\_out, \textcolor{keywordtype}{double} max\_out)}
\DoxyCodeLine{03771 \{}
\DoxyCodeLine{03772     \textcolor{keywordflow}{return} (min\_out + ((s-\/min\_in)*(max\_out-\/min\_out))/(max\_in-\/min\_in));}
\DoxyCodeLine{03773 \}}
\DoxyCodeLine{03774 }
\DoxyCodeLine{\Hypertarget{Almog__Engine_8h_source_l03785}\mbox{\hyperlink{Almog__Engine_8h_aa9ee39b8a678005ae0d531d9d1356a30}{03785}} \textcolor{keywordtype}{void} \mbox{\hyperlink{Almog__Engine_8h_aa9ee39b8a678005ae0d531d9d1356a30}{ae\_z\_buffer\_copy\_to\_screen}}(\mbox{\hyperlink{structMat2D__uint32}{Mat2D\_uint32}} screen\_mat, \mbox{\hyperlink{structMat2D}{Mat2D}} inv\_z\_buffer)}
\DoxyCodeLine{03786 \{}
\DoxyCodeLine{03787     \textcolor{keywordtype}{double} max\_inv\_z = 0;}
\DoxyCodeLine{03788     \textcolor{keywordtype}{double} min\_inv\_z = DBL\_MAX;}
\DoxyCodeLine{03789     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < inv\_z\_buffer.\mbox{\hyperlink{structMat2D_ae2c1f099d11352ac91db1ff1b0c8ed0a}{rows}}; i++) \{}
\DoxyCodeLine{03790         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} j = 0; j < inv\_z\_buffer.\mbox{\hyperlink{structMat2D_ae9c10e24bb9e8d68c3ba96eb1cca3c5c}{cols}}; j++) \{}
\DoxyCodeLine{03791             \textcolor{keywordflow}{if} (\mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(inv\_z\_buffer, i, j) > max\_inv\_z) \{}
\DoxyCodeLine{03792                 max\_inv\_z = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(inv\_z\_buffer, i, j);}
\DoxyCodeLine{03793             \}}
\DoxyCodeLine{03794             \textcolor{keywordflow}{if} (\mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(inv\_z\_buffer, i, j) < min\_inv\_z \&\& \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(inv\_z\_buffer, i, j) > 0) \{}
\DoxyCodeLine{03795                 min\_inv\_z = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(inv\_z\_buffer, i, j);}
\DoxyCodeLine{03796             \}}
\DoxyCodeLine{03797         \}}
\DoxyCodeLine{03798     \}}
\DoxyCodeLine{03799     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < inv\_z\_buffer.\mbox{\hyperlink{structMat2D_ae2c1f099d11352ac91db1ff1b0c8ed0a}{rows}}; i++) \{}
\DoxyCodeLine{03800         \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} j = 0; j < inv\_z\_buffer.\mbox{\hyperlink{structMat2D_ae9c10e24bb9e8d68c3ba96eb1cca3c5c}{cols}}; j++) \{}
\DoxyCodeLine{03801             \textcolor{keywordtype}{double} z\_fraq = \mbox{\hyperlink{Matrix2D_8h_abdffe058c709b68f7d491ac9bf23f52e}{MAT2D\_AT}}(inv\_z\_buffer, i, j);}
\DoxyCodeLine{03802             z\_fraq = fmax(z\_fraq, min\_inv\_z);}
\DoxyCodeLine{03803             z\_fraq = \mbox{\hyperlink{Almog__Engine_8h_adfbb375cedddf064ca503a0520c66829}{ae\_linear\_map}}(z\_fraq, min\_inv\_z, max\_inv\_z, 0.1, 1);}
\DoxyCodeLine{03804             uint32\_t color = \mbox{\hyperlink{Almog__Draw__Library_8h_ae5c9bd99d773c485b76cef79ced9ef29}{RGB\_hexRGB}}(0xFF*z\_fraq, 0xFF*z\_fraq, 0xFF*z\_fraq); }
\DoxyCodeLine{03805             \mbox{\hyperlink{Matrix2D_8h_aa1863fe86a08bbc48ddaa1137dbb82c2}{MAT2D\_AT\_UINT32}}(screen\_mat, i, j) = color;}
\DoxyCodeLine{03806         \}}
\DoxyCodeLine{03807     \}}
\DoxyCodeLine{03808 \}}
\DoxyCodeLine{03809 }
\DoxyCodeLine{03810 \textcolor{preprocessor}{\#endif }\textcolor{comment}{/* ALMOG\_ENGINE\_IMPLEMENTATION */}\textcolor{preprocessor}{ }\textcolor{comment}{//}}

\end{DoxyCode}
