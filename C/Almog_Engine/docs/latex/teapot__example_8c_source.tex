\hypertarget{teapot__example_8c_source}{}\doxysection{teapot\+\_\+example.\+c}
\label{teapot__example_8c_source}\index{src/teapot\_example.c@{src/teapot\_example.c}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{teapot__example_8c_source_l00001}\mbox{\hyperlink{teapot__example_8c_ac3b15998ba7221fca6fc579b1cd60557}{00001}} \textcolor{preprocessor}{\#define SETUP}}
\DoxyCodeLine{\Hypertarget{teapot__example_8c_source_l00002}\mbox{\hyperlink{teapot__example_8c_ac2558c32fa879d85fe59f8c5f8dfbc04}{00002}} \textcolor{preprocessor}{\#define UPDATE}}
\DoxyCodeLine{\Hypertarget{teapot__example_8c_source_l00003}\mbox{\hyperlink{teapot__example_8c_ada165dd53c6f81f42de99c903e5eece0}{00003}} \textcolor{preprocessor}{\#define RENDER}}
\DoxyCodeLine{00004 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{display_8c}{./include/display.c}}"{}}}
\DoxyCodeLine{\Hypertarget{teapot__example_8c_source_l00005}\mbox{\hyperlink{teapot__example_8c_aed3a01dc18a629a4bd301adbdf7d18c9}{00005}} \textcolor{preprocessor}{\#define MATRIX2D\_IMPLEMENTATION}}
\DoxyCodeLine{00006 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{Matrix2D_8h}{./include/Matrix2D.h}}"{}}}
\DoxyCodeLine{\Hypertarget{teapot__example_8c_source_l00007}\mbox{\hyperlink{teapot__example_8c_a52d0e780f8c45ff51f416c8f723c7a61}{00007}} \textcolor{preprocessor}{\#define ALMOG\_DRAW\_LIBRARY\_IMPLEMENTATION}}
\DoxyCodeLine{00008 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{Almog__Draw__Library_8h}{./include/Almog\_Draw\_Library.h}}"{}}}
\DoxyCodeLine{\Hypertarget{teapot__example_8c_source_l00009}\mbox{\hyperlink{teapot__example_8c_a290136da464257fba7d1bec5124e8d24}{00009}} \textcolor{preprocessor}{\#define ALMOG\_ENGINE\_IMPLEMENTATION}}
\DoxyCodeLine{00010 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{Almog__Engine_8h}{./include/Almog\_Engine.h}}"{}}}
\DoxyCodeLine{00011 }
\DoxyCodeLine{\Hypertarget{teapot__example_8c_source_l00012}\mbox{\hyperlink{teapot__example_8c_ab919e5f7eac1e9022a91a3a237b2951a}{00012}} \textcolor{keywordtype}{void} \mbox{\hyperlink{teapot__example_8c_ab919e5f7eac1e9022a91a3a237b2951a}{setup}}(\mbox{\hyperlink{structgame__state__t}{game\_state\_t}} *game\_state)}
\DoxyCodeLine{00013 \{}
\DoxyCodeLine{00014     game\_state-\/>\mbox{\hyperlink{structgame__state__t_a8e6cb4795386cf591de467c4506fa4b5}{to\_limit\_fps}} = 0;}
\DoxyCodeLine{00015 }
\DoxyCodeLine{00016     \mbox{\hyperlink{Almog__Dynamic__Array_8h_aac157302e0837f301f0c915360cfb182}{ada\_init\_array}}(\mbox{\hyperlink{structTri__mesh}{Tri\_mesh}}, game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a4e2a307f1316341bbc09a13a9c9eba0b}{original\_tri\_meshes}});}
\DoxyCodeLine{00017     \mbox{\hyperlink{Almog__Dynamic__Array_8h_aac157302e0837f301f0c915360cfb182}{ada\_init\_array}}(\mbox{\hyperlink{structTri__mesh}{Tri\_mesh}}, game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a55369afcc314fe6bef1ecb6e0c322441}{in\_world\_tri\_meshes}});}
\DoxyCodeLine{00018     \mbox{\hyperlink{Almog__Dynamic__Array_8h_aac157302e0837f301f0c915360cfb182}{ada\_init\_array}}(\mbox{\hyperlink{structTri__mesh}{Tri\_mesh}}, game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a231ca7798cdad79a7622874c02d19d7e}{projected\_tri\_meshes}});}
\DoxyCodeLine{00019 }
\DoxyCodeLine{00020     \textcolor{keywordtype}{char} file\_path[\mbox{\hyperlink{Almog__String__Manipulation_8h_a076fd3c5ba5ac7c6bbedb64c188565f3}{MAX\_LEN\_LINE}}];}
\DoxyCodeLine{00021     strncpy(file\_path, \textcolor{stringliteral}{"{}./teapot.stl"{}}, \mbox{\hyperlink{Almog__String__Manipulation_8h_a076fd3c5ba5ac7c6bbedb64c188565f3}{MAX\_LEN\_LINE}});}
\DoxyCodeLine{00022 }
\DoxyCodeLine{00023     \mbox{\hyperlink{structTri__mesh}{Tri\_mesh}} teapot\_mesh = \mbox{\hyperlink{Almog__Engine_8h_af8271eb7d6d313acddd78b4bcf6a8555}{ae\_tri\_mesh\_get\_from\_file}}(file\_path);}
\DoxyCodeLine{00024     \textcolor{comment}{// ae\_tri\_mesh\_flip\_normals(teapot\_mesh);   }}
\DoxyCodeLine{00025     \mbox{\hyperlink{Almog__Dynamic__Array_8h_a61680400e419e2d55c2e3cb9fe96dad7}{ada\_appand}}(\mbox{\hyperlink{structTri__mesh}{Tri\_mesh}}, game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a4e2a307f1316341bbc09a13a9c9eba0b}{original\_tri\_meshes}}, teapot\_mesh);}
\DoxyCodeLine{00026 }
\DoxyCodeLine{00027     printf(\textcolor{stringliteral}{"{}[INFO] number of meshes: \%zu\(\backslash\)n"{}}, game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a4e2a307f1316341bbc09a13a9c9eba0b}{original\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_acb45e304ded2b6eddf5eb3dab3e66609}{length}});}
\DoxyCodeLine{00028     \textcolor{keywordtype}{size\_t} sum = 0;}
\DoxyCodeLine{00029     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a4e2a307f1316341bbc09a13a9c9eba0b}{original\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_acb45e304ded2b6eddf5eb3dab3e66609}{length}}; i++) \{}
\DoxyCodeLine{00030         printf(\textcolor{stringliteral}{"{}[INFO] mesh number \%zu: \%zu\(\backslash\)n"{}}, i, game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a4e2a307f1316341bbc09a13a9c9eba0b}{original\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_afe536b7ba3c01eee05be25677d1eb692}{elements}}[i].\mbox{\hyperlink{structTri__mesh_a0fb2a2069a57bd77bac6a91a3b2e4ffb}{length}});}
\DoxyCodeLine{00031         sum += game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a4e2a307f1316341bbc09a13a9c9eba0b}{original\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_afe536b7ba3c01eee05be25677d1eb692}{elements}}[i].\mbox{\hyperlink{structTri__mesh_a0fb2a2069a57bd77bac6a91a3b2e4ffb}{length}};}
\DoxyCodeLine{00032     \}}
\DoxyCodeLine{00033     printf(\textcolor{stringliteral}{"{}[INFO] total number of triangles: \%zu\(\backslash\)n"{}}, sum);}
\DoxyCodeLine{00034 }
\DoxyCodeLine{00035 }
\DoxyCodeLine{00036     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a4e2a307f1316341bbc09a13a9c9eba0b}{original\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_acb45e304ded2b6eddf5eb3dab3e66609}{length}}; i++) \{}
\DoxyCodeLine{00037         \mbox{\hyperlink{Almog__Engine_8h_ae970b00a8720bd46cf0743327170b4c2}{ae\_tri\_mesh\_normalize}}(game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a4e2a307f1316341bbc09a13a9c9eba0b}{original\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_afe536b7ba3c01eee05be25677d1eb692}{elements}}[i]);}
\DoxyCodeLine{00038     \}}
\DoxyCodeLine{00039     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a4e2a307f1316341bbc09a13a9c9eba0b}{original\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_acb45e304ded2b6eddf5eb3dab3e66609}{length}}; i++) \{}
\DoxyCodeLine{00040         \mbox{\hyperlink{Almog__Engine_8h_abf4e49af66c2e3d0c5d8fba65ce4f2bc}{ae\_tri\_mesh\_appand\_copy}}(\&(game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a55369afcc314fe6bef1ecb6e0c322441}{in\_world\_tri\_meshes}}), game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a4e2a307f1316341bbc09a13a9c9eba0b}{original\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_afe536b7ba3c01eee05be25677d1eb692}{elements}}[i]);}
\DoxyCodeLine{00041         \mbox{\hyperlink{Almog__Engine_8h_abf4e49af66c2e3d0c5d8fba65ce4f2bc}{ae\_tri\_mesh\_appand\_copy}}(\&(game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a231ca7798cdad79a7622874c02d19d7e}{projected\_tri\_meshes}}), game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a4e2a307f1316341bbc09a13a9c9eba0b}{original\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_afe536b7ba3c01eee05be25677d1eb692}{elements}}[i]);}
\DoxyCodeLine{00042         game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a231ca7798cdad79a7622874c02d19d7e}{projected\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_afe536b7ba3c01eee05be25677d1eb692}{elements}}[i].\mbox{\hyperlink{structTri__mesh_a0fb2a2069a57bd77bac6a91a3b2e4ffb}{length}} = 0;}
\DoxyCodeLine{00043     \}}
\DoxyCodeLine{00044 }
\DoxyCodeLine{00045     \mbox{\hyperlink{Almog__Engine_8h_a7b0d79ba4b2f6afdbe3c40c5a1a175de}{ae\_tri\_mesh\_rotate\_Euler\_xyz}}(game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a55369afcc314fe6bef1ecb6e0c322441}{in\_world\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_afe536b7ba3c01eee05be25677d1eb692}{elements}}[0], -\/90, 0, 180);}
\DoxyCodeLine{00046 }
\DoxyCodeLine{00047     \textcolor{comment}{// ae\_translate\_mesh(game\_state-\/>scene.in\_world\_tri\_meshes.elements[0], 0, 0, 2);}}
\DoxyCodeLine{00048 \}}
\DoxyCodeLine{00049 }
\DoxyCodeLine{\Hypertarget{teapot__example_8c_source_l00050}\mbox{\hyperlink{teapot__example_8c_a7f53f0ea95214cad6d6593c69f696bb1}{00050}} \textcolor{keywordtype}{void} \mbox{\hyperlink{teapot__example_8c_a7f53f0ea95214cad6d6593c69f696bb1}{update}}(\mbox{\hyperlink{structgame__state__t}{game\_state\_t}} *game\_state)}
\DoxyCodeLine{00051 \{}
\DoxyCodeLine{00052     \mbox{\hyperlink{Almog__Engine_8h_a1b7def01c3bfc991682cdd645b806672}{ae\_projection\_mat\_set}}(game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a1c025ef379d04de976fcb20e60edddcd}{proj\_mat}}, game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a5742c2c47c7afc5a6d49b6e5759db3cd}{aspect\_ratio}}, game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a3d5ecfc703004c3d4e1098c0e9575e35}{fov\_deg}}, game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a14ebc5ce9490721428eaf1ca023322f9}{z\_near}}, game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}.\mbox{\hyperlink{structCamera_a49a09d8504a193843ae9496397a5a883}{z\_far}});}
\DoxyCodeLine{00053     \mbox{\hyperlink{Almog__Engine_8h_a973977dd2f135de3e1091cf8bbd0f7ff}{ae\_view\_mat\_set}}(game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a13d59c30261bd4a5d0186f0c2574da91}{view\_mat}}, game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_afed13ec4ba2d7ab75b273d507911b498}{camera}}, game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a8fd91747dcef00dac514445c8ea8cb9a}{up\_direction}});}
\DoxyCodeLine{00054 }
\DoxyCodeLine{00055     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a55369afcc314fe6bef1ecb6e0c322441}{in\_world\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_acb45e304ded2b6eddf5eb3dab3e66609}{length}}; i++) \{}
\DoxyCodeLine{00056         \mbox{\hyperlink{Almog__Engine_8h_ad67eee66e34c55818406703f2a13ccd5}{ae\_tri\_mesh\_project\_world2screen}}(game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a1c025ef379d04de976fcb20e60edddcd}{proj\_mat}}, game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a13d59c30261bd4a5d0186f0c2574da91}{view\_mat}}, \&(game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a231ca7798cdad79a7622874c02d19d7e}{projected\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_afe536b7ba3c01eee05be25677d1eb692}{elements}}[i]), game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a55369afcc314fe6bef1ecb6e0c322441}{in\_world\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_afe536b7ba3c01eee05be25677d1eb692}{elements}}[i], game\_state-\/>\mbox{\hyperlink{structgame__state__t_a5c85c4e78568f0993d9c4f755f3379b4}{window\_w}}, game\_state-\/>\mbox{\hyperlink{structgame__state__t_a7d42d12ab1d6091af0c7529d9f4030f1}{window\_h}}, \&(game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}), \mbox{\hyperlink{Almog__Engine_8h_a3b664376e82e1cd4013e17ea17ac6501ad2872f5089e1989c79eaf9a2d83faceb}{AE\_LIGHTING\_FLAT}});}
\DoxyCodeLine{00057     \}}
\DoxyCodeLine{00058 }
\DoxyCodeLine{00059 \}}
\DoxyCodeLine{00060 }
\DoxyCodeLine{\Hypertarget{teapot__example_8c_source_l00061}\mbox{\hyperlink{teapot__example_8c_a189f73f504256a3c91c9b7741b956c69}{00061}} \textcolor{keywordtype}{void} \mbox{\hyperlink{teapot__example_8c_a189f73f504256a3c91c9b7741b956c69}{render}}(\mbox{\hyperlink{structgame__state__t}{game\_state\_t}} *game\_state)}
\DoxyCodeLine{00062 \{}
\DoxyCodeLine{00063     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a231ca7798cdad79a7622874c02d19d7e}{projected\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_acb45e304ded2b6eddf5eb3dab3e66609}{length}}; i++) \{}
\DoxyCodeLine{00064         \mbox{\hyperlink{Almog__Draw__Library_8h_ab49bb632b6db243a86b95af128e0466a}{adl\_tri\_mesh\_fill\_Pinedas\_rasterizer\_interpolate\_normal}}(game\_state-\/>\mbox{\hyperlink{structgame__state__t_a5277b42d23e322d6f88e978df0edaf04}{window\_pixels\_mat}}, game\_state-\/>\mbox{\hyperlink{structgame__state__t_a501509da5b0917cc975b96a3b73575d7}{inv\_z\_buffer\_mat}}, game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a231ca7798cdad79a7622874c02d19d7e}{projected\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_afe536b7ba3c01eee05be25677d1eb692}{elements}}[i], 0xffffffff, \mbox{\hyperlink{Almog__Draw__Library_8h_a92a254e8a4472cd8a3ba7d797e73f1ad}{ADL\_DEFAULT\_OFFSET\_ZOOM}});}
\DoxyCodeLine{00065     \}}
\DoxyCodeLine{00066 }
\DoxyCodeLine{00067     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a55369afcc314fe6bef1ecb6e0c322441}{in\_world\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_acb45e304ded2b6eddf5eb3dab3e66609}{length}}; i++) \{}
\DoxyCodeLine{00068         game\_state-\/>\mbox{\hyperlink{structgame__state__t_a6015ee90c2bcf979ae86296f9db38780}{scene}}.\mbox{\hyperlink{structScene_a231ca7798cdad79a7622874c02d19d7e}{projected\_tri\_meshes}}.\mbox{\hyperlink{structTri__mesh__array_afe536b7ba3c01eee05be25677d1eb692}{elements}}[i].\mbox{\hyperlink{structTri__mesh_a0fb2a2069a57bd77bac6a91a3b2e4ffb}{length}} = 0;}
\DoxyCodeLine{00069     \}}
\DoxyCodeLine{00070 \}}

\end{DoxyCode}
